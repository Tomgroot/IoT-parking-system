(function(e){function t(t){for(var s,o,r=t[0],c=t[1],l=t[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],s=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(s=!1)}s&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var s={},a={app:0},i=[];function o(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=s,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=(n("d3b7"),n("99af"),n("bc3a")),i=n.n(a),o={responseType:"text"},r=i.a.create(o);r.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),r.interceptors.response.use((function(e){if(e.data&&e.data.failure){var t="Device response : ".concat(e.data.status);e.data.errormessage&&(t+=" - ".concat(e.data.errormessage)),s["a"].prototype.$dialog.notify.warning(t,{position:"bottom-right",timeout:5e3})}return e}),(function(e){var t;return e.response?(console.log("".concat(e.message,"[").concat(e.response.status,"]:").concat(e.response.data)),t=e.response.data?e.response.data:e.message):e.request?(console.log("".concat(e.message,":").concat(e.request.data)),t=e.request.data?e.request.data:e.message):(console.log(e.message),t=e.message),s["a"].prototype.$dialog.notify.error(t,{position:"bottom-right",timeout:5e3}),Promise.reject(e)})),Plugin.install=function(e){e.axios=r,window.axios=r,Object.defineProperties(e.prototype,{axios:{get:function(){return r}},$axios:{get:function(){return r}}})},s["a"].use(Plugin);Plugin;var c=n("3835"),l=n("d4ec"),u=n("bee2"),d=n("ade3"),p=(n("ddb0"),n("a9e3"),n("159b"),n("4fad"),n("b64b"),n("2ca0"),n("a15b"),function(){function e(){Object(l["a"])(this,e),Object(d["a"])(this,"state",{});var t=new s["a"]({data:{state:{}}});this.state=t.state}return Object(u["a"])(e,[{key:"initState",value:function(e){s["a"].set(this.state,e,{data:{},observed:{},compositeObserved:{}})}},{key:"data",value:function(e,t){return this.state[e].data[t]}},{key:"newResourceValue",value:function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];void 0!==n.value?this.newSingleResourceValue(e,t,n.value,s):void 0!==n.values?this.newMultiResourceValue(e,t,n.values,s):console.log("unsupported resource : ",n)}},{key:"newSingleResourceValue",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.data(e,t);i&&i.single?(i.val=n,i.supposed=a):(i={val:n,supposed:a,isSingle:!0},s["a"].set(this.state[e].data,t,i))}},{key:"newMultiResourceValue",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={vals:{}};for(var o in n)i.vals[o]={},i.vals[o].val=n[o],i.vals[o].supposed=a;i.supposed=a,i.isSingle=!1,s["a"].set(this.state[e].data,t,i)}},{key:"newResourceInstanceValueFromPath",value:function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=t.lastIndexOf("/"),i=t.substring(0,a),o=t.substring(a+1);this.newResourceInstanceValue(e,i,Number(o),n,s)}},{key:"newResourceInstanceValue",value:function(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.data(e,t);if(!o||o.single)o={},o.vals={},o.vals[n]={},o.vals[n].val=a,o.vals[n].supposed=i,o.supposed=i,o.isSingle=!1,s["a"].set(this.state[e].data,t,o);else if(o.vals[n])o.vals[n].val=a,o.vals[n].supposed=i;else{var r={val:a,supposed:i};s["a"].set(o.vals,n,r)}}},{key:"newInstanceValue",value:function(e,t,n){var s=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];i||this.removeInstanceValue(e,t),n.forEach((function(n){s.newResourceValue(e,t+"/"+n.id,n,a)}))}},{key:"newObjectValue",value:function(e,t,n){var s=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.removeObjectValue(e,t),n.forEach((function(n){s.newInstanceValue(e,t+"/"+n.id,n.resources,a)}))}},{key:"newNode",value:function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"singleResource"===n.kind?this.newResourceValue(e,t,n,s):"multiResource"===n.kind?this.newMultiResourceValue(e,t,n["values"],s):"resourceInstance"===n.kind?this.newResourceInstanceValueFromPath(e,t,n.value,s):"instance"===n.kind?this.newInstanceValue(e,t,n.resources,s):"obj"===n.kind?this.newObjectValue(e,t,n.instances,s):console.log(n.kind," not yet supported")}},{key:"newNodes",value:function(e,t){var n=this,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object.entries(t).forEach((function(t){var a=Object(c["a"])(t,2),i=a[0],o=a[1];n.newNode(e,i,o,s)}))}},{key:"removeInstanceValue",value:function(e,t){var n=t+"/",s=this.state[e];Object.keys(s.data).forEach((function(e){e.startsWith(n)&&delete s.data[e]}))}},{key:"removeObjectValue",value:function(e,t){var n=t+"/",s=this.state[e];Object.keys(s.data).forEach((function(e){e.startsWith(n)&&delete s.data[e]}))}},{key:"setObserved",value:function(e,t,n){var a=this.state[e].observed[t];a?this.state[e].observed[t]=n:s["a"].set(this.state[e].observed,t,n)}},{key:"setCompositePathsObserved",value:function(e,t,n){var a=t.join(","),i=this.state[e].compositeObserved[a];i?this.state[e].compositeObserved[a]=n:s["a"].set(this.state[e].compositeObserved,a,n)}},{key:"compositeObjectToKey",value:function(e){return e.paths.join(",")}},{key:"setCompositeObjectObserved",value:function(e,t,n){this.setCompositePathsObserved(e,t.paths,n)}}]),e}()),v=new p,f={install:function(e){Object.defineProperties(e.prototype,{$store:{get:function(){return v}}})}};s["a"].use(f);var h=n("6eec");s["a"].use(h["a"],{format:"json"});var m=n("2ead"),b=n.n(m);s["a"].use(b.a);var g=n("1c5d");s["a"].use(g["a"]);n("5363"),n("fe2e");var _=n("f309");s["a"].use(_["a"]);var y=new _["a"]({icons:{iconfont:"mdi"}}),j=n("83df");n("8128");s["a"].use(j["a"],{context:{vuetify:y}});var V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("v-app",[n("leshan-nav-bar"),n("v-main",[n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("router-view")],1)],1)],1)],1)},x=[],w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app-bar",{attrs:{dark:"",flat:"",dense:"","max-height":"48"}},[e.$vuetify.breakpoint.smAndUp?s("v-toolbar-title",[s("v-img",{attrs:{src:n("a1d8"),"max-height":"32",contain:""}})],1):e._e(),s("v-tabs",{attrs:{right:e.$vuetify.breakpoint.smAndUp,grow:!e.$vuetify.breakpoint.smAndUp,"hide-slider":""}},e._l(e.pages,(function(t){return s("v-tab",{key:t.title,attrs:{"fixed-tabs":"",to:t.route,"active-class":"active"}},[s("v-icon",[e._v(e._s(t.icon))]),e.$vuetify.breakpoint.smAndUp?s("span",{staticClass:"pl-2"},[e._v(" "+e._s(t.title)+" ")]):e._e()],1)})),1)],1)},O=[],I={data:function(){return{pages:[{title:"Clients",route:"/clients",icon:"mdi-devices"},{title:"Server",route:"/server",icon:"mdi-server-security"},{title:"Security",route:"/security",icon:"mdi-shield-key"},{title:"About",route:"/about",icon:"mdi-information-outline"}]}}},k=I,C=(n("c092"),n("2877")),S=n("6544"),$=n.n(S),R=n("40dc"),D=n("132d"),P=n("adda"),N=n("71a3"),T=n("fe57"),E=n("2a7f"),q=Object(C["a"])(k,w,O,!1,null,"408ebf6d",null),A=q.exports;$()(q,{VAppBar:R["a"],VIcon:D["a"],VImg:P["a"],VTab:N["a"],VTabs:T["a"],VToolbarTitle:E["a"]});var M={components:{LeshanNavBar:A}},L=M,F=n("7496"),B=n("a523"),W=n("f6c4"),U=Object(C["a"])(L,V,x,!1,null,null,null),K=U.exports;$()(U,{VApp:F["a"],VContainer:B["a"],VMain:W["a"]});var H=n("8c4f"),J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.loading?e._e():n("v-data-table",{staticClass:"elevation-0 fill-height ma-3",attrs:{dense:"",headers:e.headers,items:e.registrations,"item-key":"endpoint","items-per-page":10,search:e.search,"sort-by":"registrationDate","sort-desc":""},on:{"click:row":e.openLink},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:""}},[e.$vuetify.breakpoint.smAndUp?n("v-toolbar-title",[e._v("Registered Clients")]):e._e(),e.$vuetify.breakpoint.smAndUp?n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}):e._e(),n("v-text-field",{staticClass:"pa-2",attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]},proxy:!0},{key:"item.registrationDate",fn:function(t){var n=t.item;return[e._v(" "+e._s(e._f("moment")(new Date(n.registrationDate),"MMM D, h:mm:ss A"))+" ")]}},{key:"item.lastUpdate",fn:function(t){var n=t.item;return[e._v(" "+e._s(e._f("moment")(new Date(n.lastUpdate),"MMM D, h:mm:ss A"))+" ")]}},{key:"item.infos",fn:function(e){var t=e.item;return[n("client-info",{attrs:{registration:t,tooltipleft:""}})]}}],null,!1,2806047308)})],1)},G=[],z=(n("4de4"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("v-tooltip",{attrs:{left:e.tooltipleft,bottom:e.tooltipbottom},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[n("v-icon",e._g({staticClass:"pr-2",attrs:{small:e.small}},s),[e._v(" mdi-information ")])]}}])},[e._v(" Lifetime : "+e._s(e.registration.lifetime)+"s "),n("br"),e._v(" Binding mode : "+e._s(e.registration.bindingMode)+" "),e.registration.queuemode?n("span",[n("br"),e._v(" Using QueueMode ")]):e._e(),n("br"),e._v(" Protocole version : "+e._s(e.registration.lwM2mVersion)+" "),n("br"),e._v(" Address : "+e._s(e.registration.address)+" "),e._l(e.registration.additionalRegistrationAttributes,(function(t,s){return n("span",{key:s},[n("br"),e._v(" "+e._s(s)+" "+e._s(t)+" ")])}))],2),n("v-tooltip",{attrs:{left:e.tooltipleft,bottom:e.tooltipbottom},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[n("v-icon",e._g({directives:[{name:"visible",rawName:"v-visible",value:e.registration.secure,expression:"registration.secure"}],staticClass:"pr-2",attrs:{small:e.small}},s),[e._v(" mdi-lock ")])]}}])},[e._v(" Communication over DTLS ")]),n("v-tooltip",{attrs:{left:e.tooltipleft,bottom:e.tooltipbottom},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[n("v-icon",e._g({directives:[{name:"visible",rawName:"v-visible",value:e.registration.sleeping,expression:"registration.sleeping"}],staticClass:"pr-2",attrs:{small:e.small}},s),[e._v(" mdi-sleep ")])]}}])},[e._v(" Device using Queue mode is absent ")])],1)}),Q=[],X={props:{registration:Object,small:{type:Boolean,default:!1},tooltipleft:{type:Boolean,default:!1},tooltipbottom:{type:Boolean,default:!1}}},Y=X,Z=n("3a2f"),ee=Object(C["a"])(Y,z,Q,!1,null,null,null),te=ee.exports;$()(ee,{VIcon:D["a"],VTooltip:Z["a"]});var ne={components:{ClientInfo:te},useSSE:!0,name:"Clients",data:function(){return{loading:!0,registrations:[],headers:[{text:"Client Endpoint",value:"endpoint"},{text:"Registration ID",value:"registrationId"},{text:"Registration Date",value:"registrationDate"},{text:"Last Update",value:"lastUpdate"},{text:"",value:"infos",sortable:!1,align:"end"}],search:""}},methods:{openLink:function(e){this.$router.push("/clients/".concat(e.endpoint,"/3"))}},mounted:function(){var e=this;this.sse=this.$sse.create({url:"api/event"}).on("REGISTRATION",(function(t){e.registrations=e.registrations.filter((function(e){return t.endpoint!==e.endpoint})).concat(t)})).on("UPDATED",(function(t){var n=t.registration;e.registrations=e.registrations.filter((function(e){return n.registrationId!==e.registrationId})).concat(n)})).on("DEREGISTRATION",(function(t){e.registrations=e.registrations.filter((function(e){return t.registrationId!==e.registrationId}))})).on("SLEEPING",(function(t){for(var n=0;n<e.registrations.length;n++)e.registrations[n].endpoint===t.ep&&(e.registrations[n].sleeping=!0)})).on("error",(function(e){console.error("sse unexpected error",e)})),this.sse.connect().catch((function(e){console.error("Failed to connect to server",e)})),this.axios.get("api/clients").then((function(t){return e.loading=!1,e.registrations=t.data}))},beforeDestroy:function(){this.sse.disconnect()}},se=ne,ae=n("8fea"),ie=n("ce7e"),oe=n("8654"),re=n("71d9"),ce=Object(C["a"])(se,J,G,!1,null,null,null),le=ce.exports;$()(ce,{VDataTable:ae["a"],VDivider:ie["a"],VTextField:oe["a"],VToolbar:re["a"],VToolbarTitle:E["a"]});var ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"fill-height",attrs:{"no-gutters":""}},[e.deregister?n("v-col",{attrs:{cols:"12"}},[n("div",{staticStyle:{height:"100px"}}),n("v-card",{staticClass:"text-center",attrs:{elevation:"0"}},[n("v-card-text",{staticClass:"fill-height"},[n("v-icon",{attrs:{"x-large":""}},[e._v(" mdi-exit-run")]),n("v-card-title",{staticClass:"justify-center"},[e._v(" "+e._s(e.$route.params.endpoint)+" is deregistered. ")]),n("v-card-subtitle",[e._v(" Waiting for new registration ? ")])],1)],1)],1):e._e(),e.registration?n("v-col",{staticStyle:{"background-color":"#fafafa"},attrs:{cols:"12",md:"2"}},[n("v-sheet",{staticClass:"pa-4",attrs:{color:"grey lighten-5",width:"100%"}},[n("h3",[e._v(" "+e._s(e.$route.params.endpoint)+" "),n("client-info",{attrs:{registration:e.registration,small:"",tooltipbottom:""}})],1),n("div",[n("div",[e._v("Reg. ID: "+e._s(e.registration.registrationId))]),n("div",[e._v(" Registered: "+e._s(e._f("moment")(e.registration.registrationDate,"MMM D, h:mm:ss A"))+" ")]),n("div",[e._v(" Updated: "+e._s(e._f("moment")(e.registration.lastUpdate,"MMM D, h:mm:ss A"))+" ")])]),n("v-divider"),n("client-setting")],1),n("v-divider"),n("span",[e.registration&&"1.0"!=e.registration.lwM2mVersion?n("v-list",{attrs:{dense:""}},[n("v-list-item-group",[n("v-list-item",{attrs:{to:"/clients/"+e.$route.params.endpoint+"/composite"}},[n("v-list-item-icon",{staticClass:"me-2"},[n("v-icon",[e._v("mdi-format-list-checkbox")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Composite Operations")])],1)],1)],1)],1):e._e(),n("v-divider")],1),n("object-selector",{directives:[{name:"show",rawName:"v-show",value:e.objectdefs,expression:"objectdefs"}],attrs:{objects:e.objectdefs}}),n("v-divider")],1):e._e(),n("v-col",{attrs:{"no-gutters":"",cols:"12",md:"10"}},[e.$route.params.objectid?n("div",[e.objectdefs?n("router-view",{attrs:{objectdef:e.objectdef,instances:e.instances}}):e._e()],1):n("div",[e.objectdefs&&e.registration?n("router-view",{attrs:{objectdefs:e.objectdefs,allInstances:e.registration.availableInstances}}):e._e()],1)])],1)},de=[],pe=(n("dca8"),n("7db0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pa-0"},[n("div",{attrs:{title:"Timeout used to send request"}},[n("v-select",{attrs:{"single-line":"",dense:"","hide-details":"",prefix:e.$vuetify.breakpoint.mdOnly?null:"Timeout :",items:e.timeoutList,"item-value":"val","item-text":"txt","append-outer-icon":"mdi-help-circle-outline"},on:{"click:append-outer":e.openTimeoutHelps},model:{value:e.timeout,callback:function(t){e.timeout=t},expression:"timeout"}})],1),n("div",{attrs:{title:"Content Format used to send request handling single value"}},[n("v-select",{attrs:{"single-line":"",dense:"",prefix:e.$vuetify.breakpoint.mdOnly?null:"Single Value :","hide-details":"",items:e.singleFormatList},model:{value:e.singleformat,callback:function(t){e.singleformat=t},expression:"singleformat"}})],1),n("div",{attrs:{title:"Content Format used to send request handling multiple values"}},[n("v-select",{attrs:{"single-line":"",dense:"","hide-details":"",prefix:e.$vuetify.breakpoint.mdOnly?null:"Multi Value :",items:e.multiFormatList},model:{value:e.multiformat,callback:function(t){e.multiformat=t},expression:"multiformat"}})],1)])}),ve=[],fe={data:function(){return{timeoutList:[{txt:"5s",val:5},{txt:"5min",val:300},{txt:"15min",val:900},{txt:"30min",val:1800},{txt:"None",val:null}],singleFormatList:["TLV","CBOR","TEXT","OPAQUE","SENML_JSON","SENML_CBOR","JSON"],multiFormatList:["TLV","SENML_JSON","SENML_CBOR","JSON"]}},computed:{timeout:Object(g["b"])("timeout",{defaultValue:5}),singleformat:Object(g["b"])("singleformat",{defaultValue:"TLV"}),multiformat:Object(g["b"])("multiformat",{defaultValue:"TLV"})},methods:{openTimeoutHelps:function(){window.open("https://github.com/eclipse/leshan/wiki/Request-Timeout","_blank")}}},he=fe,me=n("b974"),be=Object(C["a"])(he,pe,ve,!1,null,null,null),ge=be.exports;$()(be,{VSelect:me["a"]});var _e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list",{attrs:{dense:""}},[n("v-list-item-group",e._l(e.objects,(function(t){return n("v-list-item",{key:t.id,attrs:{to:"/clients/"+e.$route.params.endpoint+"/"+t.id}},[n("v-list-item-icon",{staticClass:"me-2"},[n("object-icon",{attrs:{objectId:t.id}})],1),n("v-list-item-content",[n("v-list-item-title",[e._v(" "+e._s(t.name)+" "),e.shouldBeHidden(t)?n("v-icon",{attrs:{small:"",color:"red",title:"The Object "+t.name+" ID:"+t.id+" MUST NOT be part of Update Objects and Object Instances list in Register Request."}},[e._v("mdi-alert-circle")]):e._e()],1),n("v-list-item-subtitle",[e._v(" "+e._s("/"+t.id)+" ")])],1)],1)})),1)],1)},ye=[],je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-icon",[e._v(e._s(e.idToIcon(e.objectId)))])},Ve=[],xe={props:{objectId:Number,unknowObjectIcon:{type:String,default:"mdi-alpha-o-circle-outline"},invalidObjectIcon:{type:String,default:"mdi-alert-circle-outline"}},methods:{idToIcon:function(e){if(e<0||e>65535)return this.invalidObjectIcon;switch(e){case 1:return"mdi-server";case 2:return"mdi-shield-check-outline";case 3:return"mdi-devices";case 4:return"mdi-signal-variant";case 5:return"mdi-cellphone-arrow-down";case 6:return"mdi-map-marker";case 7:return"mdi-signal-distance-variant";case 9:return"mdi-package-down";case 10:return"mdi-signal";case 11:return"mdi-sim";case 14:return"mdi-puzzle-outline";case 15:return"mdi-widgets-outline";case 16:return"mdi-folder-multiple-outline";case 19:return"mdi-database-sync-outline";case 3300:return"mdi-gauge";case 3303:return"mdi-thermometer";case 3304:return"mdi-water-percent";case 3311:return"mdi-lightbulb-on-outline";case 3313:return"mdi-axis-arrow";case 3323:return"mdi-arrow-expand-vertical";case 3335:return"mdi-palette-outline";case 3338:return"mdi-bell-ring";case 3341:return"mdi-text-recognition";case 3342:return"mdi-toggle-switch";case 3347:return"mdi-gesture-tap-button";case 3441:return"mdi-list-status";case 3442:return"mdi-list-status";case 10259:return"mdi-text-box-outline";case 10260:return"mdi-database";case 10351:return"mdi-door";default:return this.unknowObjectIcon}}}},we=xe,Oe=Object(C["a"])(we,je,Ve,!1,null,null,null),Ie=Oe.exports;$()(Oe,{VIcon:D["a"]});var ke={components:{ObjectIcon:Ie},props:{objects:Array},methods:{shouldBeHidden:function(e){if(e)switch(e.id){case 0:case 21:return!0;default:return!1}return!1}}},Ce=ke,Se=n("8860"),$e=n("da13"),Re=n("5d23"),De=n("1baa"),Pe=n("34c3"),Ne=Object(C["a"])(Ce,_e,ye,!1,null,null,null),Te=Ne.exports;$()(Ne,{VIcon:D["a"],VList:Se["a"],VListItem:$e["a"],VListItemContent:Re["a"],VListItemGroup:De["a"],VListItemIcon:Pe["a"],VListItemSubtitle:Re["b"],VListItemTitle:Re["c"]});var Ee={components:{ObjectSelector:Te,ClientSetting:ge,ClientInfo:te},name:"Client",data:function(){return{deregister:!1,registration:null,objectdefs:[]}},methods:{updateModels:function(){var e=this;this.axios.get("api/objectspecs/"+encodeURIComponent(this.$route.params.endpoint)).then((function(t){return e.objectdefs=Object.freeze(t.data)}))}},computed:{objectdef:function(){var e=this;return this.objectdefs.find((function(t){return t.id==e.$route.params.objectid}))},instances:function(){if(this.registration){var e=this.registration.availableInstances[this.$route.params.objectid];if(e)return e}return[]}},watch:{registration:function(e,t){e&&(t?t.endpoint!==e.endpoint&&this.$store.initState(e.endpoint):this.$store.initState(e.endpoint))}},mounted:function(){var e=this;this.sse=this.$sse.create({url:"api/event?ep="+encodeURIComponent(this.$route.params.endpoint)}).on("REGISTRATION",(function(t){e.registration=t,e.deregister=!1,e.updateModels()})).on("UPDATED",(function(t){var n=e.registration;e.registration=t.registration,JSON.stringify(e.registration.objectLinks)!==JSON.stringify(n.objectLinks)&&e.updateModels()})).on("DEREGISTRATION",(function(){e.registration=null,e.objectdefs=null,e.deregister=!0})).on("SLEEPING",(function(){e.registration.sleeping=!0})).on("SEND",(function(t){for(var n in t.val)e.$store.newNode(e.$route.params.endpoint,n,t.val[n])})).on("NOTIFICATION",(function(t){"composite"==t.kind?(e.$store.newNodes(e.$route.params.endpoint,t.val),e.$store.setCompositePathsObserved(e.$route.params.endpoint,t.paths,!0)):"single"==t.kind&&("instance"===t.val.kind?e.$store.newInstanceValue(e.$route.params.endpoint,t.res,t.val.resources,!1):"singleResource"===t.val.kind?e.$store.newSingleResourceValue(e.$route.params.endpoint,t.res,t.val.value,!1):"multiResource"===t.val.kind?e.$store.newMultiResourceValue(e.$route.params.endpoint,t.res,t.val.values,!1):"resourceInstance"===t.val.kind&&e.$store.newResourceInstanceValueFromPath(e.$route.params.endpoint,t.res,t.val.value,!1),e.$store.setObserved(e.$route.params.endpoint,t.res,!0))})).on("error",(function(e){console.error("sse unexpected error",e)})),this.sse.connect().catch((function(e){console.error("Failed to connect to server",e)})),this.axios.get("api/clients/"+encodeURIComponent(this.$route.params.endpoint)).then((function(t){e.registration=t.data,e.updateModels()})).catch((function(){e.registration=null,e.deregister=!0}))},beforeDestroy:function(){this.sse.disconnect()}},qe=Ee,Ae=n("b0af"),Me=n("99d9"),Le=n("62ad"),Fe=n("0fd9"),Be=n("8dd9"),We=Object(C["a"])(qe,ue,de,!1,null,null,null),Ue=We.exports;$()(We,{VCard:Ae["a"],VCardSubtitle:Me["b"],VCardText:Me["c"],VCardTitle:Me["d"],VCol:Le["a"],VDivider:ie["a"],VIcon:D["a"],VList:Se["a"],VListItem:$e["a"],VListItemContent:Re["a"],VListItemGroup:De["a"],VListItemIcon:Pe["a"],VListItemTitle:Re["c"],VRow:Fe["a"],VSheet:Be["a"]});var Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return null!=e.$route.params.compositeObjectName?n("router-view",{attrs:{objectdefs:e.objectdefs,allInstances:e.allInstances}}):n("div",[n("v-sheet",{staticClass:"pa-4",attrs:{color:"grey lighten-5",width:"100%"}},[n("div",[n("h3",[n("v-icon",[e._v("mdi-format-list-checkbox")]),e._v(" Composite Operations")],1),n("p",[e._v(' Create your "Composite Object", then you will be able to sent Composite Operation on it like Read-Composite, Write-Composite or Observe-Composite request. ')]),n("p",{staticClass:"subtitle-2"},[e._v(' Note that "Composite Object" is not a LWM2M concept but just a UI way to expose Composite Operation. ')])]),n("v-divider"),n("v-row",[n("v-col",{attrs:{cols:"0",md:"3"}}),n("v-col",{attrs:{cols:"12",md:"6"}},[n("composite-objects-selector")],1),n("v-col",{attrs:{cols:"0",md:"3"}})],1)],1)],1)},He=[],Je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-sheet",{staticClass:"pa-4",attrs:{color:"grey lighten-5",width:"100%",height:"100%"}},[n("v-card",[n("v-card-actions",{staticClass:"justify-center"},[n("v-btn",{attrs:{small:""},on:{click:function(t){return e.openNewCompositeObject()}}},[e._v(" Add Composite Object ")])],1),n("v-list",{attrs:{dense:""}},[n("v-list-item-group",e._l(e.compositeObjects,(function(t,s){return n("v-list-item",{key:s,attrs:{to:"/clients/"+e.$route.params.endpoint+"/composite/"+t.name}},[n("v-list-item-icon",[n("composite-object-icons",{attrs:{compositeObject:t}})],1),n("v-list-item-content",[n("v-list-item-title",[e._v(" "+e._s(t.name))]),n("v-list-item-subtitle",[e._v(" "+e._s(e.pathsAsString(t)))])],1),n("v-list-item-action",[n("v-btn",{attrs:{icon:""},on:{click:function(n){return n.preventDefault(),e.openEditCompositeObject(t)}}},[n("v-icon",{attrs:{small:""}},[e._v(" mdi-pencil ")])],1)],1),n("v-list-item-action",[n("v-btn",{attrs:{icon:""},on:{click:function(t){return t.preventDefault(),e.removeCompositeObject(s)}}},[n("v-icon",[e._v("mdi-delete")])],1)],1)],1)})),1)],1),n("composite-object-dialog",{attrs:{initialValue:e.editedCompositeObject,alreadyUsedName:e.compositeObjects.map((function(e){return e.name}))},on:{new:function(t){return e.addNewCompositeObject(t)},edit:function(t){return e.editCompositeObject(t)}},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}})],1)],1)},Ge=[],ze=n("2909"),Qe=(n("d81d"),n("b0c0"),n("a434"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",e._l(e.objectIds,(function(e,t){return n("object-icon",{key:t,attrs:{objectId:e,invalidObjectIcon:"mdi-select"}})})),1)}),Xe=[],Ye=(n("6062"),n("3ca3"),n("fb6a"),n("ac1f"),n("1276"),function(){function e(t){if(Object(l["a"])(this,e),this.path=t,0==t.indexOf("/")){var n=t.split("/");try{2==n.length?1==t.length?this.type="root":(this.type="object",this.objectid=parseInt(n[1])):3==n.length?(this.type="objectinstance",this.objectid=parseInt(n[1]),this.objectinstanceid=parseInt(n[2])):4==n.length?(this.type="resource",this.objectid=parseInt(n[1]),this.objectinstanceid=parseInt(n[2]),this.resourceid=parseInt(n[3])):5==n.length?(this.type="resourceinstance",this.objectid=parseInt(n[1]),this.objectinstanceid=parseInt(n[2]),this.resourceid=parseInt(n[3]),this.resourceinstanceid=parseInt(n[4])):this.type="invalid"}catch(s){this.type="invalid",console.log("invalid path",t,s)}}else this.type="invalid"}return Object(u["a"])(e,[{key:"toResourcePath",value:function(){return"/".concat(this.objectid,"/").concat(this.objectinstanceid,"/").concat(this.resourceid)}},{key:"toString",value:function(){return this.path}}]),e}()),Ze={components:{ObjectIcon:Ie},props:{compositeObject:Object},computed:{objectIds:function(){var e=new Set([]);if(this.compositeObject){var t=this.compositeObject.paths;t.forEach((function(t){var n=new Ye(t);null!=n.objectid&&e.add(n.objectid)}))}e=Object(ze["a"])(e).slice(0,3);for(var n=e.length;n<3;n++)e.push(-1);return e}}},et=Ze,tt=Object(C["a"])(et,Qe,Xe,!1,null,null,null),nt=tt.exports,st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"hide-overlay":"",fullscreen:"",transition:"dialog-bottom-transition"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[n("span",[e._v(e._s(e.editMode?"Edit Composite Object":"Add Composite Object"))])]),n("v-card-text",[n("p",{staticClass:"subtitle-1"},[e._v(" A Composite Object has a name and a list of path to LWM2M node (Object, Object Instance, Resource, Resource Instance). ")]),n("p",{staticClass:"subtitle-1"},[e._v(" Root path is not yet supported. "),n("br"),e._v(" Overlapped path will not work. (e.g. /3/0 with /3/0/1 is not valid) ")]),n("div",[e._v(" Note if you create Composite Object composed of too much resources, you could face some UI performance issue. "),n("a",{attrs:{href:"https://github.com/eclipse/leshan/issues/1016"}},[e._v("This is a UI demo limitation")]),e._v(", if you have skills in vue.js your help will be welcome. ")]),n("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{rules:[function(e){return!!e||"name is required"},function(t){return e.editMode||!t||!e.alreadyUsedName.includes(t)||"name already used"}],label:"Name",required:"",autofocus:!e.editMode,disabled:e.editMode},model:{value:e.compositeObject.name,callback:function(t){e.$set(e.compositeObject,"name",t)},expression:"compositeObject.name"}}),n("paths-input",{model:{value:e.compositeObject.paths,callback:function(t){e.$set(e.compositeObject,"paths",t)},expression:"compositeObject.paths"}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:"",disabled:!e.valid},on:{click:function(t){return e.$emit(e.editMode?"edit":"new",e.compositeObject)}}},[e._v(" "+e._s(e.editMode?"Save":"Add")+" ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.show=!1}}},[e._v(" Cancel ")])],1)],1)],1)},at=[],it=(n("caad"),n("2532"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grey lighten-4 pa-4 mb-1"},[n("span",{staticClass:"pa-2"},[n("v-btn",{attrs:{small:""},on:{click:e.addPath}},[e._v(" "+e._s(e.addButtonText)+" ")])],1),n("v-btn",{attrs:{small:""},on:{click:e.removeAllPath}},[e._v(" Remove All ")]),e._l(e.value,(function(t,s){return n("div",{key:s},[n("v-text-field",{attrs:{value:t,rules:[function(e){return!!e||"path can not be empty required"},function(e){return!e||/^((\/([1-9][0-9]{0,4}|[0])){0,4})$|^\/$/.test(e)||"invalid path"}],placeholder:"a path to a LWM2M node (e.g. /3/0/1 or /3/0/11/0)",required:"",dense:"","append-outer-icon":"mdi-delete"},on:{input:function(t){return e.updatePath(s,t)},"click:append-outer":function(t){return e.removePath(s)}}})],1)}))],2)}),ot=[],rt={props:{value:Array,addButtonText:{default:"Add Path",type:String}},methods:{addPath:function(){this.$emit("input",[].concat(Object(ze["a"])(this.value),[""]))},removeAllPath:function(){this.$emit("input",[])},updatePath:function(e,t){var n=Object(ze["a"])(this.value);n.splice(e,1,t),this.$emit("input",n)},removePath:function(e){var t=Object(ze["a"])(this.value);t.splice(e,1),this.$emit("input",t)}}},ct=rt,lt=n("8336"),ut=Object(C["a"])(ct,it,ot,!1,null,null,null),dt=ut.exports;$()(ut,{VBtn:lt["a"],VTextField:oe["a"]});var pt={components:{PathsInput:dt},props:{value:Boolean,initialValue:Object,alreadyUsedName:{type:Array,default:function(){return[]}}},data:function(){return{compositeObject:{},valid:!0,editMode:!1}},methods:{initialName:function(){var e,t=1;do{var n="compositeObject"+t;if(!this.alreadyUsedName.includes(n))return n;t++}while(t<1e3);return e}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},watch:{value:function(e){e&&(this.$refs.form&&this.$refs.form.resetValidation(),this.initialValue?(this.compositeObject=JSON.parse(JSON.stringify(this.initialValue)),this.editMode=!0):(this.compositeObject={name:this.initialName(),paths:[""]},this.editMode=!1))}}},vt=pt,ft=n("169a"),ht=n("4bd4"),mt=n("2fa4"),bt=Object(C["a"])(vt,st,at,!1,null,null,null),gt=bt.exports;$()(bt,{VBtn:lt["a"],VCard:Ae["a"],VCardActions:Me["a"],VCardText:Me["c"],VCardTitle:Me["d"],VDialog:ft["a"],VForm:ht["a"],VSpacer:mt["a"],VTextField:oe["a"]});var _t={components:{CompositeObjectDialog:gt,CompositeObjectIcons:nt},data:function(){return{dialog:!1,editedCompositeObject:null}},computed:{showDialog:{get:function(){return this.dialog},set:function(e){this.dialog=e}},compositeObjects:Object(g["b"])("compositeObjects",{defaultValue:[{name:"myCompositeObject",paths:["/3/0/1","/3/0/2"]}]})},methods:{pathsAsString:function(e){return e.paths.join(" , ")},openNewCompositeObject:function(){this.editedCompositeObject=null,this.showDialog=!0},openEditCompositeObject:function(e){this.editedCompositeObject=e,this.showDialog=!0},addNewCompositeObject:function(e){this.compositeObjects=[].concat(Object(ze["a"])(this.compositeObjects),[e]),this.showDialog=!1},editCompositeObject:function(e){this.compositeObjects=this.compositeObjects.map((function(t){return t.name==e.name?e:t})),this.showDialog=!1},removeCompositeObject:function(e){this.compositeObjects.splice(e,1),this.compositeObjects=Object(ze["a"])(this.compositeObjects)}}},yt=_t,jt=n("1800"),Vt=Object(C["a"])(yt,Je,Ge,!1,null,null,null),xt=Vt.exports;$()(Vt,{VBtn:lt["a"],VCard:Ae["a"],VCardActions:Me["a"],VIcon:D["a"],VList:Se["a"],VListItem:$e["a"],VListItemAction:jt["a"],VListItemContent:Re["a"],VListItemGroup:De["a"],VListItemIcon:Pe["a"],VListItemSubtitle:Re["b"],VListItemTitle:Re["c"],VSheet:Be["a"]});var wt={components:{CompositeObjectsSelector:xt},props:{objectdefs:Array,allInstances:Object}},Ot=wt,It=Object(C["a"])(Ot,Ke,He,!1,null,null,null),kt=It.exports;$()(It,{VCol:Le["a"],VDivider:ie["a"],VIcon:D["a"],VRow:Fe["a"],VSheet:Be["a"]});var Ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-sheet",{staticClass:"pa-4",attrs:{color:"grey lighten-5",width:"100%"}},[n("div",[n("h3",{staticClass:"text-capitalize"},[n("composite-object-icons",{attrs:{compositeObject:e.compositeObject}}),e._v(e._s(e.compositeObject.name)+" "),n("composite-object-control",{attrs:{endpoint:e.$route.params.endpoint,compositeObject:e.compositeObject,nodes:e.lwm2mNodes}}),n("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.state.compositeObserved[e.compositeObservationKey],expression:"state.compositeObserved[compositeObservationKey]"}],staticClass:"pl-3",attrs:{small:"",title:e.compositeObservationKey+" observed"}},[e._v("mdi-eye-outline")])],1),n("p",[e._v(" This Composite object is composed of following resources : "+e._s(e.compositeObject.paths.join(", "))+" ")])]),n("v-divider"),e._l(e.lwm2mNodes,(function(t,s){return n("div",{key:s},[n("h4",{staticClass:"pa-1"},[e._v(" "+e._s(s)+" "),t.instanceNotAvailable?n("span",{staticClass:"subtitle-2 grey--text text--darken-1"},[e._v(" - Instance "+e._s(t.path.objectinstanceid)+" was not reported as available by the client ")]):e._e()]),"root"==t.path.type?n("span",{staticClass:"text-body-2"},[e._v(" Root Path is not yet supported by Leshan. ")]):t.unknowObject?n("span",{staticClass:"text-body-2"},[e._v(" Client does not report it supports Object "+e._s(t.path.objectid)+" OR Leshan server demo does not know this object model, see "),n("a",{attrs:{href:"https://github.com/eclipse/leshan/wiki/Adding-new-objects#how-to-add-object-support-to-leshan-"}},[e._v(" how to add the model")]),e._v(". ")]):"object"==t.path.type?n("span",e._l(t.instances,(function(t){return n("div",{key:t.path},[n("h5",{staticClass:"pa-1"},[e._v("Instance "+e._s(t.id))]),n("v-expansion-panels",{attrs:{accordion:"",multiple:"",dense:"",tile:""}},e._l(t.resources,(function(t){return n("resource-expansion-panel",{key:t.path,attrs:{resource:t,endpoint:e.endpoint}})})),1)],1)})),0):"objectinstance"==t.path.type?n("div",[n("v-expansion-panels",{attrs:{accordion:"",multiple:"",dense:"",tile:""}},e._l(t.resources,(function(t){return n("resource-expansion-panel",{key:t.path,attrs:{resource:t,endpoint:e.endpoint}})})),1)],1):"resource"==t.path.type?n("div",[n("v-expansion-panels",{attrs:{accordion:"",multiple:"",dense:"",tile:""}},[n("resource-expansion-panel",{attrs:{resource:t.resource,endpoint:e.endpoint}})],1)],1):"resourceinstance"==t.path.type?n("div",[n("v-expansion-panels",{attrs:{accordion:"",multiple:"",dense:"",tile:""}},[n("resource-instance-expansion-panel",{attrs:{resource:t.resource,resourceInstanceId:t.resourceInstanceId,endpoint:e.endpoint}})],1)],1):"invalid"==t.path.type?n("span",{staticClass:"text-body-2"},[e._v(" Path seems to not be a valid one (ignored). ")]):n("span",{staticClass:"text-body-2"},[e._v(" Unexpected type of path "+e._s(t.path.type)+". ")])])}))],2)},St=[],$t=(n("25f0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-expansion-panel",[n("v-expansion-panel-header",{staticClass:"pa-3",staticStyle:{"min-height":"32px"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.open;return[n("v-container",{staticClass:"pa-0",staticStyle:{"min-width":"0"}},[n("v-row",[n("v-col",{staticClass:"pa-2",attrs:{cols:"7",lg:"3","align-self":"center"}},[e._v(e._s(e.resource.def.name)+" ")]),n("v-col",{staticClass:"pa-2 text--disabled",attrs:{cols:"4",lg:"1","align-self":"center"}},[e._v(e._s(e.resource.path)+" ")]),n("v-col",{staticClass:"pa-2 text--disabled",attrs:{cols:"1",lg:"1","align-self":"center"}},[n("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.state.observed[e.resource.path],expression:"state.observed[resource.path]"}],attrs:{"x-small":"",title:"Resource "+e.resource.path+" observed"}},[e._v("mdi-eye-outline")])],1),n("v-col",{staticClass:"pa-0",attrs:{cols:"7",lg:"3","align-self":"center"}},[n("v-fade-transition",{attrs:{"leave-absolute":""}},[n("resource-control",{directives:[{name:"show",rawName:"v-show",value:!s,expression:"!open"}],attrs:{resourcedef:e.resource.def,endpoint:e.endpoint,path:e.resource.path}})],1)],1),n("v-col",{staticClass:"pa-0",class:{"text--disabled":!!e.state.data[e.resource.path]&&e.state.data[e.resource.path].supposed},attrs:{cols:"5",lg:"4","align-self":"center"}},[n("v-fade-transition",{attrs:{"leave-absolute":""}},[n("simple-resource-view",{directives:[{name:"show",rawName:"v-show",value:!s,expression:"!open"}],staticClass:"pr-3 text-truncate",attrs:{resource:e.state.data[e.resource.path],resourcedef:e.resource.def}})],1)],1)],1)],1)]}}])}),n("v-expansion-panel-content",[n("resource-view",{attrs:{endpoint:e.endpoint,resource:e.state.data[e.resource.path],resourcedef:e.resource.def,path:e.resource.path}})],1)],1)}),Rt=[],Dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.readable?n("request-button",{attrs:{title:"Observe "+e.path},on:{"on-click":e.observe}},[e._v("Obs")]):e._e(),e.readable?n("request-button",{attrs:{title:"Passive Cancel Obverse "+e.path},on:{"on-click":e.stopObserve}},[n("v-icon",{attrs:{dense:"",small:""}},[e._v("mdi-eye-remove-outline")])],1):e._e(),e.readable?n("request-button",{attrs:{title:"Read "+e.path},on:{"on-click":e.read}},[e._v("R")]):e._e(),e.writable?n("request-button",{ref:"W",attrs:{title:"Write "+e.path},on:{"on-click":e.openWriteDialog}},[e._v("W")]):e._e(),e.executable?n("request-button",{attrs:{title:"Execute "+e.path},on:{"on-click":e.exec}},[e._v("Exe")]):e._e(),e.executable?n("request-button",{attrs:{title:"Execute with params "+e.path},on:{"on-click":e.execWithParams}},[n("v-icon",{attrs:{dense:"",small:""}},[e._v("mdi-cog-outline")])],1):e._e(),e.showDialog?n("resource-write-dialog",{attrs:{resourcedef:e.resourcedef,path:e.path},on:{write:function(t){return e.write(t)}},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}):e._e()],1)},Pt=[],Nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-badge",{attrs:{color:e.state,dot:"",bottom:"",overlap:"",title:e.details,value:e.state}},[n("v-btn",{staticClass:"ma-1",attrs:{small:"",tile:"","min-width":"0",elevation:"0",title:e.title,loading:e.loading,disabled:e.loading},on:{click:function(t){return t.stopPropagation(),e.onClick.apply(null,arguments)}}},[e._t("default")],2)],1)},Tt=[],Et={props:{title:String},data:function(){return{loading:!1,state:null,details:null}},methods:{onClick:function(){this.state=null,this.details=null,this.loading=!0,this.$emit("on-click",this)},changeState:function(e,t){this.state=e,this.details=t,this.loading=!1},resetState:function(){this.state=null,this.details=null,this.loading=!1}}},qt=Et,At=n("4ca6"),Mt=Object(C["a"])(qt,Nt,Tt,!1,null,null,null),Lt=Mt.exports;$()(Mt,{VBadge:At["a"],VBtn:lt["a"]});var Ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"hide-overlay":"",fullscreen:"",transition:"dialog-bottom-transition"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[e._v(' Write "'+e._s(e.resourcedef.name)+'" Resource ')]),n("v-card-text",[n("div",{staticClass:"subtitle-1"},[e._v("Resource "+e._s(e.path))]),e.resourcedef["type"]?n("div",[e._v(" Type : "),n("span",{staticClass:"text-capitalize"},[e._v(e._s(e.resourcedef["type"]))])]):e._e(),e.resourcedef.range?n("div",[e._v("Range : "+e._s(e.resourcedef.range))]):e._e(),e.resourcedef.units?n("div",[e._v("Units : "+e._s(e.resourcedef.units))]):e._e(),n("v-divider",{staticClass:"pa-2"}),n("p",{staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(e.resourcedef.description))]),n("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.write.apply(null,arguments)}}},[n("resource-input",{attrs:{resourcedef:e.resourcedef},model:{value:e.resourceValue,callback:function(t){e.resourceValue=t},expression:"resourceValue"}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:e.write}},[e._v(" Write ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.show=!1}}},[e._v(" Cancel ")])],1)],1)],1)},Bt=[],Wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"single"!=e.resourcedef.instancetype?n("multi-instance-resource-input",{attrs:{resourcedef:e.resourcedef,hint:e.hint,value:e.value},on:{input:function(t){return e.$emit("input",t)}}}):n("single-value-input",{attrs:{resourcedef:e.resourcedef,hint:e.hint,value:e.value},on:{input:function(t){return e.$emit("input",t)}}})},Ut=[],Kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"boolean"==e.resourcedef.type?n("boolean-value-input",{attrs:{resourcedef:e.resourcedef,value:e.value},on:{input:function(t){return e.$emit("input",t)}}}):"opaque"==e.resourcedef.type?n("opaque-value-input",{attrs:{resourcedef:e.resourcedef,value:e.value},on:{input:function(t){return e.$emit("input",t)}}}):"time"==e.resourcedef.type?n("date-time-value-input",{attrs:{resourcedef:e.resourcedef,value:e.value},on:{input:function(t){return e.$emit("input",t)}}}):"objlnk"==e.resourcedef.type?n("obj-link-value-input",{attrs:{resourcedef:e.resourcedef,value:e.value},on:{input:function(t){return e.$emit("input",t)}}}):n("v-text-field",{attrs:{label:e.resourcedef.type,hint:e.hint,suffix:e.resourcedef.units,value:e.value},on:{input:function(t){return e.$emit("input",t)}}})},Ht=[],Jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",{attrs:{cols:"1"}},[n("v-checkbox",{key:e.state,attrs:{indeterminate:""!==e.state,"indeterminate-icon":e.icon,"off-icon":"mdi-close-box-outline"},model:{value:e.booleanValue,callback:function(t){e.booleanValue=t},expression:"booleanValue"}})],1),n("v-col",[n("v-text-field",{attrs:{"single-line":"",label:e.resourcedef.type,suffix:e.resourcedef.units,rules:[function(t){return e.isNotSet||!e.isNotBoolean||"not a boolean"}],clearable:""},model:{value:e.booleanValue,callback:function(t){e.booleanValue=t},expression:"booleanValue"}})],1)],1)},Gt=[],zt={props:{value:null,resourcedef:Object},data:function(){return{localValue:null}},watch:{value:function(e){this.localValue=e}},methods:{toBoolean:function(e){if("boolean"===typeof e)return e;if("string"===typeof e){if("true"==e)return!0;if("false"==e)return!1}return e}},computed:{booleanValue:{get:function(){return this.localValue},set:function(e){this.$emit("input",this.toBoolean(e))}},state:function(){return this.isNotSet?"notset":this.isNotBoolean?"notbool":""},isNotSet:function(){return void 0===this.booleanValue||null===this.booleanValue||""===this.booleanValue},isNotBoolean:function(){return"boolean"!==typeof this.booleanValue},icon:function(){return this.isNotSet?"mdi-checkbox-blank-outline":this.isNotBoolean?"mdi-help-box":""}}},Qt=zt,Xt=n("ac7c"),Yt=Object(C["a"])(Qt,Jt,Gt,!1,null,null,null),Zt=Yt.exports;$()(Yt,{VCheckbox:Xt["a"],VCol:Le["a"],VRow:Fe["a"],VTextField:oe["a"]});var en=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",[n("v-text-field",{attrs:{"single-line":"",label:e.resourcedef.type,suffix:"seconds",rules:[function(t){return!t||e.isValidTimestamp(t)||"Invalid timestamp"}],hint:"Timestamp in seconds",clearable:""},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1)],1)},tn=[];n("498a");function nn(e){return"number"===typeof e?e===Math.round(e):"string"===typeof e&&""!==e.trim()&&e===String(Math.round(Number(e)))}var sn={props:{value:null,resourcedef:Object},data:function(){return{localValue:null}},watch:{value:function(e){this.isValidTimestamp(e)?this.localValue=Math.floor(parseInt(e)/1e3):this.localValue=e}},methods:{isValidTimestamp:function(e){return nn(e)}},computed:{dateValue:{get:function(){return this.localValue},set:function(e){this.$emit("input",this.isValidTimestamp(e)?1e3*e:e)}}}},an=sn,on=Object(C["a"])(an,en,tn,!1,null,null,null),rn=on.exports;$()(on,{VCol:Le["a"],VRow:Fe["a"],VTextField:oe["a"]});var cn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-file-input",{attrs:{label:"File input","show-size":"",clearable:"",disabled:!!e.localOpaqueValue},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1),n("v-col",[n("v-textarea",{attrs:{"auto-grow":"",rows:"1",label:"Byte Value in Hexadecimal",suffix:e.resourcedef.units,rules:[function(e){return!e||/^[0-9a-fA-F]+$/.test(e)||"Hexadecimal format is expected"}],clearable:"",disabled:!!e.localFile},model:{value:e.opaqueValue,callback:function(t){e.opaqueValue=t},expression:"opaqueValue"}})],1)],1)},ln=[],un=(n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),{props:{value:null,resourcedef:Object},data:function(){return{localOpaqueValue:null,localFile:null}},watch:{value:function(e){null==e&&(this.localFile=null,this.localOpaqueValue=null)}},computed:{opaqueValue:{get:function(){return this.localOpaqueValue},set:function(e){this.localOpaqueValue=e,this.$emit("input",this.localOpaqueValue)}},file:{get:function(){return this.localFile},set:function(e){var t=this;this.localFile=e,e?this.toByteArray(this.localFile).then((function(e){return t.$emit("input",e)})):this.$emit("input",e)}}},methods:{toByteArray:function(e){return new Promise((function(t){var n=new FileReader;n.onload=function(){var e=new Uint8Array(this.result),n=new Array(e.length),s=e.length;while(s--)n[s]=(e[s]<16?"0":"")+e[s].toString(16);e=null,t(n.join(""))},n.readAsArrayBuffer(e)}))}}}),dn=un,pn=n("23a7"),vn=n("a844"),fn=Object(C["a"])(dn,cn,ln,!1,null,null,null),hn=fn.exports;$()(fn,{VCol:Le["a"],VFileInput:pn["a"],VRow:Fe["a"],VTextarea:vn["a"]});var mn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",[n("v-text-field",{attrs:{"single-line":"",label:"Object Id",rules:[function(t){return!t||e.isValidId(t)||"Invalid object id"}],value:e.objectId,clearable:""},on:{input:function(t){e.$emit("input",e.objectIdChanged(t))}}})],1),n("v-col",[n("v-text-field",{attrs:{"single-line":"",label:"Object Instance Id",rules:[function(t){return!t||e.isValidId(t)||"Invalid object instance id"}],value:e.objectInstanceId,clearable:""},on:{input:function(t){e.$emit("input",e.objectInstanceIdChanged(t))}}})],1)],1)},bn=[],gn={props:{value:null,resourcedef:Object},data:function(){return{objectId:"",objectInstanceId:""}},watch:{value:function(e){this.objectId=e.objectId,this.objectInstanceId=e.objectInstanceId}},methods:{convertToNumber:function(e){return nn(e)?Number(e):e},isValidId:function(e){return nn(e)},objectIdChanged:function(e){return""===e&&""===this.objectInstanceId?null:{objectId:this.convertToNumber(e),objectInstanceId:this.objectInstanceId}},objectInstanceIdChanged:function(e){return""===this.objectId&&""===e?null:{objectId:this.objectId,objectInstanceId:this.convertToNumber(e)}}}},_n=gn,yn=Object(C["a"])(_n,mn,bn,!1,null,null,null),jn=yn.exports;$()(yn,{VCol:Le["a"],VRow:Fe["a"],VTextField:oe["a"]});var Vn={components:{BooleanValueInput:Zt,OpaqueValueInput:hn,DateTimeValueInput:rn,ObjLinkValueInput:jn},props:{value:null,resourcedef:Object,hint:{type:String,default:null}}},xn=Vn,wn=Object(C["a"])(xn,Kt,Ht,!1,null,null,null),On=wn.exports;$()(wn,{VTextField:oe["a"]});var In=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grey lighten-4 pa-4 mb-1"},[n("span",{staticClass:"pa-2"},[n("v-btn",{attrs:{small:""},on:{click:e.addNewInstance}},[e._v(" Add Instance ")])],1),n("v-btn",{attrs:{small:""},on:{click:e.removeAllInstances}},[e._v(" Remove All ")]),e._l(e.instances,(function(t,s){return n("span",{key:s},[n("v-row",{attrs:{dense:"",align:"center"}},[n("v-col",{attrs:{cols:"12",md:"1"}},[n("v-text-field",{ref:"id"+s,refInFor:!0,attrs:{hint:"Id of the instance",type:"number",rules:[function(e){return/^(0|[1-9]\d*)$/.test(e)||"Must be a positive Integer"},function(t){return!e.isAlreadyUsed(t,s)||"ID already used"}]},on:{input:function(t){return e.triggerValidation(s)}},model:{value:t.id,callback:function(n){e.$set(t,"id",n)},expression:"instance.id"}})],1),n("v-col",[n("single-value-input",{attrs:{resourcedef:e.resourcedef,hint:e.hint},model:{value:t.val,callback:function(n){e.$set(t,"val",n)},expression:"instance.val"}})],1),n("v-col",{attrs:{cols:"1",justify:"center"}},[n("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.removeInstance(s)}}},[n("v-icon",[e._v(" mdi-delete ")])],1)],1)],1)],1)}))],2)},kn=[],Cn={components:{SingleValueInput:On},props:{value:null,resourcedef:Object,hint:{type:String,default:null}},computed:{instances:{get:function(){return this.value?this.value:[]}}},methods:{triggerValidation:function(e){var t=this;this.instances.forEach((function(n,s){if(s!=e){var a=t.$refs["id"+s];a&&a[0].validate(!0)}}))},isAlreadyUsed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=this.instances.find((function(n,s){return n.id==e&&s!=t}));return void 0!==n},addNewInstance:function(){this.$emit("input",[].concat(Object(ze["a"])(this.instances),[{id:this.newId(),val:null}]))},removeAllInstances:function(){this.$emit("input",[])},removeInstance:function(e){this.instances.splice(e,1),this.$emit("input",this.instances)},newId:function(){var e=0;while(e<=65535){if(!this.isAlreadyUsed(e))return e;e++}}}},Sn=Cn,$n=Object(C["a"])(Sn,In,kn,!1,null,null,null),Rn=$n.exports;$()($n,{VBtn:lt["a"],VCol:Le["a"],VIcon:D["a"],VRow:Fe["a"],VTextField:oe["a"]});var Dn={components:{SingleValueInput:On,MultiInstanceResourceInput:Rn},props:{value:null,resourcedef:Object,hint:{type:String,default:null}}},Pn=Dn,Nn=Object(C["a"])(Pn,Wt,Ut,!1,null,null,null),Tn=Nn.exports,En={components:{ResourceInput:Tn},props:{value:Boolean,resourcedef:Object,path:String},data:function(){return{resourceValue:null}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},watch:{value:function(e){e&&(this.resourceValue=null)}},methods:{write:function(){this.show=!1,this.$emit("write",this.resourceValue)}}},qn=En,An=Object(C["a"])(qn,Ft,Bt,!1,null,null,null),Mn=An.exports;function Ln(e,t,n){var s={kind:"instance",resources:[]};null!=t&&(s.id=t);var a=function(t){var a=e.resourcedefs.find((function(e){return e.id==t}));s.resources.push(Fn(a,n[t]))};for(var i in n)a(i);return s}function Fn(e,t){return"single"==e.instancetype?Bn(e,t):Wn(e,t)}function Bn(e,t){var n={};return n.id=e.id,n.kind="singleResource",n.value=t,n.type=e.type,n}function Wn(e,t){var n={};return n.id=e.id,n.kind="multiResource",n.type=e.type,n.values=t.reduce((function(e,t){return e[t.id]=t.val,e}),{}),n}function Un(e,t,n){var s={};return s.id=t,s.kind="resourceInstance",s.value=n,s.type=e.type,s}function Kn(e,t,n){if("resource"==t.type&&"single"==e.instancetype)return Bn(e,n);if("resourceinstance"==t.type)return Un(e,t.resourceinstanceid,n);throw new Error("Unsupported kind of node ".concat(t.type))}$()(An,{VBtn:lt["a"],VCard:Ae["a"],VCardActions:Me["a"],VCardText:Me["c"],VCardTitle:Me["d"],VDialog:ft["a"],VDivider:ie["a"],VForm:ht["a"],VSpacer:mt["a"]});var Hn=Object(g["b"])("timeout",{defaultValue:5}),Jn=Object(g["b"])("singleformat",{defaultValue:"TLV"}),Gn=Object(g["b"])("multiformat",{defaultValue:"TLV"}),zn={components:{RequestButton:Lt,ResourceWriteDialog:Mn},props:{resourcedef:Object,path:String,endpoint:String},data:function(){return{dialog:!1}},computed:{showDialog:{get:function(){return this.dialog},set:function(e){this.dialog=e,this.$refs.W.resetState()}},readable:function(){return this.resourcedef.operations.includes("R")},writable:function(){return this.resourcedef.operations.includes("W")},executable:function(){return this.resourcedef.operations.includes("E")}},methods:{getFormat:function(){return"single"===this.resourcedef.instancetype?Jn.get():Gn.get()},requestPath:function(){return"api/clients/".concat(encodeURIComponent(this.endpoint)).concat(this.path)},requestOption:function(){return"?timeout=".concat(Hn.get(),"&format=").concat(this.getFormat())},updateState:function(e,t){var n=e.valid?e.success?"success":"error":"warning";t.changeState(n,e.status)},read:function(e){var t=this;this.axios.get(this.requestPath()+this.requestOption()).then((function(n){t.updateState(n.data,e),n.data.success&&t.$store.newResourceValue(t.endpoint,t.path,n.data.content)})).catch((function(){e.resetState()}))},observe:function(e){var t=this;this.axios.post(this.requestPath()+"/observe"+this.requestOption()).then((function(n){t.updateState(n.data,e),n.data.success&&(t.$store.newResourceValue(t.endpoint,t.path,n.data.content),t.$store.setObserved(t.endpoint,t.path,!0))})).catch((function(){e.resetState()}))},stopObserve:function(e){var t=this;this.axios.delete(this.requestPath()+"/observe").then((function(){e.changeState("success"),t.$store.setObserved(t.endpoint,t.path,!1)})).catch((function(){e.resetState()}))},openWriteDialog:function(){this.dialog=!0},write:function(e){var t=this,n=this.$refs.W,s=Fn(this.resourcedef,e);this.axios.put(this.requestPath()+this.requestOption(),s).then((function(e){t.updateState(e.data,n),e.data.success&&t.$store.newResourceValue(t.endpoint,t.path,s,!0)})).catch((function(){n.resetState()}))},exec:function(e){var t=this;this.axios.post(this.requestPath()).then((function(n){t.updateState(n.data,e)})).catch((function(){e.resetState()}))},execWithParams:function(e){var t=this;this.$dialog.prompt({text:"Parameters for the execute request",title:"Execute "+this.path}).then((function(n){n?t.axios.post(t.requestPath(),n).then((function(n){t.updateState(n.data,e)})).catch((function(){e.resetState()})):e.resetState()}))}}},Qn=zn,Xn=Object(C["a"])(Qn,Dt,Pt,!1,null,null,null),Yn=Xn.exports;$()(Xn,{VIcon:D["a"]});var Zn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{title:e.resourceValueAsString}},[e._v(" "+e._s(e.resourceValueAsString)+" ")])},es=[];function ts(e,t){if("objlnk"==t)return e.objectId+":"+e.objectInstanceId;if("time"==t){var n=new Date(e);return n.toDateString()+" - "+n.toLocaleTimeString()+" ("+n.getTime()/1e3+"s)"}return String(e)}function ns(e,t){if(e.isSingle)return ts(e.val,t);var n=Object.entries(e.vals),s=n.length;if(0==s)return"0 instance";var a=s+" instance"+(s>1?"s":""),i=n.map((function(e){var n=Object(c["a"])(e,2),s=n[0],a=n[1];return s+":"+ts(a.val,t)})).join(", ");return a+" ["+i+"]"}var ss={props:{resourcedef:Object,resource:Object},computed:{resourceValueAsString:function(){return this.resource?ns(this.resource,this.resourcedef.type):""}}},as=ss,is=Object(C["a"])(as,Zn,es,!1,null,null,null),os=is.exports,rs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{color:"grey lighten-5"}},[n("v-col",{attrs:{cols:"12",lg:"6",xl:"5"}},[n("resource-definition-view",{attrs:{resourcedef:e.resourcedef}})],1),n("v-col",[n("v-card",{attrs:{elevation:"0"}},[n("resource-control",{attrs:{resourcedef:e.resourcedef,endpoint:e.endpoint,path:e.path}}),"single"==e.resourcedef.instancetype?n("v-card-text",{staticClass:"font-weight-bold",class:{"text--primary":e.resource&&!e.resource.supposed}},[e._v(" "+e._s(e.resourceValueAsString)+" ")]):n("multi-instances-resource-view",{attrs:{resourcedef:e.resourcedef,endpoint:e.endpoint,path:e.path,resource:e.resource}})],1)],1)],1)},cs=[],ls=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.resource?n("v-simple-table",{attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"px-2 text-left "},[e._v(" Id ")]),n("th"),n("th"),n("th",{staticClass:"text-left",staticStyle:{width:"100%"}},[e._v(" Value ")])])]),n("tbody",e._l(e.resource.vals,(function(t,s){return n("tr",{key:s,staticStyle:{"background-color":"transparent !important"}},[n("td",{staticClass:"px-2 text--disabled"},[e._v(e._s(s))]),n("td",{staticClass:"px-2"},[n("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.state.observed[e.instancePath(s)],expression:"state.observed[instancePath(id)]"}],staticClass:"pa-0",attrs:{"x-small":"",title:"Instance "+e.instancePath(s)+" observed"}},[e._v("mdi-eye-outline")])],1),n("td",{staticClass:"px-2",staticStyle:{"white-space":"nowrap"}},[n("resource-instance-control",{attrs:{endpoint:e.endpoint,resourcedef:e.resourcedef,resourcePath:e.path,instanceId:Number(s)}})],1),n("td",{class:{"text--disabled":t.supposed}},[e._v(" "+e._s(e.valueAsString(t.val))+" ")])])})),0)]},proxy:!0}],null,!1,3848279987)}):e._e()},us=[],ds=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.readable?n("request-button",{attrs:{title:"Observe "+e.path},on:{"on-click":e.observe}},[e._v("Obs")]):e._e(),e.readable?n("request-button",{attrs:{title:"Passive Cancel Obverse "+e.path},on:{"on-click":e.stopObserve}},[n("v-icon",{attrs:{dense:"",small:""}},[e._v("mdi-eye-remove-outline")])],1):e._e(),e.readable?n("request-button",{attrs:{title:"Read "+e.path},on:{"on-click":e.read}},[e._v("R")]):e._e(),e.writable?n("request-button",{ref:"W",attrs:{title:"Write "+e.path},on:{"on-click":e.openWriteDialog}},[e._v("W")]):e._e(),e.showDialog?n("resource-instance-write-dialog",{attrs:{resourcedef:e.resourcedef,path:e.path,instanceId:e.instanceId},on:{write:function(t){return e.write(t)}},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}):e._e()],1)},ps=[],vs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"hide-overlay":"",fullscreen:"",transition:"dialog-bottom-transition"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[e._v(" Write Instance "+e._s(e.instanceId)+' of "'+e._s(e.resourcedef.name)+'" Resource ')]),n("v-card-text",[n("div",{staticClass:"subtitle-1"},[e._v("Resource Instance "+e._s(e.path))]),e.resourcedef["type"]?n("div",[e._v(" Type : "),n("span",{staticClass:"text-capitalize"},[e._v(e._s(e.resourcedef["type"]))])]):e._e(),e.resourcedef.range?n("div",[e._v("Range : "+e._s(e.resourcedef.range))]):e._e(),e.resourcedef.units?n("div",[e._v("Units : "+e._s(e.resourcedef.units))]):e._e(),n("v-divider",{staticClass:"pa-2"}),n("p",{staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(e.resourcedef.description))]),n("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.write.apply(null,arguments)}}},[n("single-value-input",{attrs:{resourcedef:e.resourcedef},model:{value:e.resourceValue,callback:function(t){e.resourceValue=t},expression:"resourceValue"}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:e.write}},[e._v(" Write ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.show=!1}}},[e._v(" Cancel ")])],1)],1)],1)},fs=[],hs={components:{SingleValueInput:On},props:{value:Boolean,resourcedef:Object,path:String,instanceId:Number},data:function(){return{resourceValue:null}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},watch:{value:function(e){e&&(this.resourceValue=null)}},methods:{write:function(){this.show=!1,this.$emit("write",this.resourceValue)}}},ms=hs,bs=Object(C["a"])(ms,vs,fs,!1,null,null,null),gs=bs.exports;$()(bs,{VBtn:lt["a"],VCard:Ae["a"],VCardActions:Me["a"],VCardText:Me["c"],VCardTitle:Me["d"],VDialog:ft["a"],VDivider:ie["a"],VForm:ht["a"],VSpacer:mt["a"]});var _s=Object(g["b"])("timeout",{defaultValue:5}),ys=Object(g["b"])("singleformat",{defaultValue:"TLV"}),js={components:{RequestButton:Lt,ResourceInstanceWriteDialog:gs},props:{resourcedef:Object,resourcePath:String,instanceId:Number,endpoint:String},data:function(){return{dialog:!1}},computed:{showDialog:{get:function(){return this.dialog},set:function(e){this.dialog=e,this.$refs.W.resetState()}},path:function(){return this.resourcePath+"/"+this.instanceId},readable:function(){return this.resourcedef.operations.includes("R")},writable:function(){return this.resourcedef.operations.includes("W")}},methods:{requestPath:function(){return"api/clients/".concat(encodeURIComponent(this.endpoint)).concat(this.path)},requestOption:function(){return"?timeout=".concat(_s.get(),"&format=").concat(ys.get())},updateState:function(e,t){var n=e.valid?e.success?"success":"error":"warning";t.changeState(n,e.status)},read:function(e){var t=this;this.axios.get(this.requestPath()+this.requestOption()).then((function(n){t.updateState(n.data,e),n.data.success&&t.$store.newResourceInstanceValue(t.endpoint,t.resourcePath,t.instanceId,n.data.content.value)})).catch((function(){e.resetState()}))},observe:function(e){var t=this;this.axios.post(this.requestPath()+"/observe"+this.requestOption()).then((function(n){t.updateState(n.data,e),n.data.success&&(t.$store.newResourceInstanceValue(t.endpoint,t.resourcePath,t.instanceId,n.data.content.value),t.$store.setObserved(t.endpoint,t.path,!0))})).catch((function(){e.resetState()}))},stopObserve:function(e){var t=this;this.axios.delete(this.requestPath()+"/observe").then((function(){e.changeState("success"),t.$store.setObserved(t.endpoint,t.path,!1)})).catch((function(){e.resetState()}))},openWriteDialog:function(){this.dialog=!0},write:function(e){var t=this,n=this.$refs.W;this.axios.put(this.requestPath()+this.requestOption(),Un(this.resourcedef,this.instanceId,e)).then((function(s){t.updateState(s.data,n),s.data.success&&t.$store.newResourceInstanceValue(t.endpoint,t.resourcePath,t.instanceId,e,!0)})).catch((function(){n.resetState()}))}}},Vs=js,xs=Object(C["a"])(Vs,ds,ps,!1,null,null,null),ws=xs.exports;$()(xs,{VIcon:D["a"]});var Os={components:{ResourceInstanceControl:ws},props:{endpoint:String,resourcedef:Object,resource:Object,path:String},computed:{state:function(){return this.$store.state[this.endpoint]}},methods:{valueAsString:function(e){return ts(e,this.resourcedef.type)},instancePath:function(e){return this.path+"/"+e}}},Is=Os,ks=n("1f4f"),Cs=Object(C["a"])(Is,ls,us,!1,null,null,null),Ss=Cs.exports;$()(Cs,{VIcon:D["a"],VSimpleTable:ks["a"]});var $s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"grey lighten-4",attrs:{elevation:"0"}},[n("v-card-subtitle",{staticClass:"pb-0 text-decoration-underline"},[e._v(" Model : ")]),n("v-card-text",[n("v-simple-table",{attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[e._v(" Operations ")]),n("th",{staticClass:"text-left"},[e._v(" Instances ")]),n("th",{staticClass:"text-left"},[e._v(" Mandatory ")]),n("th",{staticClass:"text-left"},[e._v(" Type ")]),n("th",{staticClass:"text-left"},[e._v(" Range or enumeration ")]),n("th",{staticClass:"text-left"},[e._v(" Units ")])])]),n("tbody",[n("tr",{staticClass:"text-capitalize",staticStyle:{"pointer-events":"none"}},[n("td",[e._v(e._s(e.resourcedef.operations))]),n("td",[e._v(e._s(e.resourcedef.instancetype))]),n("td",[e._v(e._s(e.resourcedef.mandatory))]),n("td",[e._v(e._s(e.resourcedef.type))]),n("td",[e._v(e._s(e.resourcedef.range))]),n("td",[e._v(e._s(e.resourcedef.units))])])])]},proxy:!0}])})],1),n("v-card-subtitle",{staticClass:"pb-0 text-decoration-underline"},[e._v(" Description : ")]),n("v-card-text",{staticStyle:{"white-space":"pre-wrap"}},[e._v(" "+e._s(e.resourcedef.description)),e.resourcedef.description2?n("br"):e._e(),e._v(e._s(e.resourcedef.description2)+" ")])],1)},Rs=[],Ds={props:{resourcedef:Object}},Ps=Ds,Ns=Object(C["a"])(Ps,$s,Rs,!1,null,null,null),Ts=Ns.exports;$()(Ns,{VCard:Ae["a"],VCardSubtitle:Me["b"],VCardText:Me["c"],VSimpleTable:ks["a"]});var Es={components:{ResourceControl:Yn,ResourceDefinitionView:Ts,MultiInstancesResourceView:Ss},props:{endpoint:String,resourcedef:Object,resource:Object,path:String},computed:{resourceValueAsString:function(){return this.resource?ns(this.resource,this.resourcedef.type):""}}},qs=Es,As=Object(C["a"])(qs,rs,cs,!1,null,null,null),Ms=As.exports;$()(As,{VCard:Ae["a"],VCardText:Me["c"],VCol:Le["a"],VRow:Fe["a"]});var Ls={components:{ResourceControl:Yn,SimpleResourceView:os,ResourceView:Ms},props:{endpoint:String,resource:Object},computed:{state:function(){return this.$store.state[this.endpoint]}}},Fs=Ls,Bs=n("cd55"),Ws=n("49e2"),Us=n("c865"),Ks=n("0789"),Hs=Object(C["a"])(Fs,$t,Rt,!1,null,null,null),Js=Hs.exports;$()(Hs,{VCol:Le["a"],VContainer:B["a"],VExpansionPanel:Bs["a"],VExpansionPanelContent:Ws["a"],VExpansionPanelHeader:Us["a"],VFadeTransition:Ks["c"],VIcon:D["a"],VRow:Fe["a"]});var Gs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-expansion-panel",[n("v-expansion-panel-header",{staticClass:"pa-3",staticStyle:{"min-height":"32px"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.open;return[n("v-container",{staticClass:"pa-0",staticStyle:{"min-width":"0"}},[n("v-row",[n("v-col",{staticClass:"pa-2",attrs:{cols:"7",lg:"3","align-self":"center"}},[e._v(e._s(e.resource.def.name)+" ")]),n("v-col",{staticClass:"pa-2 text--disabled",attrs:{cols:"4",lg:"1","align-self":"center"}},[e._v(e._s(e.resourceInstancePath)+" ")]),n("v-col",{staticClass:"pa-2 text--disabled",attrs:{cols:"1",lg:"1","align-self":"center"}},[n("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.state.observed[e.resourceInstancePath],expression:"state.observed[resourceInstancePath]"}],attrs:{"x-small":"",title:"Resource Instance"+e.resourceInstancePath+" observed"}},[e._v("mdi-eye-outline")])],1),n("v-col",{staticClass:"pa-0",attrs:{cols:"7",lg:"3","align-self":"center"}},[n("v-fade-transition",{attrs:{"leave-absolute":""}},[n("resource-instance-control",{directives:[{name:"show",rawName:"v-show",value:!s,expression:"!open"}],attrs:{resourcedef:e.resource.def,endpoint:e.endpoint,resourcePath:e.resource.path,instanceId:e.resourceInstanceId}})],1)],1),n("v-col",{staticClass:"pa-0",class:{"text--disabled":!!e.resourceInstanceValue&&e.resourceInstanceValue.supposed},attrs:{cols:"5",lg:"4","align-self":"center"}},[n("v-fade-transition",{attrs:{"leave-absolute":""}},[n("simple-resource-instance-view",{directives:[{name:"show",rawName:"v-show",value:!s,expression:"!open"}],staticClass:"pr-3 text-truncate",attrs:{resourceInstance:e.resourceInstanceValue,resourcedef:e.resource.def}})],1)],1)],1)],1)]}}])}),n("v-expansion-panel-content",[n("resource-instance-view",{attrs:{endpoint:e.endpoint,resourceInstance:e.resourceInstanceValue,resourcedef:e.resource.def,resourcePath:e.resource.path,resourceInstanceId:e.resourceInstanceId}})],1)],1)},zs=[],Qs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{color:"grey lighten-5"}},[n("v-col",{attrs:{cols:"12",lg:"6",xl:"5"}},[n("resource-definition-view",{attrs:{resourcedef:e.resourcedef}})],1),n("v-col",[n("v-card",{attrs:{elevation:"0"}},[n("resource-instance-control",{attrs:{resourcedef:e.resourcedef,endpoint:e.endpoint,resourcePath:e.resourcePath,instanceId:e.resourceInstanceId}}),n("v-card-text",{staticClass:"font-weight-bold",class:{"text--primary":e.resourceInstance&&!e.resourceInstance.supposed}},[e._v(" "+e._s(e.resourceInstanceValueAsString)+" ")])],1)],1)],1)},Xs=[],Ys={components:{ResourceInstanceControl:ws,ResourceDefinitionView:Ts},props:{endpoint:String,resourcedef:Object,resourcePath:String,resourceInstance:Object,resourceInstanceId:Number},computed:{resourceInstanceValueAsString:function(){return this.resourceInstance?ts(this.resourceInstance.val,this.resourcedef.type):""}}},Zs=Ys,ea=Object(C["a"])(Zs,Qs,Xs,!1,null,null,null),ta=ea.exports;$()(ea,{VCard:Ae["a"],VCardText:Me["c"],VCol:Le["a"],VRow:Fe["a"]});var na=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{title:e.resourceInstanceValueAsString}},[e._v(" "+e._s(e.resourceInstanceValueAsString)+" ")])},sa=[],aa={props:{resourcedef:Object,resourceInstance:Object},computed:{resourceInstanceValueAsString:function(){return this.resourceInstance?ts(this.resourceInstance.val,this.resourcedef.type):""}}},ia=aa,oa=Object(C["a"])(ia,na,sa,!1,null,null,null),ra=oa.exports,ca={components:{ResourceInstanceControl:ws,SimpleResourceInstanceView:ra,ResourceInstanceView:ta},props:{endpoint:String,resource:Object,resourceInstanceId:Number},computed:{state:function(){return this.$store.state[this.endpoint]},resourceInstancePath:function(){return"".concat(this.resource.path,"/").concat(this.resourceInstanceId)},resourceInstanceValue:function(){var e=this.state.data[this.resource.path];return e&&!e.isSingle?e.vals[this.resourceInstanceId]:null}}},la=ca,ua=Object(C["a"])(la,Gs,zs,!1,null,null,null),da=ua.exports;$()(ua,{VCol:Le["a"],VContainer:B["a"],VExpansionPanel:Bs["a"],VExpansionPanelContent:Ws["a"],VExpansionPanelHeader:Us["a"],VFadeTransition:Ks["c"],VIcon:D["a"],VRow:Fe["a"]});var pa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("request-button",{attrs:{title:"Composite Observe"},on:{"on-click":e.observe}},[e._v("Obs")]),n("request-button",{attrs:{title:"Passive Cancel Obverse"},on:{"on-click":e.stopObserve}},[n("v-icon",{attrs:{dense:"",small:""}},[e._v("mdi-eye-remove-outline")])],1),n("request-button",{attrs:{title:"Composite Read"},on:{"on-click":e.read}},[e._v("R")]),n("request-button",{ref:"W",attrs:{title:"Composite Write"},on:{"on-click":e.openWriteDialog}},[e._v("W")]),n("composite-object-write-dialog",{attrs:{compositeObject:e.compositeObject,nodes:e.nodes},on:{write:function(t){return e.write(t)}},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}),n("composite-operation-setting-menu",{scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,a=t.attrs;return[n("v-btn",e._g(e._b({staticClass:"ma-1",attrs:{small:"",tile:"","min-width":"0",elevation:"0",title:"Composite Operation Settings"}},"v-btn",a,!1),s),[n("v-icon",{attrs:{small:""}},[e._v(" mdi-tune")])],1)]}}])})],1)},va=[],fa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,s=t.attrs;return[e._t("activator",null,{attrs:s,on:n})]}}],null,!0),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[n("v-card",[n("v-list",[n("v-list-item",[n("p",{staticClass:"subtitle-2"},[e._v(" ContentFormat used to encode "),n("strong",[e._v("LWM2M Paths")]),e._v(" for "),n("strong",[e._v("Read/Observe")]),e._v("-Composite Operation : ")])]),n("v-list-item",[n("v-list-item-action",[n("v-select",{attrs:{dense:"",items:e.compositePathFormatList},model:{value:e.compositePathFormat,callback:function(t){e.compositePathFormat=t},expression:"compositePathFormat"}})],1)],1),n("v-list-item",[n("p",{staticClass:"subtitle-2"},[e._v(" ContentFormat used to encode/decode "),n("strong",[e._v("LWM2M nodes")]),e._v(" for "),n("strong",[e._v("Read/Observe/Write")]),e._v("-Composite Operation : ")])]),n("v-list-item",[n("v-list-item-action",[n("v-select",{attrs:{"single-line":"",dense:"",items:e.compositeNodeFormatList},model:{value:e.compositeNodeFormat,callback:function(t){e.compositeNodeFormat=t},expression:"compositeNodeFormat"}})],1)],1)],1)],1)],1)},ha=[],ma={data:function(){return{menu:!1,compositePathFormatList:["SENML_JSON","SENML_CBOR"],compositeNodeFormatList:["SENML_JSON","SENML_CBOR"]}},computed:{compositePathFormat:Object(g["b"])("CompositePathFormat",{defaultValue:"SENML_CBOR"}),compositeNodeFormat:Object(g["b"])("CompositeNodeFormat",{defaultValue:"SENML_CBOR"})}},ba=ma,ga=n("e449"),_a=Object(C["a"])(ba,fa,ha,!1,null,null,null),ya=_a.exports;$()(_a,{VCard:Ae["a"],VList:Se["a"],VListItem:$e["a"],VListItemAction:jt["a"],VMenu:ga["a"],VSelect:me["a"]});var ja=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"hide-overlay":"",fullscreen:"",transition:"dialog-bottom-transition"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[e._v(' Write Composite Object "'+e._s(e.compositeObject.name)+'". ')]),n("v-card-text",[n("div",[e._v(' Only Writable "Singleresource", "Resource Instance" are supported. '),n("br"),e._v(" Nodes "+e._s(e.ignoredeNodes.join(", "))+' from "'+e._s(e.compositeObject.name)+'" will be ignored because there are not supported for Composite-Write. ')]),n("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.write.apply(null,arguments)}}},[n("v-container",{attrs:{fluid:""}},e._l(e.writableNodes,(function(t){return n("div",{key:t.path.toString()},[n("h4",{staticClass:"pa-1"},[e._v(e._s(t.path))]),"resource"==t.path.type?n("labelled-resource-input",{attrs:{resourcedef:t.resource.def},model:{value:e.nodesValue[t.path.toString()],callback:function(n){e.$set(e.nodesValue,t.path.toString(),n)},expression:"nodesValue[node.path.toString()]"}}):"resourceinstance"==t.path.type?n("labelled-resource-instance-input",{attrs:{resourcedef:t.resource.def},model:{value:e.nodesValue[t.path.toString()],callback:function(n){e.$set(e.nodesValue,t.path.toString(),n)},expression:"nodesValue[node.path.toString()]"}}):e._e()],1)})),0)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:e.write}},[e._v(" Write ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.show=!1}}},[e._v(" Cancel ")])],1)],1)],1)},Va=[],xa=(n("07ac"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"12",md:"2"}},[e.resourcedef.mandatory?n("v-subheader",[n("strong",[e._v(e._s(e.resourcedef.name)+" *")])]):n("v-subheader",[e._v(e._s(e.resourcedef.name)+" ")])],1),n("v-col",{attrs:{cols:"11",md:"9"}},[n("resource-input",{attrs:{resourcedef:e.resourcedef,hint:e.hint(e.resourcedef),value:e.value},on:{input:function(t){return e.$emit("input",t)}}})],1),n("v-col",{attrs:{cols:"1",md:"1"}},[n("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[n("v-icon",e._g({},s),[e._v(" mdi-help-circle-outline ")])]}}])},[n("p",{staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(e.resourcedef.description))])])],1)],1)}),wa=[],Oa={components:{ResourceInput:Tn},props:{value:null,resourcedef:Object},methods:{hint:function(e){var t="";return e.mandatory&&(t+=" mandatory"),e.range&&(t+=" (Range: "+e.range+")"),t}}},Ia=Oa,ka=n("e0c7"),Ca=Object(C["a"])(Ia,xa,wa,!1,null,null,null),Sa=Ca.exports;$()(Ca,{VCol:Le["a"],VIcon:D["a"],VRow:Fe["a"],VSubheader:ka["a"],VTooltip:Z["a"]});var $a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"12",md:"2"}},[e.resourcedef.mandatory?n("v-subheader",[n("strong",[e._v(e._s(e.resourcedef.name)+" *")])]):n("v-subheader",[e._v(e._s(e.resourcedef.name)+" ")])],1),n("v-col",{attrs:{cols:"11",md:"9"}},[n("single-value-input",{attrs:{resourcedef:e.resourcedef,hint:e.hint(e.resourcedef),value:e.value},on:{input:function(t){return e.$emit("input",t)}}})],1),n("v-col",{attrs:{cols:"1",md:"1"}},[n("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[n("v-icon",e._g({},s),[e._v(" mdi-help-circle-outline ")])]}}])},[n("p",{staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(e.resourcedef.description))])])],1)],1)},Ra=[],Da={components:{SingleValueInput:On},props:{value:null,resourcedef:Object},methods:{hint:function(e){var t="";return e.mandatory&&(t+=" mandatory"),e.range&&(t+=" (Range: "+e.range+")"),t}}},Pa=Da,Na=Object(C["a"])(Pa,$a,Ra,!1,null,null,null),Ta=Na.exports;$()(Na,{VCol:Le["a"],VIcon:D["a"],VRow:Fe["a"],VSubheader:ka["a"],VTooltip:Z["a"]});var Ea={components:{LabelledResourceInput:Sa,LabelledResourceInstanceInput:Ta},props:{value:Boolean,compositeObject:Object,nodes:Object},data:function(){return{nodesValue:{},supportedTypes:[]}},watch:{value:function(e){e&&(this.nodesValue={})}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},ignoredeNodes:function(){var e=this;return Object.values(this.nodes).filter((function(t){return!e.isSupported(t)})).map((function(e){return e.path.toString()}))},writableNodes:function(){var e=this;return Object.values(this.nodes).filter((function(t){return e.isSupported(t)}))}},methods:{isSupported:function(e){return("resourceinstance"==e.path.type||"resource"==e.path.type&&"single"==e.resource.def.instancetype)&&e.resource.def.operations.includes("W")},write:function(){this.show=!1,console.log(this.nodesValue),this.$emit("write",this.nodesValue)}}},qa=Ea,Aa=Object(C["a"])(qa,ja,Va,!1,null,null,null),Ma=Aa.exports;$()(Aa,{VBtn:lt["a"],VCard:Ae["a"],VCardActions:Me["a"],VCardText:Me["c"],VCardTitle:Me["d"],VContainer:B["a"],VDialog:ft["a"],VForm:ht["a"],VSpacer:mt["a"]});var La=Object(g["b"])("timeout",{defaultValue:5}),Fa=Object(g["b"])("CompositePathFormat",{defaultValue:"SENML_CBOR"}),Ba=Object(g["b"])("CompositeNodeFormat",{defaultValue:"SENML_CBOR"}),Wa={components:{RequestButton:Lt,CompositeOperationSettingMenu:ya,CompositeObjectWriteDialog:Ma},props:{endpoint:String,compositeObject:Object,nodes:Object},data:function(){return{dialog:!1}},computed:{showDialog:{get:function(){return this.dialog},set:function(e){this.dialog=e,this.$refs.W.resetState()}}},methods:{requestPath:function(){return"api/clients/".concat(encodeURIComponent(this.endpoint),"/composite")},requestOption:function(){return"?timeout=".concat(La.get(),"&pathformat=").concat(Fa.get(),"&nodeformat=").concat(Ba.get())},updateState:function(e,t){var n=e.valid?e.success?"success":"error":"warning";t.changeState(n,e.status)},read:function(e){var t=this;this.axios.get("".concat(this.requestPath()).concat(this.requestOption()),{params:{paths:this.compositeObject.paths.join(",")}}).then((function(n){t.updateState(n.data,e),n.data.success&&t.$store.newNodes(t.endpoint,n.data.content)})).catch((function(){e.resetState()}))},observe:function(e){var t=this;this.axios.post("".concat(this.requestPath(),"/observe").concat(this.requestOption(),"&paths=").concat(this.compositeObject.paths.join(","))).then((function(n){t.updateState(n.data,e),n.data.success&&(t.$store.newNodes(t.endpoint,n.data.content),t.$store.setCompositeObjectObserved(t.endpoint,t.compositeObject,!0))})).catch((function(){e.resetState()}))},stopObserve:function(e){var t=this;this.axios.delete("".concat(this.requestPath(),"/observe?paths=").concat(this.compositeObject.paths.join(","))).then((function(){e.changeState("success"),t.$store.setObserved(t.endpoint,t.path,!1),t.$store.setCompositeObjectObserved(t.endpoint,t.compositeObject,!1)})).catch((function(){e.resetState()}))},openWriteDialog:function(){this.dialog=!0},write:function(e){var t=this,n=this.$refs.W,s=Object.entries(e).reduce((function(e,n){var s=Object(c["a"])(n,2),a=s[0],i=s[1],o=t.nodes[a];return e[a]=Kn(o.resource.def,o.path,i),e}),{});console.log(s),this.axios.put("".concat(this.requestPath()).concat(this.requestOption()),s).then((function(e){t.updateState(e.data,n),e.data.success&&t.$store.newNodes(t.endpoint,s,!0)})).catch((function(){n.resetState()}))}}},Ua=Wa,Ka=Object(C["a"])(Ua,pa,va,!1,null,null,null),Ha=Ka.exports;$()(Ka,{VBtn:lt["a"],VIcon:D["a"]});var Ja={components:{ResourceExpansionPanel:Js,ResourceInstanceExpansionPanel:da,CompositeObjectIcons:nt,CompositeObjectControl:Ha},props:{objectdefs:Array,allInstances:Object},data:function(){return{compositeObject:null}},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var e=this,t=Object(g["b"])("compositeObjects",{defaultValue:[]});this.compositeObject=t.get().find((function(t){return t.name==e.$route.params.compositeObjectName}))},createResources:function(e,t){return e?e.resourcedefs.map((function(n){return{path:"/".concat(e.id,"/").concat(t,"/").concat(n.id),def:n}})).filter((function(e){return e.def.operations.includes("R")||e.def.operations.includes("W")})):null}},computed:{endpoint:function(){return this.$route.params.endpoint},state:function(){return this.$store.state[this.endpoint]},compositeObservationKey:function(){return this.$store.compositeObjectToKey(this.compositeObject)},lwm2mNodes:function(){var e=this;if(!this.objectdefs||0==this.objectdefs.length)return{};var t=this.compositeObject.paths.map((function(t){var n=new Ye(t);if("invalid"==n.type)return{path:n};var s=null;if(null!=n.objectid&&(s=e.objectdefs.find((function(e){return e.id==n.objectid})),null==s))return{path:n,unknowObject:!0};var a=!0;if(null!=n.objectinstanceid){var i=e.allInstances[n.objectid];i&&(a=!i.includes(n.objectinstanceid))}switch(n.type){case"object":var o=e.allInstances[n.objectid],r=[];return o&&(r=o.map((function(t){var n={};return n.id=t,n.path="/".concat(s.id,"/").concat(n.id),n.resources=e.createResources(s,n.id),n}))),{path:n,objectdef:s,instances:r};case"objectinstance":return{path:n,objectdef:s,instanceNotAvailable:a,instanceid:n.objectinstanceid,resources:e.createResources(s,n.objectinstanceid)};case"resource":var c=s.resourcedefs.find((function(e){return e.id==n.resourceid}));return{path:n,instanceNotAvailable:a,resource:{path:n.toString(),def:c}};case"resourceinstance":var l=s.resourcedefs.find((function(e){return e.id==n.resourceid}));return{path:n,instanceNotAvailable:a,resourceInstanceId:n.resourceinstanceid,resource:{path:n.toResourcePath(),def:l}};default:return{path:n}}}));return t.reduce((function(e,t){return e[t.path.toString()]=t,e}),{})}}},Ga=Ja,za=n("0393"),Qa=Object(C["a"])(Ga,Ct,St,!1,null,null,null),Xa=Qa.exports;$()(Qa,{VDivider:ie["a"],VExpansionPanels:za["a"],VIcon:D["a"],VSheet:Be["a"]});var Ya=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.objectdef?n("v-sheet",{staticClass:"pa-4",attrs:{color:"grey lighten-5",width:"100%"}},[n("div",[n("h3",[n("object-icon",{attrs:{objectId:e.objectdef.id}}),e._v(" "+e._s(e.objectdef.name)+"-v"+e._s(e.objectdef.version)+" "),n("object-control",{key:e.objectdef.id,attrs:{id:"object.id",objectdef:e.objectdef,endpoint:e.$route.params.endpoint}})],1),n("p",{staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(e.objectdef.description))])]),n("v-divider"),e._l(e.instances,(function(t){return n("div",{key:e.objectdef.id+"/"+t},[n("instance-view",{attrs:{objectdef:e.objectdef,instanceId:t,endpoint:e.$route.params.endpoint}})],1)}))],2):e._e()},Za=[],ei=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h4",{staticClass:"pa-1"},[n("span",{staticClass:"d-flex"},[n("span",{staticClass:"align-self-center"},[e._v(" Instance "+e._s(e.instanceId)+" : ")]),n("instance-control",{staticClass:"mr-auto",attrs:{objectdef:e.objectdef,endpoint:e.endpoint,id:e.instanceId,path:e.instancePath}}),n("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.state.observed[e.instancePath],expression:"state.observed[instancePath]"}],staticClass:"pr-3",attrs:{small:"",title:"Instance "+e.instancePath+" observed"}},[e._v("mdi-eye-outline")])],1)]),e.objectdef&&"number"==typeof e.instanceId&&e.endpoint?n("v-expansion-panels",{attrs:{accordion:"",multiple:"",dense:"",tile:""}},e._l(e.resources,(function(t){return n("resource-expansion-panel",{key:t.path,attrs:{resource:t,endpoint:e.endpoint}})})),1):e._e()],1)},ti=[],ni=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("request-button",{attrs:{title:"Observe "+e.path},on:{"on-click":e.observe}},[e._v("Obs")]),n("request-button",{attrs:{title:"Passive Cancel Obverse "+e.path},on:{"on-click":e.stopObserve}},[n("v-icon",{attrs:{dense:"",small:""}},[e._v("mdi-eye-remove-outline")])],1),n("request-button",{attrs:{title:"Read "+e.path},on:{"on-click":e.read}},[e._v("R")]),n("request-button",{ref:"W",attrs:{title:"Write "+e.path},on:{"on-click":e.openWriteDialog}},[e._v("W")]),n("request-button",{attrs:{title:"Delete "+e.path},on:{"on-click":e.del}},[e._v("Delete")]),n("instance-write-dialog",{attrs:{objectdef:e.objectdef,id:e.id},on:{update:function(t){return e.write(t,!1)},replace:function(t){return e.write(t,!0)}},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}})],1)},si=[],ai=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"hide-overlay":"",fullscreen:"",transition:"dialog-bottom-transition"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[e._v(' Write Instance "'+e._s(e.id)+'" for Object '+e._s(e.objectdef.name)+" ("+e._s(e.objectdef.id)+") ")]),n("v-card-text",[n("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.write.apply(null,arguments)}}},[n("v-container",{attrs:{fluid:""}},e._l(e.writableResourceDef,(function(t){return n("resource-input",{key:t.id,attrs:{resourcedef:t},model:{value:e.instanceValue[t.id],callback:function(n){e.$set(e.instanceValue,t.id,n)},expression:"instanceValue[resourcedef.id]"}})})),1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:e.update}},[e._v(" Update ")]),n("v-btn",{attrs:{text:""},on:{click:e.replace}},[e._v(" Replace ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.show=!1}}},[e._v(" Cancel ")])],1)],1)],1)},ii=[],oi={components:{ResourceInput:Sa},props:{value:Boolean,objectdef:Object,id:Number},data:function(){return{instanceValue:{}}},watch:{value:function(e){e&&(this.instanceValue={})}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},writableResourceDef:function(){return this.objectdef.resourcedefs.filter((function(e){return e.operations.includes("W")}))}},methods:{replace:function(){this.show=!1,this.$emit("replace",this.instanceValue)},update:function(){this.show=!1,this.$emit("update",this.instanceValue)}}},ri=oi,ci=Object(C["a"])(ri,ai,ii,!1,null,null,null),li=ci.exports;$()(ci,{VBtn:lt["a"],VCard:Ae["a"],VCardActions:Me["a"],VCardText:Me["c"],VCardTitle:Me["d"],VContainer:B["a"],VDialog:ft["a"],VForm:ht["a"],VSpacer:mt["a"]});var ui=Object(g["b"])("timeout",{defaultValue:5}),di=Object(g["b"])("multiformat",{defaultValue:"TLV"}),pi={components:{RequestButton:Lt,InstanceWriteDialog:li},props:{endpoint:String,path:String,objectdef:Object,id:Number},data:function(){return{dialog:!1}},computed:{showDialog:{get:function(){return this.dialog},set:function(e){this.dialog=e,this.$refs.W.resetState()}}},methods:{requestPath:function(){return"api/clients/".concat(encodeURIComponent(this.endpoint)).concat(this.path)},requestOption:function(){return"?timeout=".concat(ui.get(),"&format=").concat(di.get())},updateState:function(e,t){var n=e.valid?e.success?"success":"error":"warning";t.changeState(n,e.status)},read:function(e){var t=this;this.axios.get("".concat(this.requestPath()).concat(this.requestOption())).then((function(n){t.updateState(n.data,e),n.data.success&&t.$store.newInstanceValue(t.endpoint,t.path,n.data.content.resources)})).catch((function(){e.resetState()}))},observe:function(e){var t=this;this.axios.post("".concat(this.requestPath(),"/observe").concat(this.requestOption())).then((function(n){t.updateState(n.data,e),n.data.success&&(t.$store.newInstanceValue(t.endpoint,t.path,n.data.content.resources),t.$store.setObserved(t.endpoint,t.path,!0))})).catch((function(){e.resetState()}))},stopObserve:function(e){var t=this;this.axios.delete("".concat(this.requestPath(),"/observe")).then((function(){e.changeState("success"),t.$store.setObserved(t.endpoint,t.path,!1)})).catch((function(){e.resetState()}))},openWriteDialog:function(){this.dialog=!0},write:function(e,t){var n=this,s=this.$refs.W,a=Ln(this.objectdef,this.id,e);this.axios.put("".concat(this.requestPath()).concat(this.requestOption(),"&replace=").concat(t),a).then((function(e){n.updateState(e.data,s),e.data.success&&n.$store.newInstanceValue(n.endpoint,n.path,a.resources,!0,!t)})).catch((function(){s.resetState()}))},del:function(e){var t=this;this.axios.delete("".concat(this.requestPath(),"?timeout=").concat(ui.get())).then((function(n){t.updateState(n.data,e),n.data.success&&t.$store.removeInstanceValue(t.endpoint,t.path)})).catch((function(){e.resetState()}))}}},vi=pi,fi=Object(C["a"])(vi,ni,si,!1,null,null,null),hi=fi.exports;$()(fi,{VIcon:D["a"]});var mi={components:{InstanceControl:hi,ResourceExpansionPanel:Js},props:{objectdef:Object,instanceId:Number,endpoint:String},computed:{state:function(){return this.$store.state[this.endpoint]},resources:function(){var e=this;return this.objectdef.resourcedefs.map((function(t){return{path:"/".concat(e.objectdef.id,"/").concat(e.instanceId,"/").concat(t.id),def:t}}))},instancePath:function(){return"/".concat(this.objectdef.id,"/").concat(this.instanceId)}}},bi=mi,gi=Object(C["a"])(bi,ei,ti,!1,null,null,null),_i=gi.exports;$()(gi,{VExpansionPanels:za["a"],VIcon:D["a"]});var yi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("request-button",{ref:"C",attrs:{title:"Create Instance /"+e.objectdef.id},on:{"on-click":e.openCreateDialog}},[e._v("Create")]),n("instance-create-dialog",{attrs:{objectdef:e.objectdef},on:{create:function(t){return e.create(t)}},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}})],1)},ji=[],Vi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"hide-overlay":"",fullscreen:"",transition:"dialog-bottom-transition"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[e._v(" Create new Instance for Object "+e._s(e.objectdef.name)+" ("+e._s(e.objectdef.id)+") ")]),n("v-card-text",[n("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.write.apply(null,arguments)}}},[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"12",md:"2"}},[n("v-subheader",[e._v("Instance Id ")])],1),n("v-col",{attrs:{cols:"12",md:"9"}},[n("v-text-field",{attrs:{label:"Integer",hint:"Let this field empty to let the client choose the instance ID"},model:{value:e.instance.id,callback:function(t){e.$set(e.instance,"id",t)},expression:"instance.id"}})],1)],1),e._l(e.writableResourceDef,(function(t){return n("resource-input",{key:t.id,attrs:{resourcedef:t},model:{value:e.instance.resources[t.id],callback:function(n){e.$set(e.instance.resources,t.id,n)},expression:"instance.resources[resourcedef.id]"}})}))],2)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:e.create}},[e._v(" Create ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.show=!1}}},[e._v(" Cancel ")])],1)],1)],1)},xi=[],wi={components:{ResourceInput:Sa},props:{value:Boolean,objectdef:Object},data:function(){return{instance:{id:null,resources:{}}}},watch:{value:function(e){e&&(this.instance={id:null,resources:{}},this.id=null)}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},writableResourceDef:function(){return this.objectdef.resourcedefs.filter((function(e){return e.operations.includes("W")}))}},methods:{create:function(){this.show=!1,this.$emit("create",this.instance)}}},Oi=wi,Ii=Object(C["a"])(Oi,Vi,xi,!1,null,null,null),ki=Ii.exports;$()(Ii,{VBtn:lt["a"],VCard:Ae["a"],VCardActions:Me["a"],VCardText:Me["c"],VCardTitle:Me["d"],VCol:Le["a"],VDialog:ft["a"],VForm:ht["a"],VRow:Fe["a"],VSpacer:mt["a"],VSubheader:ka["a"],VTextField:oe["a"]});var Ci=Object(g["b"])("timeout",{defaultValue:5}),Si=Object(g["b"])("multiformat",{defaultValue:"TLV"}),$i={components:{RequestButton:Lt,InstanceCreateDialog:ki},props:{objectdef:Object,endpoint:String},data:function(){return{dialog:!1}},computed:{showDialog:{get:function(){return this.dialog},set:function(e){this.dialog=e,this.$refs.C.resetState()}}},methods:{requestPath:function(){return"api/clients/".concat(encodeURIComponent(this.endpoint),"/").concat(this.objectdef.id,"?timeout=").concat(Ci.get(),"&format=").concat(Si.get())},updateState:function(e,t){var n=e.valid?e.success?"success":"error":"warning";t.changeState(n,e.status)},openCreateDialog:function(){this.dialog=!0},create:function(e){var t=this,n=this.$refs.C,s=Ln(this.objectdef,e.id,e.resources);this.axios.post(this.requestPath(),s).then((function(e){t.updateState(e.data,n)})).catch((function(){n.resetState()}))}}},Ri=$i,Di=Object(C["a"])(Ri,yi,ji,!1,null,null,null),Pi=Di.exports,Ni={components:{InstanceView:_i,ObjectIcon:Ie,ObjectControl:Pi},props:{objectdef:Object,instances:Array}},Ti=Ni,Ei=Object(C["a"])(Ti,Ya,Za,!1,null,null,null),qi=Ei.exports;$()(Ei,{VDivider:ie["a"],VSheet:Be["a"]});var Ai=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{staticClass:"elevation-0",attrs:{headers:e.headers,items:e.securityInfos,"item-key":"endpoint","sort-by":"endpoint",dense:"",search:e.search},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:""}},[e.$vuetify.breakpoint.smAndUp?n("v-toolbar-title",[e._v("Security Information")]):e._e(),e.$vuetify.breakpoint.smAndUp?n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}):e._e(),n("v-text-field",{staticClass:"pa-2",attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),n("v-btn",{staticClass:"mb-2",attrs:{dark:""},on:{click:function(t){return t.stopPropagation(),e.openNewSec()}}},[e._v(" "+e._s(e.$vuetify.breakpoint.smAndDown?"":"Add Security Information")+" "),n("v-icon",{attrs:{right:!e.$vuetify.breakpoint.smAndDown,dark:""}},[e._v(" mdi-key-plus ")])],1),n("security-info-dialog",{attrs:{initialValue:e.editedSecurityInfo},on:{new:function(t){return e.newSec(t)},edit:function(t){return e.editSec(t)}},model:{value:e.dialogOpened,callback:function(t){e.dialogOpened=t},expression:"dialogOpened"}})],1)]},proxy:!0},{key:"item.mode",fn:function(e){var t=e.item;return[n("security-info-chip",{attrs:{securityInfo:t}})]}},{key:"item.details",fn:function(t){var s=t.item;return["psk"==s.mode?n("div",{staticClass:"pa-1",staticStyle:{"word-break":"break-all"}},[n("strong",[e._v("Identity:")]),e._v(" "),n("code",[e._v(e._s(s.details.identity))]),n("br"),n("strong",[e._v("Key:")]),n("code",{staticClass:"text-uppercase"},[e._v(e._s(s.details.key))])]):e._e(),"rpk"==s.mode?n("div",{staticClass:"pa-1",staticStyle:{"word-break":"break-all"}},[n("strong",[e._v("Public Key:")]),n("code",{staticClass:"text-uppercase"},[e._v(e._s(s.details.key))])]):e._e(),"x509"==s.mode?n("div",{staticClass:"pa-1",staticStyle:{"word-break":"break-all"}},[n("strong",[e._v("X509 certificate with CN equals :")]),n("code",[e._v(e._s(s.endpoint))])]):e._e()]}},{key:"item.actions",fn:function(t){var s=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:"",disabled:"unsupported"==s.mode},on:{click:function(t){return t.stopPropagation(),e.openEditSec(s)}}},[e._v(" mdi-pencil ")]),n("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteSec(s)}}},[e._v(" mdi-delete ")])]}}])})},Mi=[],Li=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"hide-overlay":"",fullscreen:"",transition:"dialog-bottom-transition"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[n("span",[e._v(e._s(e.editMode?"Edit Security Information":"Add Security Information"))])]),n("v-card-text",[n("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{rules:[function(e){return!!e||"Endpoint is required"}],label:"Endpoint",required:"",autofocus:!e.editMode,disabled:e.editMode},model:{value:e.securityInfo.endpoint,callback:function(t){e.$set(e.securityInfo,"endpoint",t)},expression:"securityInfo.endpoint"}}),n("security-info-input",{attrs:{mode:e.securityInfo.mode,details:e.securityInfo.details},on:{"update:mode":function(t){return e.$set(e.securityInfo,"mode",t)},"update:details":function(t){return e.$set(e.securityInfo,"details",t)}}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:"",disabled:!e.valid},on:{click:function(t){return e.$emit(e.editMode?"edit":"new",e.securityInfo)}}},[e._v(" "+e._s(e.editMode?"Save":"Add")+" ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.show=!1}}},[e._v(" Cancel ")])],1)],1)],1)},Fi=[],Bi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-select",{attrs:{items:e.modes,label:"Security Mode"},on:{input:function(t){return e.modeChanged()}},model:{value:e.internalMode,callback:function(t){e.internalMode=t},expression:"internalMode"}}),"psk"==e.internalMode?n("psk-input",{on:{input:function(t){return e.$emit("update:details",e.pskValue)}},model:{value:e.pskValue,callback:function(t){e.pskValue=t},expression:"pskValue"}}):e._e(),"rpk"==e.internalMode?n("rpk-input",{on:{input:function(t){return e.$emit("update:details",e.rpkValue)}},model:{value:e.rpkValue,callback:function(t){e.rpkValue=t},expression:"rpkValue"}}):e._e(),"x509"==e.internalMode?n("x-509-input"):e._e()],1)},Wi=[],Ui=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-textarea",{attrs:{filled:"",label:"Identity",rules:[function(e){return!!e||"Identity is required"}],spellcheck:"false"},on:{input:function(t){return e.$emit("input",e.psk)}},model:{value:e.psk.identity,callback:function(t){e.$set(e.psk,"identity",t)},expression:"psk.identity"}}),n("v-textarea",{attrs:{filled:"",label:"Key",hint:"Hexadecimal format",rules:[function(e){return!!e||"Key is required"},function(e){return/^[0-9a-fA-F]+$/.test(e)||"Hexadecimal format is expected"}],spellcheck:"false"},on:{input:function(t){return e.$emit("input",e.psk)}},model:{value:e.psk.key,callback:function(t){e.$set(e.psk,"key",t)},expression:"psk.key"}})],1)},Ki=[],Hi={props:{value:Object},data:function(){return{psk:this.value}},watch:{value:function(e){this.psk=e}}},Ji=Hi,Gi=Object(C["a"])(Ji,Ui,Ki,!1,null,null,null),zi=Gi.exports;$()(Gi,{VTextarea:vn["a"]});var Qi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-textarea",{attrs:{filled:"",label:"Client Public Key",rules:[function(e){return!!e||"Public is required"},function(e){return/^[0-9a-fA-F]+$/.test(e)||"Hexadecimal format is expected"}],hint:"SubjectPublicKeyInfo der encoded in Hexadecimal",spellcheck:"false"},on:{input:function(t){return e.$emit("input",e.rpk)}},model:{value:e.rpk.key,callback:function(t){e.$set(e.rpk,"key",t)},expression:"rpk.key"}})],1)},Xi=[],Yi={props:{value:Object},data:function(){return{rpk:this.value}},watch:{value:function(e){e&&(this.rpk=this.value)}}},Zi=Yi,eo=Object(C["a"])(Zi,Qi,Xi,!1,null,null,null),to=eo.exports;$()(eo,{VTextarea:vn["a"]});var no=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("Use X509 certificate.")])},so=[],ao={},io=Object(C["a"])(ao,no,so,!1,null,null,null),oo=io.exports,ro={components:{PskInput:zi,RpkInput:to,X509Input:oo},props:{mode:String,details:Object},data:function(){return{modes:["psk","rpk","x509"],internalMode:"psk",pskValue:{},rpkValue:{}}},beforeMount:function(){this.initMode(),this.initDetails()},watch:{mode:function(){this.initMode()},details:function(){this.initDetails()}},methods:{initMode:function(){this.internalMode=this.mode},initDetails:function(){switch(this.mode){case"psk":this.pskValue=this.details,this.rpkValue={};break;case"rpk":this.pskValue={},this.rpkValue=this.details;break;case"x509":this.rpkValue={},this.pskValue={};break}},modeChanged:function(){switch(this.$emit("update:mode",this.internalMode),this.internalMode){case"psk":this.$emit("update:details",this.pskValue);break;case"rpk":this.$emit("update:details",this.rpkValue);break;case"x509":this.$emit("update:details",{});break}}}},co=ro,lo=Object(C["a"])(co,Bi,Wi,!1,null,null,null),uo=lo.exports;$()(lo,{VSelect:me["a"]});var po={components:{SecurityInfoInput:uo},props:{value:Boolean,initialValue:Object},data:function(){return{securityInfo:{},valid:!0,editMode:!1}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},watch:{value:function(e){e&&(this.$refs.form&&this.$refs.form.resetValidation(),this.initialValue?(this.securityInfo=JSON.parse(JSON.stringify(this.initialValue)),this.editMode=!0):(this.securityInfo={mode:"psk",details:{}},this.editMode=!1))}}},vo=po,fo=Object(C["a"])(vo,Li,Fi,!1,null,null,null),ho=fo.exports;$()(fo,{VBtn:lt["a"],VCard:Ae["a"],VCardActions:Me["a"],VCardText:Me["c"],VCardTitle:Me["d"],VDialog:ft["a"],VForm:ht["a"],VSpacer:mt["a"],VTextField:oe["a"]});var mo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.securityInfo?n("div",[n("v-chip",{attrs:{small:""}},[n("v-icon",{attrs:{left:"",small:""}},[e._v(" "+e._s(e.modeIcon)+" ")]),e._v(" "+e._s(e.securityInfo.mode)+" ")],1)],1):n("div",[n("v-chip",{attrs:{small:""}},[n("v-icon",{attrs:{left:"",small:""}},[e._v(" mdi-lock-open-remove ")]),e._v(" Nothing ")],1)],1)},bo=[];function go(e){var t={};return t.endpoint=e.endpoint,t.mode=_o(e),"unsupported"!=t.mode&&"x509"!=t.mode&&(t.details=e[t.mode]),t}function _o(e){return e.x509?"x509":e.psk?"psk":e.rpk?"rpk":"unsupported"}function yo(e){switch(e){case"x509":return"mdi-certificate";case"psk":return"mdi-lock";case"rpk":return"mdi-key-change";default:return"mdi-help-rhombus-outline"}}function jo(e,t){var n={};return n.endpoint=t,"x509"==e.mode?n[e.mode]=!0:"unsupported"!=e.mode&&(n[e.mode]=e.details),n}var Vo={props:{securityInfo:Object},computed:{modeIcon:function(){return yo(this.securityInfo.mode)}}},xo=Vo,wo=n("cc20"),Oo=Object(C["a"])(xo,mo,bo,!1,null,null,null),Io=Oo.exports;$()(Oo,{VChip:wo["a"],VIcon:D["a"]});var ko={components:{SecurityInfoDialog:ho,SecurityInfoChip:Io},data:function(){return{dialogOpened:!1,headers:[{text:"Endpoint",value:"endpoint"},{text:"Security mode",value:"mode"},{text:"Details",value:"details",sortable:!1,width:"60%"},{text:"Actions",value:"actions",sortable:!1}],search:"",securityInfos:[],editedSecurityInfo:{}}},beforeMount:function(){var e=this;this.axios.get("api/security/clients").then((function(t){return e.securityInfos=t.data.map((function(e){return go(e)}))}))},methods:{openNewSec:function(){this.editedSecurityInfo=null,this.dialogOpened=!0},newSec:function(e){var t=this;this.axios.put("api/security/clients/",jo(e,e.endpoint)).then((function(){t.securityInfos.push(e),t.dialogOpened=!1}))},openEditSec:function(e){this.editedSecurityInfo=e,this.dialogOpened=!0},editSec:function(e){var t=this;this.axios.put("api/security/clients/",jo(e,e.endpoint)).then((function(){t.securityInfos=t.securityInfos.map((function(t){return t.endpoint==e.endpoint?e:t})),t.dialogOpened=!1}))},deleteSec:function(e){var t=this;this.indexToRemove=this.securityInfos.indexOf(e),this.axios.delete("api/security/clients/"+encodeURIComponent(e.endpoint)).then((function(){t.securityInfos.splice(t.indexToRemove,1)}))}}},Co=ko,So=Object(C["a"])(Co,Ai,Mi,!1,null,null,null),$o=So.exports;$()(So,{VBtn:lt["a"],VDataTable:ae["a"],VDivider:ie["a"],VIcon:D["a"],VTextField:oe["a"],VToolbar:re["a"],VToolbarTitle:E["a"]});var Ro=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pa-5"},[n("v-card",{attrs:{elevation:"0"}},[n("v-card-text",[n("v-card-title",{staticClass:"justify-center"},[e._v(" Server Information ")]),n("v-card-subtitle",{staticClass:"text-center"},[e._v(" Here some information about this server. ")])],1)],1),n("v-row",[n("v-col",{attrs:{md:"3",cols:"12"}},[n("v-card",{attrs:{outlined:""}},[n("v-list-item",{attrs:{"three-line":""}},[n("v-list-item-content",[n("div",{staticClass:"text-overline mb-4"},[e._v(" CoAP Endpoint ")]),n("v-list-item-title",{staticClass:"text-h5 mb-1"},[e._v(" Server URL ")]),n("v-list-item-subtitle",[e._v("Available endpoints for this server: ")])],1),n("v-icon",[e._v("mdi-access-point-network")])],1),n("v-card-text",[n("ul",[n("li",[n("code",[n("strong",[e._v(e._s(e.coapurl))])]),e._v(": CoAP over UDP. ")]),n("li",[n("code",[n("strong",[e._v(e._s(e.coapsurl))])]),e._v(": CoAP over DTLS. ")])])])],1)],1),e.pubkey?n("v-col",{attrs:{md:"4",cols:"12"}},[n("v-card",{attrs:{outlined:""}},[n("v-list-item",{attrs:{"three-line":""}},[n("v-list-item-content",[n("div",{staticClass:"text-overline mb-4"},[e._v(" RPK ")]),n("v-list-item-title",{staticClass:"text-h5 mb-1"},[e._v(" Server Public Key ")]),n("v-list-item-subtitle",{staticClass:"font-italic"},[e._v(" SubjectPublicKeyInfo der encoded ")])],1),n("v-icon",[e._v("mdi-key")]),n("v-card-actions",[n("v-btn",{attrs:{icon:"",title:"Download Public Key"},on:{click:function(t){return e.saveFile(e.pubkeyFileName,e.pubkey.bytesDer)}}},[n("v-icon",[e._v("mdi-download")])],1)],1)],1),n("v-card-text",[n("p",[e._v(" If you want to connect a client using DTLS with Raw Public Key(RPK) mode, your client need to trust this key to accept DTLS connection with this server. ")]),n("u",[e._v("Elliptic Curve parameters :")]),n("div",[n("code",[e._v(e._s(e.pubkey.params))])]),n("u",[e._v("Public x coord :")]),n("div",[n("code",[e._v(e._s(e.pubkey.x))])]),n("u",[e._v("Public y coord :")]),n("div",[n("code",[e._v(e._s(e.pubkey.y))])]),n("p",[n("u",[e._v("Hex : ")])]),n("div",{staticClass:"key"},[e._v(" "+e._s(e.pubkey.hexDer)+" ")]),n("br"),n("u",[e._v("Base64 : ")]),n("div",{staticClass:"key"},[e._v(" "+e._s(e.pubkey.b64Der)+" ")])])],1)],1):e._e(),e.certificate?n("v-col",{attrs:{md:"5",cols:"12"}},[n("v-card",{attrs:{outlined:""}},[n("v-list-item",{attrs:{"three-line":""}},[n("v-list-item-content",[n("div",{staticClass:"text-overline mb-4"},[e._v(" x509 ")]),n("v-list-item-title",{staticClass:"text-h5 mb-1"},[e._v(" Server Certificate ")]),n("v-list-item-subtitle",{staticClass:"font-italic"},[e._v(" x509v3 der encoded ")])],1),n("v-icon",[e._v("mdi-certificate")]),n("v-card-actions",[n("v-btn",{attrs:{icon:"",title:"Download Certificate"},on:{click:function(t){return e.saveFile(e.certFileName,e.certificate.bytesDer)}}},[n("v-icon",[e._v("mdi-download")])],1)],1)],1),n("v-card-text",[n("p",[e._v(" If you want to connect a client using DTLS with certificate(x509) mode, your client need to trust this certificate to accept DTLS connection with this server. ")]),n("u",[e._v("Hex : ")]),n("div",{staticClass:"key"},[e._v(" "+e._s(e.certificate.hexDer)+" ")]),n("br"),n("u",[e._v("Base64 : ")]),n("div",{staticClass:"key"},[e._v(" "+e._s(e.certificate.b64Der)+" ")])])],1)],1):e._e()],1)],1)},Do=[];n("c19f");function Po(e){var t=[];for(var n in e)t[n]=e[n].toString(16).toUpperCase(),1===t[n].length&&(t[n]="0"+t[n]);return t.join("")}function No(e){for(var t=atob(e),n=t.length,s=new Uint8Array(new ArrayBuffer(n)),a=0;a<n;a++)s[a]=t.charCodeAt(a);return s}var To=n("21a6"),Eo={props:{pubkeyFileName:String,certFileName:String},data:function(){return{coapurl:"",coapsurl:"",certificate:{},pubkey:{}}},methods:{saveFile:function(e,t){var n=new Blob([t],{type:"application/octet-stream"});Object(To["saveAs"])(n,e)}},beforeMount:function(){var e=this;this.axios.get("api/server/endpoint").then((function(t){e.coapurl="coap://".concat(location.hostname,":").concat(t.data.unsecuredEndpointPort),e.coapsurl="coaps://".concat(location.hostname,":").concat(t.data.securedEndpointPort)})),this.axios.get("api/server/security").then((function(t){t.data.certificate?(e.certificate=t.data.certificate,e.certificate.bytesDer=No(e.certificate.b64Der),e.certificate.hexDer=Po(e.certificate.bytesDer),e.pubkey=t.data.certificate.pubkey,e.pubkey.bytesDer=No(e.pubkey.b64Der),e.pubkey.hexDer=Po(e.pubkey.bytesDer)):t.data.pubkey&&(e.certificate=null,e.pubkey=t.data.pubkey,e.pubkey.bytesDer=No(e.pubkey.b64Der),e.pubkey.hexDer=Po(e.pubkey.bytesDer))}))}},qo=Eo,Ao=(n("8695"),Object(C["a"])(qo,Ro,Do,!1,null,null,null)),Mo=Ao.exports;$()(Ao,{VBtn:lt["a"],VCard:Ae["a"],VCardActions:Me["a"],VCardSubtitle:Me["b"],VCardText:Me["c"],VCardTitle:Me["d"],VCol:Le["a"],VIcon:D["a"],VListItem:$e["a"],VListItemContent:Re["a"],VListItemSubtitle:Re["b"],VListItemTitle:Re["c"],VRow:Fe["a"]});var Lo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"about"},[s("v-row",{staticClass:"text-center pa-5"},[s("v-col",{attrs:{cols:"12"}},[s("v-img",{staticClass:"my-3",attrs:{src:n("f907"),contain:"",height:"200"}})],1),s("v-col",{staticClass:"mb-4",attrs:{cols:"12"}},[s("h1",{staticClass:"display-1 font-weight-bold mb-3"},[e._v(" Leshan Server Demo ")]),s("p",{staticClass:"subheading font-weight-regular"},[e._v(" This is a "),s("a",{attrs:{href:"https://github.com/eclipse/leshan/wiki/F.A.Q.#could-i-reuse-leshan--demo-",target:"_blank"}},[s("strong",[e._v("LWM2M Server Demo")])]),e._v(" based on java "),s("a",{attrs:{href:"https://www.eclipse.org/leshan/",target:"_blank"}},[s("strong",[e._v("Leshan")])]),e._v(" library. "),s("br"),e._v("If you find any issue, please "),s("a",{attrs:{href:"https://www.eclipse.org/leshan/",target:"_blank"}},[e._v("report it")]),e._v(". ")]),e.version&&e.commitid?s("p",{staticClass:"subheading font-weight-regular"},[e._v(" Version "),s("a",{attrs:{href:"https://github.com/eclipse/leshan/tree/"+e.commitid,target:"_blank"}},[s("strong",[e._v(e._s(e.version))])])]):e._e()])],1)],1)},Fo=[],Bo={data:function(){return{version:"2.0.0-SNAPSHOT",commitid:"16826832b6693682eb214a406fc47bafa3bd2fcb"}}},Wo=Bo,Uo=Object(C["a"])(Wo,Lo,Fo,!1,null,null,null),Ko=Uo.exports;$()(Uo,{VCol:Le["a"],VImg:P["a"],VRow:Fe["a"]}),s["a"].use(H["a"]);var Ho=[{path:"/",redirect:"/clients"},{path:"/clients/:endpoint",component:Ue,children:[{path:"composite",component:kt,children:[{path:":compositeObjectName",component:Xa}]},{path:":objectid",component:qi}]},{path:"/clients",name:"Clients",component:le},{path:"/security",name:"Security",component:$o},{path:"/server",name:"Server",component:Mo,props:{pubkeyFileName:"serverPubKey.der",certFileName:"serverCertificate.der"}},{path:"/about",name:"About",component:Ko}],Jo=new H["a"]({routes:Ho}),Go=Jo;s["a"].config.productionTip=!1,s["a"].directive("visible",(function(e,t){e.style.visibility=t.value?"visible":"hidden"})),new s["a"]({vuetify:y,router:Go,render:function(e){return e(K)}}).$mount("#app")},8695:function(e,t,n){"use strict";n("998d")},"998d":function(e,t,n){},a1d8:function(e,t,n){e.exports=n.p+"img/logo.bc5e753e.png"},b5df:function(e,t,n){},c092:function(e,t,n){"use strict";n("b5df")},f907:function(e,t,n){e.exports=n.p+"img/multicolor-leshan.354a489c.png"}});
//# sourceMappingURL=app.b0982e4a.js.map