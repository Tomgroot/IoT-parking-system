(function(e){function t(t){for(var a,o,r=t[0],c=t[1],l=t[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},s={app:0},i=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=(n("d3b7"),n("99af"),n("bc3a")),i=n.n(s),o={responseType:"text"},r=i.a.create(o);r.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),r.interceptors.response.use((function(e){if(e.data&&e.data.failure){var t="Device response : ".concat(e.data.status);e.data.errormessage&&(t+=" - ".concat(e.data.errormessage)),a["a"].prototype.$dialog.notify.warning(t,{position:"bottom-right",timeout:5e3})}return e}),(function(e){var t;return e.response?(console.log("".concat(e.message,"[").concat(e.response.status,"]:").concat(e.response.data)),t=e.response.data?e.response.data:e.message):e.request?(console.log("".concat(e.message,":").concat(e.request.data)),t=e.request.data?e.request.data:e.message):(console.log(e.message),t=e.message),a["a"].prototype.$dialog.notify.error(t,{position:"bottom-right",timeout:5e3}),Promise.reject(e)})),Plugin.install=function(e){e.axios=r,window.axios=r,Object.defineProperties(e.prototype,{axios:{get:function(){return r}},$axios:{get:function(){return r}}})},a["a"].use(Plugin);Plugin;var c=n("3835"),l=n("d4ec"),u=n("bee2"),d=n("ade3"),p=(n("ddb0"),n("a9e3"),n("159b"),n("4fad"),n("b64b"),n("2ca0"),n("a15b"),function(){function e(){Object(l["a"])(this,e),Object(d["a"])(this,"state",{});var t=new a["a"]({data:{state:{}}});this.state=t.state}return Object(u["a"])(e,[{key:"initState",value:function(e){a["a"].set(this.state,e,{data:{},observed:{},compositeObserved:{}})}},{key:"data",value:function(e,t){return this.state[e].data[t]}},{key:"newResourceValue",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];void 0!==n.value?this.newSingleResourceValue(e,t,n.value,a):void 0!==n.values?this.newMultiResourceValue(e,t,n.values,a):console.log("unsupported resource : ",n)}},{key:"newSingleResourceValue",value:function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.data(e,t);i&&i.single?(i.val=n,i.supposed=s):(i={val:n,supposed:s,isSingle:!0},a["a"].set(this.state[e].data,t,i))}},{key:"newMultiResourceValue",value:function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={vals:{}};for(var o in n)i.vals[o]={},i.vals[o].val=n[o],i.vals[o].supposed=s;i.supposed=s,i.isSingle=!1,a["a"].set(this.state[e].data,t,i)}},{key:"newResourceInstanceValueFromPath",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=t.lastIndexOf("/"),i=t.substring(0,s),o=t.substring(s+1);this.newResourceInstanceValue(e,i,Number(o),n,a)}},{key:"newResourceInstanceValue",value:function(e,t,n,s){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.data(e,t);if(!o||o.single)o={},o.vals={},o.vals[n]={},o.vals[n].val=s,o.vals[n].supposed=i,o.supposed=i,o.isSingle=!1,a["a"].set(this.state[e].data,t,o);else if(o.vals[n])o.vals[n].val=s,o.vals[n].supposed=i;else{var r={val:s,supposed:i};a["a"].set(o.vals,n,r)}}},{key:"newInstanceValue",value:function(e,t,n){var a=this,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];i||this.removeInstanceValue(e,t),n.forEach((function(n){a.newResourceValue(e,t+"/"+n.id,n,s)}))}},{key:"newObjectValue",value:function(e,t,n){var a=this,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.removeObjectValue(e,t),n.forEach((function(n){a.newInstanceValue(e,t+"/"+n.id,n.resources,s)}))}},{key:"newNode",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"singleResource"===n.kind?this.newResourceValue(e,t,n,a):"multiResource"===n.kind?this.newMultiResourceValue(e,t,n["values"],a):"resourceInstance"===n.kind?this.newResourceInstanceValueFromPath(e,t,n.value,a):"instance"===n.kind?this.newInstanceValue(e,t,n.resources,a):"obj"===n.kind?this.newObjectValue(e,t,n.instances,a):console.log(n.kind," not yet supported")}},{key:"newNodes",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object.entries(t).forEach((function(t){var s=Object(c["a"])(t,2),i=s[0],o=s[1];n.newNode(e,i,o,a)}))}},{key:"removeInstanceValue",value:function(e,t){var n=t+"/",a=this.state[e];Object.keys(a.data).forEach((function(e){e.startsWith(n)&&delete a.data[e]}))}},{key:"removeObjectValue",value:function(e,t){var n=t+"/",a=this.state[e];Object.keys(a.data).forEach((function(e){e.startsWith(n)&&delete a.data[e]}))}},{key:"setObserved",value:function(e,t,n){var s=this.state[e].observed[t];s?this.state[e].observed[t]=n:a["a"].set(this.state[e].observed,t,n)}},{key:"setCompositePathsObserved",value:function(e,t,n){var s=t.join(","),i=this.state[e].compositeObserved[s];i?this.state[e].compositeObserved[s]=n:a["a"].set(this.state[e].compositeObserved,s,n)}},{key:"compositeObjectToKey",value:function(e){return e.paths.join(",")}},{key:"setCompositeObjectObserved",value:function(e,t,n){this.setCompositePathsObserved(e,t.paths,n)}}]),e}()),v=new p,f={install:function(e){Object.defineProperties(e.prototype,{$store:{get:function(){return v}}})}};a["a"].use(f);var h=n("6eec");a["a"].use(h["a"],{format:"json"});var m=n("2ead"),b=n.n(m);a["a"].use(b.a);var g=n("1c5d");a["a"].use(g["a"]);n("5363"),n("fe2e");var _=n("f309");a["a"].use(_["a"]);var y=new _["a"]({icons:{iconfont:"mdi"}}),V=n("83df");n("8128");a["a"].use(V["a"],{context:{vuetify:y}});var x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("v-app",[n("v-main",[n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("router-view")],1)],1)],1)],1)},j=[],w={components:{}},O=w,k=n("2877"),I=n("6544"),C=n.n(I),S=n("7496"),$=n("a523"),R=n("f6c4"),D=Object(k["a"])(O,x,j,!1,null,null,null),P=D.exports;C()(D,{VApp:S["a"],VContainer:$["a"],VMain:R["a"]});var T=n("8c4f"),N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.loading?e._e():n("v-data-table",{staticClass:"elevation-0 fill-height ma-3",attrs:{dense:"",headers:e.headers,items:e.registrations,"item-key":"endpoint","items-per-page":10,search:e.search,"sort-by":"registrationDate","sort-desc":""},on:{"click:row":e.openLink},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:""}},[e.$vuetify.breakpoint.smAndUp?n("v-toolbar-title",[e._v("Registered Clients")]):e._e(),e.$vuetify.breakpoint.smAndUp?n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}):e._e(),n("v-text-field",{staticClass:"pa-2",attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]},proxy:!0},{key:"item.registrationDate",fn:function(t){var n=t.item;return[e._v(" "+e._s(e._f("moment")(new Date(n.registrationDate),"MMM D, h:mm:ss A"))+" ")]}},{key:"item.lastUpdate",fn:function(t){var n=t.item;return[e._v(" "+e._s(e._f("moment")(new Date(n.lastUpdate),"MMM D, h:mm:ss A"))+" ")]}},{key:"item.infos",fn:function(e){var t=e.item;return[n("client-info",{attrs:{registration:t,tooltipleft:""}})]}}],null,!1,2806047308)})],1)},E=[],q=(n("4de4"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("v-tooltip",{attrs:{left:e.tooltipleft,bottom:e.tooltipbottom},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-icon",e._g({staticClass:"pr-2",attrs:{small:e.small}},a),[e._v(" mdi-information ")])]}}])},[e._v(" Lifetime : "+e._s(e.registration.lifetime)+"s "),n("br"),e._v(" Binding mode : "+e._s(e.registration.bindingMode)+" "),e.registration.queuemode?n("span",[n("br"),e._v(" Using QueueMode ")]):e._e(),n("br"),e._v(" Protocole version : "+e._s(e.registration.lwM2mVersion)+" "),n("br"),e._v(" Address : "+e._s(e.registration.address)+" "),e._l(e.registration.additionalRegistrationAttributes,(function(t,a){return n("span",{key:a},[n("br"),e._v(" "+e._s(a)+" "+e._s(t)+" ")])}))],2),n("v-tooltip",{attrs:{left:e.tooltipleft,bottom:e.tooltipbottom},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-icon",e._g({directives:[{name:"visible",rawName:"v-visible",value:e.registration.secure,expression:"registration.secure"}],staticClass:"pr-2",attrs:{small:e.small}},a),[e._v(" mdi-lock ")])]}}])},[e._v(" Communication over DTLS ")]),n("v-tooltip",{attrs:{left:e.tooltipleft,bottom:e.tooltipbottom},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-icon",e._g({directives:[{name:"visible",rawName:"v-visible",value:e.registration.sleeping,expression:"registration.sleeping"}],staticClass:"pr-2",attrs:{small:e.small}},a),[e._v(" mdi-sleep ")])]}}])},[e._v(" Device using Queue mode is absent ")])],1)}),A=[],M={props:{registration:Object,small:{type:Boolean,default:!1},tooltipleft:{type:Boolean,default:!1},tooltipbottom:{type:Boolean,default:!1}}},L=M,F=n("132d"),B=n("3a2f"),W=Object(k["a"])(L,q,A,!1,null,null,null),U=W.exports;C()(W,{VIcon:F["a"],VTooltip:B["a"]});var K={components:{ClientInfo:U},useSSE:!0,name:"Clients",data:function(){return{loading:!0,registrations:[],headers:[{text:"Client Endpoint",value:"endpoint"},{text:"Registration ID",value:"registrationId"},{text:"Registration Date",value:"registrationDate"},{text:"Last Update",value:"lastUpdate"},{text:"",value:"infos",sortable:!1,align:"end"}],search:""}},methods:{openLink:function(e){this.$router.push("/clients/".concat(e.endpoint,"/3"))}},mounted:function(){var e=this;this.sse=this.$sse.create({url:"api/event"}).on("REGISTRATION",(function(t){e.registrations=e.registrations.filter((function(e){return t.endpoint!==e.endpoint})).concat(t)})).on("UPDATED",(function(t){var n=t.registration;e.registrations=e.registrations.filter((function(e){return n.registrationId!==e.registrationId})).concat(n)})).on("DEREGISTRATION",(function(t){e.registrations=e.registrations.filter((function(e){return t.registrationId!==e.registrationId}))})).on("SLEEPING",(function(t){for(var n=0;n<e.registrations.length;n++)e.registrations[n].endpoint===t.ep&&(e.registrations[n].sleeping=!0)})).on("error",(function(e){console.error("sse unexpected error",e)})),this.sse.connect().catch((function(e){console.error("Failed to connect to server",e)})),this.axios.get("api/clients").then((function(t){return e.loading=!1,e.registrations=t.data}))},beforeDestroy:function(){this.sse.disconnect()}},H=K,J=n("8fea"),G=n("ce7e"),z=n("8654"),Q=n("71d9"),X=n("2a7f"),Y=Object(k["a"])(H,N,E,!1,null,null,null),Z=Y.exports;C()(Y,{VDataTable:J["a"],VDivider:G["a"],VTextField:z["a"],VToolbar:Q["a"],VToolbarTitle:X["a"]});var ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"fill-height",attrs:{"no-gutters":""}},[e.deregister?n("v-col",{attrs:{cols:"12"}},[n("div",{staticStyle:{height:"100px"}}),n("v-card",{staticClass:"text-center",attrs:{elevation:"0"}},[n("v-card-text",{staticClass:"fill-height"},[n("v-icon",{attrs:{"x-large":""}},[e._v(" mdi-exit-run")]),n("v-card-title",{staticClass:"justify-center"},[e._v(" "+e._s(e.$route.params.endpoint)+" is deregistered. ")]),n("v-card-subtitle",[e._v(" Waiting for new registration ? ")])],1)],1)],1):e._e(),e.registration?n("v-col",{staticStyle:{"background-color":"#fafafa"},attrs:{cols:"12",md:"2"}},[n("v-sheet",{staticClass:"pa-4",attrs:{color:"grey lighten-5",width:"100%"}},[n("h3",[e._v(" "+e._s(e.$route.params.endpoint)+" "),n("client-info",{attrs:{registration:e.registration,small:"",tooltipbottom:""}})],1),n("div",[n("div",[e._v("Reg. ID: "+e._s(e.registration.registrationId))]),n("div",[e._v(" Registered: "+e._s(e._f("moment")(e.registration.registrationDate,"MMM D, h:mm:ss A"))+" ")]),n("div",[e._v(" Updated: "+e._s(e._f("moment")(e.registration.lastUpdate,"MMM D, h:mm:ss A"))+" ")])]),n("v-divider"),n("client-setting")],1),n("v-divider"),n("span",[e.registration&&"1.0"!=e.registration.lwM2mVersion?n("v-list",{attrs:{dense:""}},[n("v-list-item-group",[n("v-list-item",{attrs:{to:"/clients/"+e.$route.params.endpoint+"/composite"}},[n("v-list-item-icon",{staticClass:"me-2"},[n("v-icon",[e._v("mdi-format-list-checkbox")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Composite Operations")])],1)],1)],1)],1):e._e(),n("v-divider")],1),n("object-selector",{directives:[{name:"show",rawName:"v-show",value:e.objectdefs,expression:"objectdefs"}],attrs:{objects:e.objectdefs}}),n("v-divider")],1):e._e(),n("v-col",{attrs:{"no-gutters":"",cols:"12",md:"10"}},[e.$route.params.objectid?n("div",[e.objectdefs?n("router-view",{attrs:{objectdef:e.objectdef,instances:e.instances}}):e._e()],1):n("div",[e.objectdefs&&e.registration?n("router-view",{attrs:{objectdefs:e.objectdefs,allInstances:e.registration.availableInstances}}):e._e()],1)])],1)},te=[],ne=(n("dca8"),n("7db0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pa-0"},[n("div",{attrs:{title:"Timeout used to send request"}},[n("v-select",{attrs:{"single-line":"",dense:"","hide-details":"",prefix:e.$vuetify.breakpoint.mdOnly?null:"Timeout :",items:e.timeoutList,"item-value":"val","item-text":"txt","append-outer-icon":"mdi-help-circle-outline"},on:{"click:append-outer":e.openTimeoutHelps},model:{value:e.timeout,callback:function(t){e.timeout=t},expression:"timeout"}})],1),n("div",{attrs:{title:"Content Format used to send request handling single value"}},[n("v-select",{attrs:{"single-line":"",dense:"",prefix:e.$vuetify.breakpoint.mdOnly?null:"Single Value :","hide-details":"",items:e.singleFormatList},model:{value:e.singleformat,callback:function(t){e.singleformat=t},expression:"singleformat"}})],1),n("div",{attrs:{title:"Content Format used to send request handling multiple values"}},[n("v-select",{attrs:{"single-line":"",dense:"","hide-details":"",prefix:e.$vuetify.breakpoint.mdOnly?null:"Multi Value :",items:e.multiFormatList},model:{value:e.multiformat,callback:function(t){e.multiformat=t},expression:"multiformat"}})],1)])}),ae=[],se={data:function(){return{timeoutList:[{txt:"5s",val:5},{txt:"5min",val:300},{txt:"15min",val:900},{txt:"30min",val:1800},{txt:"None",val:null}],singleFormatList:["TLV","CBOR","TEXT","OPAQUE","SENML_JSON","SENML_CBOR","JSON"],multiFormatList:["TLV","SENML_JSON","SENML_CBOR","JSON"]}},computed:{timeout:Object(g["b"])("timeout",{defaultValue:5}),singleformat:Object(g["b"])("singleformat",{defaultValue:"TLV"}),multiformat:Object(g["b"])("multiformat",{defaultValue:"TLV"})},methods:{openTimeoutHelps:function(){window.open("https://github.com/eclipse/leshan/wiki/Request-Timeout","_blank")}}},ie=se,oe=n("b974"),re=Object(k["a"])(ie,ne,ae,!1,null,null,null),ce=re.exports;C()(re,{VSelect:oe["a"]});var le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list",{attrs:{dense:""}},[n("v-list-item-group",e._l(e.objects,(function(t){return n("v-list-item",{key:t.id,attrs:{to:"/clients/"+e.$route.params.endpoint+"/"+t.id}},[n("v-list-item-icon",{staticClass:"me-2"},[n("object-icon",{attrs:{objectId:t.id}})],1),n("v-list-item-content",[n("v-list-item-title",[e._v(" "+e._s(t.name)+" "),e.shouldBeHidden(t)?n("v-icon",{attrs:{small:"",color:"red",title:"The Object "+t.name+" ID:"+t.id+" MUST NOT be part of Update Objects and Object Instances list in Register Request."}},[e._v("mdi-alert-circle")]):e._e()],1),n("v-list-item-subtitle",[e._v(" "+e._s("/"+t.id)+" ")])],1)],1)})),1)],1)},ue=[],de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-icon",[e._v(e._s(e.idToIcon(e.objectId)))])},pe=[],ve={props:{objectId:Number,unknowObjectIcon:{type:String,default:"mdi-alpha-o-circle-outline"},invalidObjectIcon:{type:String,default:"mdi-alert-circle-outline"}},methods:{idToIcon:function(e){if(e<0||e>65535)return this.invalidObjectIcon;switch(e){case 1:return"mdi-server";case 2:return"mdi-shield-check-outline";case 3:return"mdi-devices";case 4:return"mdi-signal-variant";case 5:return"mdi-cellphone-arrow-down";case 6:return"mdi-map-marker";case 7:return"mdi-signal-distance-variant";case 9:return"mdi-package-down";case 10:return"mdi-signal";case 11:return"mdi-sim";case 14:return"mdi-puzzle-outline";case 15:return"mdi-widgets-outline";case 16:return"mdi-folder-multiple-outline";case 19:return"mdi-database-sync-outline";case 3300:return"mdi-gauge";case 3303:return"mdi-thermometer";case 3304:return"mdi-water-percent";case 3311:return"mdi-lightbulb-on-outline";case 3313:return"mdi-axis-arrow";case 3323:return"mdi-arrow-expand-vertical";case 3335:return"mdi-palette-outline";case 3338:return"mdi-bell-ring";case 3341:return"mdi-text-recognition";case 3342:return"mdi-toggle-switch";case 3347:return"mdi-gesture-tap-button";case 3441:return"mdi-list-status";case 3442:return"mdi-list-status";case 10259:return"mdi-text-box-outline";case 10260:return"mdi-database";case 10351:return"mdi-door";default:return this.unknowObjectIcon}}}},fe=ve,he=Object(k["a"])(fe,de,pe,!1,null,null,null),me=he.exports;C()(he,{VIcon:F["a"]});var be={components:{ObjectIcon:me},props:{objects:Array},methods:{shouldBeHidden:function(e){if(e)switch(e.id){case 0:case 21:return!0;default:return!1}return!1}}},ge=be,_e=n("8860"),ye=n("da13"),Ve=n("5d23"),xe=n("1baa"),je=n("34c3"),we=Object(k["a"])(ge,le,ue,!1,null,null,null),Oe=we.exports;C()(we,{VIcon:F["a"],VList:_e["a"],VListItem:ye["a"],VListItemContent:Ve["a"],VListItemGroup:xe["a"],VListItemIcon:je["a"],VListItemSubtitle:Ve["b"],VListItemTitle:Ve["c"]});var ke={components:{ObjectSelector:Oe,ClientSetting:ce,ClientInfo:U},name:"Client",data:function(){return{deregister:!1,registration:null,objectdefs:[]}},methods:{updateModels:function(){var e=this;this.axios.get("api/objectspecs/"+encodeURIComponent(this.$route.params.endpoint)).then((function(t){return e.objectdefs=Object.freeze(t.data)}))}},computed:{objectdef:function(){var e=this;return this.objectdefs.find((function(t){return t.id==e.$route.params.objectid}))},instances:function(){if(this.registration){var e=this.registration.availableInstances[this.$route.params.objectid];if(e)return e}return[]}},watch:{registration:function(e,t){e&&(t?t.endpoint!==e.endpoint&&this.$store.initState(e.endpoint):this.$store.initState(e.endpoint))}},mounted:function(){var e=this;this.sse=this.$sse.create({url:"api/event?ep="+encodeURIComponent(this.$route.params.endpoint)}).on("REGISTRATION",(function(t){e.registration=t,e.deregister=!1,e.updateModels()})).on("UPDATED",(function(t){var n=e.registration;e.registration=t.registration,JSON.stringify(e.registration.objectLinks)!==JSON.stringify(n.objectLinks)&&e.updateModels()})).on("DEREGISTRATION",(function(){e.registration=null,e.objectdefs=null,e.deregister=!0})).on("SLEEPING",(function(){e.registration.sleeping=!0})).on("SEND",(function(t){for(var n in t.val)e.$store.newNode(e.$route.params.endpoint,n,t.val[n])})).on("NOTIFICATION",(function(t){"composite"==t.kind?(e.$store.newNodes(e.$route.params.endpoint,t.val),e.$store.setCompositePathsObserved(e.$route.params.endpoint,t.paths,!0)):"single"==t.kind&&("instance"===t.val.kind?e.$store.newInstanceValue(e.$route.params.endpoint,t.res,t.val.resources,!1):"singleResource"===t.val.kind?e.$store.newSingleResourceValue(e.$route.params.endpoint,t.res,t.val.value,!1):"multiResource"===t.val.kind?e.$store.newMultiResourceValue(e.$route.params.endpoint,t.res,t.val.values,!1):"resourceInstance"===t.val.kind&&e.$store.newResourceInstanceValueFromPath(e.$route.params.endpoint,t.res,t.val.value,!1),e.$store.setObserved(e.$route.params.endpoint,t.res,!0))})).on("error",(function(e){console.error("sse unexpected error",e)})),this.sse.connect().catch((function(e){console.error("Failed to connect to server",e)})),this.axios.get("api/clients/"+encodeURIComponent(this.$route.params.endpoint)).then((function(t){e.registration=t.data,e.updateModels()})).catch((function(){e.registration=null,e.deregister=!0}))},beforeDestroy:function(){this.sse.disconnect()}},Ie=ke,Ce=n("b0af"),Se=n("99d9"),$e=n("62ad"),Re=n("0fd9"),De=n("8dd9"),Pe=Object(k["a"])(Ie,ee,te,!1,null,null,null),Te=Pe.exports;C()(Pe,{VCard:Ce["a"],VCardSubtitle:Se["b"],VCardText:Se["c"],VCardTitle:Se["d"],VCol:$e["a"],VDivider:G["a"],VIcon:F["a"],VList:_e["a"],VListItem:ye["a"],VListItemContent:Ve["a"],VListItemGroup:xe["a"],VListItemIcon:je["a"],VListItemTitle:Ve["c"],VRow:Re["a"],VSheet:De["a"]});var Ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return null!=e.$route.params.compositeObjectName?n("router-view",{attrs:{objectdefs:e.objectdefs,allInstances:e.allInstances}}):n("div",[n("v-sheet",{staticClass:"pa-4",attrs:{color:"grey lighten-5",width:"100%"}},[n("div",[n("h3",[n("v-icon",[e._v("mdi-format-list-checkbox")]),e._v(" Composite Operations")],1),n("p",[e._v(' Create your "Composite Object", then you will be able to sent Composite Operation on it like Read-Composite, Write-Composite or Observe-Composite request. ')]),n("p",{staticClass:"subtitle-2"},[e._v(' Note that "Composite Object" is not a LWM2M concept but just a UI way to expose Composite Operation. ')])]),n("v-divider"),n("v-row",[n("v-col",{attrs:{cols:"0",md:"3"}}),n("v-col",{attrs:{cols:"12",md:"6"}},[n("composite-objects-selector")],1),n("v-col",{attrs:{cols:"0",md:"3"}})],1)],1)],1)},Ee=[],qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-sheet",{staticClass:"pa-4",attrs:{color:"grey lighten-5",width:"100%",height:"100%"}},[n("v-card",[n("v-card-actions",{staticClass:"justify-center"},[n("v-btn",{attrs:{small:""},on:{click:function(t){return e.openNewCompositeObject()}}},[e._v(" Add Composite Object ")])],1),n("v-list",{attrs:{dense:""}},[n("v-list-item-group",e._l(e.compositeObjects,(function(t,a){return n("v-list-item",{key:a,attrs:{to:"/clients/"+e.$route.params.endpoint+"/composite/"+t.name}},[n("v-list-item-icon",[n("composite-object-icons",{attrs:{compositeObject:t}})],1),n("v-list-item-content",[n("v-list-item-title",[e._v(" "+e._s(t.name))]),n("v-list-item-subtitle",[e._v(" "+e._s(e.pathsAsString(t)))])],1),n("v-list-item-action",[n("v-btn",{attrs:{icon:""},on:{click:function(n){return n.preventDefault(),e.openEditCompositeObject(t)}}},[n("v-icon",{attrs:{small:""}},[e._v(" mdi-pencil ")])],1)],1),n("v-list-item-action",[n("v-btn",{attrs:{icon:""},on:{click:function(t){return t.preventDefault(),e.removeCompositeObject(a)}}},[n("v-icon",[e._v("mdi-delete")])],1)],1)],1)})),1)],1),n("composite-object-dialog",{attrs:{initialValue:e.editedCompositeObject,alreadyUsedName:e.compositeObjects.map((function(e){return e.name}))},on:{new:function(t){return e.addNewCompositeObject(t)},edit:function(t){return e.editCompositeObject(t)}},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}})],1)],1)},Ae=[],Me=n("2909"),Le=(n("d81d"),n("b0c0"),n("a434"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",e._l(e.objectIds,(function(e,t){return n("object-icon",{key:t,attrs:{objectId:e,invalidObjectIcon:"mdi-select"}})})),1)}),Fe=[],Be=(n("6062"),n("3ca3"),n("fb6a"),n("ac1f"),n("1276"),function(){function e(t){if(Object(l["a"])(this,e),this.path=t,0==t.indexOf("/")){var n=t.split("/");try{2==n.length?1==t.length?this.type="root":(this.type="object",this.objectid=parseInt(n[1])):3==n.length?(this.type="objectinstance",this.objectid=parseInt(n[1]),this.objectinstanceid=parseInt(n[2])):4==n.length?(this.type="resource",this.objectid=parseInt(n[1]),this.objectinstanceid=parseInt(n[2]),this.resourceid=parseInt(n[3])):5==n.length?(this.type="resourceinstance",this.objectid=parseInt(n[1]),this.objectinstanceid=parseInt(n[2]),this.resourceid=parseInt(n[3]),this.resourceinstanceid=parseInt(n[4])):this.type="invalid"}catch(a){this.type="invalid",console.log("invalid path",t,a)}}else this.type="invalid"}return Object(u["a"])(e,[{key:"toResourcePath",value:function(){return"/".concat(this.objectid,"/").concat(this.objectinstanceid,"/").concat(this.resourceid)}},{key:"toString",value:function(){return this.path}}]),e}()),We={components:{ObjectIcon:me},props:{compositeObject:Object},computed:{objectIds:function(){var e=new Set([]);if(this.compositeObject){var t=this.compositeObject.paths;t.forEach((function(t){var n=new Be(t);null!=n.objectid&&e.add(n.objectid)}))}e=Object(Me["a"])(e).slice(0,3);for(var n=e.length;n<3;n++)e.push(-1);return e}}},Ue=We,Ke=Object(k["a"])(Ue,Le,Fe,!1,null,null,null),He=Ke.exports,Je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"hide-overlay":"",fullscreen:"",transition:"dialog-bottom-transition"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[n("span",[e._v(e._s(e.editMode?"Edit Composite Object":"Add Composite Object"))])]),n("v-card-text",[n("p",{staticClass:"subtitle-1"},[e._v(" A Composite Object has a name and a list of path to LWM2M node (Object, Object Instance, Resource, Resource Instance). ")]),n("p",{staticClass:"subtitle-1"},[e._v(" Root path is not yet supported. "),n("br"),e._v(" Overlapped path will not work. (e.g. /3/0 with /3/0/1 is not valid) ")]),n("div",[e._v(" Note if you create Composite Object composed of too much resources, you could face some UI performance issue. "),n("a",{attrs:{href:"https://github.com/eclipse/leshan/issues/1016"}},[e._v("This is a UI demo limitation")]),e._v(", if you have skills in vue.js your help will be welcome. ")]),n("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{rules:[function(e){return!!e||"name is required"},function(t){return e.editMode||!t||!e.alreadyUsedName.includes(t)||"name already used"}],label:"Name",required:"",autofocus:!e.editMode,disabled:e.editMode},model:{value:e.compositeObject.name,callback:function(t){e.$set(e.compositeObject,"name",t)},expression:"compositeObject.name"}}),n("paths-input",{model:{value:e.compositeObject.paths,callback:function(t){e.$set(e.compositeObject,"paths",t)},expression:"compositeObject.paths"}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:"",disabled:!e.valid},on:{click:function(t){return e.$emit(e.editMode?"edit":"new",e.compositeObject)}}},[e._v(" "+e._s(e.editMode?"Save":"Add")+" ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.show=!1}}},[e._v(" Cancel ")])],1)],1)],1)},Ge=[],ze=(n("caad"),n("2532"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grey lighten-4 pa-4 mb-1"},[n("span",{staticClass:"pa-2"},[n("v-btn",{attrs:{small:""},on:{click:e.addPath}},[e._v(" "+e._s(e.addButtonText)+" ")])],1),n("v-btn",{attrs:{small:""},on:{click:e.removeAllPath}},[e._v(" Remove All ")]),e._l(e.value,(function(t,a){return n("div",{key:a},[n("v-text-field",{attrs:{value:t,rules:[function(e){return!!e||"path can not be empty required"},function(e){return!e||/^((\/([1-9][0-9]{0,4}|[0])){0,4})$|^\/$/.test(e)||"invalid path"}],placeholder:"a path to a LWM2M node (e.g. /3/0/1 or /3/0/11/0)",required:"",dense:"","append-outer-icon":"mdi-delete"},on:{input:function(t){return e.updatePath(a,t)},"click:append-outer":function(t){return e.removePath(a)}}})],1)}))],2)}),Qe=[],Xe={props:{value:Array,addButtonText:{default:"Add Path",type:String}},methods:{addPath:function(){this.$emit("input",[].concat(Object(Me["a"])(this.value),[""]))},removeAllPath:function(){this.$emit("input",[])},updatePath:function(e,t){var n=Object(Me["a"])(this.value);n.splice(e,1,t),this.$emit("input",n)},removePath:function(e){var t=Object(Me["a"])(this.value);t.splice(e,1),this.$emit("input",t)}}},Ye=Xe,Ze=n("8336"),et=Object(k["a"])(Ye,ze,Qe,!1,null,null,null),tt=et.exports;C()(et,{VBtn:Ze["a"],VTextField:z["a"]});var nt={components:{PathsInput:tt},props:{value:Boolean,initialValue:Object,alreadyUsedName:{type:Array,default:function(){return[]}}},data:function(){return{compositeObject:{},valid:!0,editMode:!1}},methods:{initialName:function(){var e,t=1;do{var n="compositeObject"+t;if(!this.alreadyUsedName.includes(n))return n;t++}while(t<1e3);return e}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},watch:{value:function(e){e&&(this.$refs.form&&this.$refs.form.resetValidation(),this.initialValue?(this.compositeObject=JSON.parse(JSON.stringify(this.initialValue)),this.editMode=!0):(this.compositeObject={name:this.initialName(),paths:[""]},this.editMode=!1))}}},at=nt,st=n("169a"),it=n("4bd4"),ot=n("2fa4"),rt=Object(k["a"])(at,Je,Ge,!1,null,null,null),ct=rt.exports;C()(rt,{VBtn:Ze["a"],VCard:Ce["a"],VCardActions:Se["a"],VCardText:Se["c"],VCardTitle:Se["d"],VDialog:st["a"],VForm:it["a"],VSpacer:ot["a"],VTextField:z["a"]});var lt={components:{CompositeObjectDialog:ct,CompositeObjectIcons:He},data:function(){return{dialog:!1,editedCompositeObject:null}},computed:{showDialog:{get:function(){return this.dialog},set:function(e){this.dialog=e}},compositeObjects:Object(g["b"])("compositeObjects",{defaultValue:[{name:"myCompositeObject",paths:["/3/0/1","/3/0/2"]}]})},methods:{pathsAsString:function(e){return e.paths.join(" , ")},openNewCompositeObject:function(){this.editedCompositeObject=null,this.showDialog=!0},openEditCompositeObject:function(e){this.editedCompositeObject=e,this.showDialog=!0},addNewCompositeObject:function(e){this.compositeObjects=[].concat(Object(Me["a"])(this.compositeObjects),[e]),this.showDialog=!1},editCompositeObject:function(e){this.compositeObjects=this.compositeObjects.map((function(t){return t.name==e.name?e:t})),this.showDialog=!1},removeCompositeObject:function(e){this.compositeObjects.splice(e,1),this.compositeObjects=Object(Me["a"])(this.compositeObjects)}}},ut=lt,dt=n("1800"),pt=Object(k["a"])(ut,qe,Ae,!1,null,null,null),vt=pt.exports;C()(pt,{VBtn:Ze["a"],VCard:Ce["a"],VCardActions:Se["a"],VIcon:F["a"],VList:_e["a"],VListItem:ye["a"],VListItemAction:dt["a"],VListItemContent:Ve["a"],VListItemGroup:xe["a"],VListItemIcon:je["a"],VListItemSubtitle:Ve["b"],VListItemTitle:Ve["c"],VSheet:De["a"]});var ft={components:{CompositeObjectsSelector:vt},props:{objectdefs:Array,allInstances:Object}},ht=ft,mt=Object(k["a"])(ht,Ne,Ee,!1,null,null,null),bt=mt.exports;C()(mt,{VCol:$e["a"],VDivider:G["a"],VIcon:F["a"],VRow:Re["a"],VSheet:De["a"]});var gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-sheet",{staticClass:"pa-4",attrs:{color:"grey lighten-5",width:"100%"}},[n("div",[n("h3",{staticClass:"text-capitalize"},[n("composite-object-icons",{attrs:{compositeObject:e.compositeObject}}),e._v(e._s(e.compositeObject.name)+" "),n("composite-object-control",{attrs:{endpoint:e.$route.params.endpoint,compositeObject:e.compositeObject,nodes:e.lwm2mNodes}}),n("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.state.compositeObserved[e.compositeObservationKey],expression:"state.compositeObserved[compositeObservationKey]"}],staticClass:"pl-3",attrs:{small:"",title:e.compositeObservationKey+" observed"}},[e._v("mdi-eye-outline")])],1),n("p",[e._v(" This Composite object is composed of following resources : "+e._s(e.compositeObject.paths.join(", "))+" ")])]),n("v-divider"),e._l(e.lwm2mNodes,(function(t,a){return n("div",{key:a},[n("h4",{staticClass:"pa-1"},[e._v(" "+e._s(a)+" "),t.instanceNotAvailable?n("span",{staticClass:"subtitle-2 grey--text text--darken-1"},[e._v(" - Instance "+e._s(t.path.objectinstanceid)+" was not reported as available by the client ")]):e._e()]),"root"==t.path.type?n("span",{staticClass:"text-body-2"},[e._v(" Root Path is not yet supported by Leshan. ")]):t.unknowObject?n("span",{staticClass:"text-body-2"},[e._v(" Client does not report it supports Object "+e._s(t.path.objectid)+" OR Leshan server demo does not know this object model, see "),n("a",{attrs:{href:"https://github.com/eclipse/leshan/wiki/Adding-new-objects#how-to-add-object-support-to-leshan-"}},[e._v(" how to add the model")]),e._v(". ")]):"object"==t.path.type?n("span",e._l(t.instances,(function(t){return n("div",{key:t.path},[n("h5",{staticClass:"pa-1"},[e._v("Instance "+e._s(t.id))]),n("v-expansion-panels",{attrs:{accordion:"",multiple:"",dense:"",tile:""}},e._l(t.resources,(function(t){return n("resource-expansion-panel",{key:t.path,attrs:{resource:t,endpoint:e.endpoint}})})),1)],1)})),0):"objectinstance"==t.path.type?n("div",[n("v-expansion-panels",{attrs:{accordion:"",multiple:"",dense:"",tile:""}},e._l(t.resources,(function(t){return n("resource-expansion-panel",{key:t.path,attrs:{resource:t,endpoint:e.endpoint}})})),1)],1):"resource"==t.path.type?n("div",[n("v-expansion-panels",{attrs:{accordion:"",multiple:"",dense:"",tile:""}},[n("resource-expansion-panel",{attrs:{resource:t.resource,endpoint:e.endpoint}})],1)],1):"resourceinstance"==t.path.type?n("div",[n("v-expansion-panels",{attrs:{accordion:"",multiple:"",dense:"",tile:""}},[n("resource-instance-expansion-panel",{attrs:{resource:t.resource,resourceInstanceId:t.resourceInstanceId,endpoint:e.endpoint}})],1)],1):"invalid"==t.path.type?n("span",{staticClass:"text-body-2"},[e._v(" Path seems to not be a valid one (ignored). ")]):n("span",{staticClass:"text-body-2"},[e._v(" Unexpected type of path "+e._s(t.path.type)+". ")])])}))],2)},_t=[],yt=(n("25f0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-expansion-panel",[n("v-expansion-panel-header",{staticClass:"pa-3",staticStyle:{"min-height":"32px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.open;return[n("v-container",{staticClass:"pa-0",staticStyle:{"min-width":"0"}},[n("v-row",[n("v-col",{staticClass:"pa-2",attrs:{cols:"7",lg:"3","align-self":"center"}},[e._v(e._s(e.resource.def.name)+" ")]),n("v-col",{staticClass:"pa-2 text--disabled",attrs:{cols:"4",lg:"1","align-self":"center"}},[e._v(e._s(e.resource.path)+" ")]),n("v-col",{staticClass:"pa-2 text--disabled",attrs:{cols:"1",lg:"1","align-self":"center"}},[n("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.state.observed[e.resource.path],expression:"state.observed[resource.path]"}],attrs:{"x-small":"",title:"Resource "+e.resource.path+" observed"}},[e._v("mdi-eye-outline")])],1),n("v-col",{staticClass:"pa-0",attrs:{cols:"7",lg:"3","align-self":"center"}},[n("v-fade-transition",{attrs:{"leave-absolute":""}},[n("resource-control",{directives:[{name:"show",rawName:"v-show",value:!a,expression:"!open"}],attrs:{resourcedef:e.resource.def,endpoint:e.endpoint,path:e.resource.path}})],1)],1),n("v-col",{staticClass:"pa-0",class:{"text--disabled":!!e.state.data[e.resource.path]&&e.state.data[e.resource.path].supposed},attrs:{cols:"5",lg:"4","align-self":"center"}},[n("v-fade-transition",{attrs:{"leave-absolute":""}},[n("simple-resource-view",{directives:[{name:"show",rawName:"v-show",value:!a,expression:"!open"}],staticClass:"pr-3 text-truncate",attrs:{resource:e.state.data[e.resource.path],resourcedef:e.resource.def}})],1)],1)],1)],1)]}}])}),n("v-expansion-panel-content",[n("resource-view",{attrs:{endpoint:e.endpoint,resource:e.state.data[e.resource.path],resourcedef:e.resource.def,path:e.resource.path}})],1)],1)}),Vt=[],xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.readable?n("request-button",{attrs:{title:"Observe "+e.path},on:{"on-click":e.observe}},[e._v("Obs")]):e._e(),e.readable?n("request-button",{attrs:{title:"Passive Cancel Obverse "+e.path},on:{"on-click":e.stopObserve}},[n("v-icon",{attrs:{dense:"",small:""}},[e._v("mdi-eye-remove-outline")])],1):e._e(),e.readable?n("request-button",{attrs:{title:"Read "+e.path},on:{"on-click":e.read}},[e._v("R")]):e._e(),e.writable?n("request-button",{ref:"W",attrs:{title:"Write "+e.path},on:{"on-click":e.openWriteDialog}},[e._v("W")]):e._e(),e.executable?n("request-button",{attrs:{title:"Execute "+e.path},on:{"on-click":e.exec}},[e._v("Exe")]):e._e(),e.executable?n("request-button",{attrs:{title:"Execute with params "+e.path},on:{"on-click":e.execWithParams}},[n("v-icon",{attrs:{dense:"",small:""}},[e._v("mdi-cog-outline")])],1):e._e(),e.showDialog?n("resource-write-dialog",{attrs:{resourcedef:e.resourcedef,path:e.path},on:{write:function(t){return e.write(t)}},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}):e._e()],1)},jt=[],wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-badge",{attrs:{color:e.state,dot:"",bottom:"",overlap:"",title:e.details,value:e.state}},[n("v-btn",{staticClass:"ma-1",attrs:{small:"",tile:"","min-width":"0",elevation:"0",title:e.title,loading:e.loading,disabled:e.loading},on:{click:function(t){return t.stopPropagation(),e.onClick.apply(null,arguments)}}},[e._t("default")],2)],1)},Ot=[],kt={props:{title:String},data:function(){return{loading:!1,state:null,details:null}},methods:{onClick:function(){this.state=null,this.details=null,this.loading=!0,this.$emit("on-click",this)},changeState:function(e,t){this.state=e,this.details=t,this.loading=!1},resetState:function(){this.state=null,this.details=null,this.loading=!1}}},It=kt,Ct=n("4ca6"),St=Object(k["a"])(It,wt,Ot,!1,null,null,null),$t=St.exports;C()(St,{VBadge:Ct["a"],VBtn:Ze["a"]});var Rt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"hide-overlay":"",fullscreen:"",transition:"dialog-bottom-transition"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[e._v(' Write "'+e._s(e.resourcedef.name)+'" Resource ')]),n("v-card-text",[n("div",{staticClass:"subtitle-1"},[e._v("Resource "+e._s(e.path))]),e.resourcedef["type"]?n("div",[e._v(" Type : "),n("span",{staticClass:"text-capitalize"},[e._v(e._s(e.resourcedef["type"]))])]):e._e(),e.resourcedef.range?n("div",[e._v("Range : "+e._s(e.resourcedef.range))]):e._e(),e.resourcedef.units?n("div",[e._v("Units : "+e._s(e.resourcedef.units))]):e._e(),n("v-divider",{staticClass:"pa-2"}),n("p",{staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(e.resourcedef.description))]),n("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.write.apply(null,arguments)}}},[n("resource-input",{attrs:{resourcedef:e.resourcedef},model:{value:e.resourceValue,callback:function(t){e.resourceValue=t},expression:"resourceValue"}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:e.write}},[e._v(" Write ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.show=!1}}},[e._v(" Cancel ")])],1)],1)],1)},Dt=[],Pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"single"!=e.resourcedef.instancetype?n("multi-instance-resource-input",{attrs:{resourcedef:e.resourcedef,hint:e.hint,value:e.value},on:{input:function(t){return e.$emit("input",t)}}}):n("single-value-input",{attrs:{resourcedef:e.resourcedef,hint:e.hint,value:e.value},on:{input:function(t){return e.$emit("input",t)}}})},Tt=[],Nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"boolean"==e.resourcedef.type?n("boolean-value-input",{attrs:{resourcedef:e.resourcedef,value:e.value},on:{input:function(t){return e.$emit("input",t)}}}):"opaque"==e.resourcedef.type?n("opaque-value-input",{attrs:{resourcedef:e.resourcedef,value:e.value},on:{input:function(t){return e.$emit("input",t)}}}):"time"==e.resourcedef.type?n("date-time-value-input",{attrs:{resourcedef:e.resourcedef,value:e.value},on:{input:function(t){return e.$emit("input",t)}}}):"objlnk"==e.resourcedef.type?n("obj-link-value-input",{attrs:{resourcedef:e.resourcedef,value:e.value},on:{input:function(t){return e.$emit("input",t)}}}):n("v-text-field",{attrs:{label:e.resourcedef.type,hint:e.hint,suffix:e.resourcedef.units,value:e.value},on:{input:function(t){return e.$emit("input",t)}}})},Et=[],qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",{attrs:{cols:"1"}},[n("v-checkbox",{key:e.state,attrs:{indeterminate:""!==e.state,"indeterminate-icon":e.icon,"off-icon":"mdi-close-box-outline"},model:{value:e.booleanValue,callback:function(t){e.booleanValue=t},expression:"booleanValue"}})],1),n("v-col",[n("v-text-field",{attrs:{"single-line":"",label:e.resourcedef.type,suffix:e.resourcedef.units,rules:[function(t){return e.isNotSet||!e.isNotBoolean||"not a boolean"}],clearable:""},model:{value:e.booleanValue,callback:function(t){e.booleanValue=t},expression:"booleanValue"}})],1)],1)},At=[],Mt={props:{value:null,resourcedef:Object},data:function(){return{localValue:null}},watch:{value:function(e){this.localValue=e}},methods:{toBoolean:function(e){if("boolean"===typeof e)return e;if("string"===typeof e){if("true"==e)return!0;if("false"==e)return!1}return e}},computed:{booleanValue:{get:function(){return this.localValue},set:function(e){this.$emit("input",this.toBoolean(e))}},state:function(){return this.isNotSet?"notset":this.isNotBoolean?"notbool":""},isNotSet:function(){return void 0===this.booleanValue||null===this.booleanValue||""===this.booleanValue},isNotBoolean:function(){return"boolean"!==typeof this.booleanValue},icon:function(){return this.isNotSet?"mdi-checkbox-blank-outline":this.isNotBoolean?"mdi-help-box":""}}},Lt=Mt,Ft=n("ac7c"),Bt=Object(k["a"])(Lt,qt,At,!1,null,null,null),Wt=Bt.exports;C()(Bt,{VCheckbox:Ft["a"],VCol:$e["a"],VRow:Re["a"],VTextField:z["a"]});var Ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",[n("v-text-field",{attrs:{"single-line":"",label:e.resourcedef.type,suffix:"seconds",rules:[function(t){return!t||e.isValidTimestamp(t)||"Invalid timestamp"}],hint:"Timestamp in seconds",clearable:""},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1)],1)},Kt=[];n("498a");function Ht(e){return"number"===typeof e?e===Math.round(e):"string"===typeof e&&""!==e.trim()&&e===String(Math.round(Number(e)))}var Jt={props:{value:null,resourcedef:Object},data:function(){return{localValue:null}},watch:{value:function(e){this.isValidTimestamp(e)?this.localValue=Math.floor(parseInt(e)/1e3):this.localValue=e}},methods:{isValidTimestamp:function(e){return Ht(e)}},computed:{dateValue:{get:function(){return this.localValue},set:function(e){this.$emit("input",this.isValidTimestamp(e)?1e3*e:e)}}}},Gt=Jt,zt=Object(k["a"])(Gt,Ut,Kt,!1,null,null,null),Qt=zt.exports;C()(zt,{VCol:$e["a"],VRow:Re["a"],VTextField:z["a"]});var Xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-file-input",{attrs:{label:"File input","show-size":"",clearable:"",disabled:!!e.localOpaqueValue},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1),n("v-col",[n("v-textarea",{attrs:{"auto-grow":"",rows:"1",label:"Byte Value in Hexadecimal",suffix:e.resourcedef.units,rules:[function(e){return!e||/^[0-9a-fA-F]+$/.test(e)||"Hexadecimal format is expected"}],clearable:"",disabled:!!e.localFile},model:{value:e.opaqueValue,callback:function(t){e.opaqueValue=t},expression:"opaqueValue"}})],1)],1)},Yt=[],Zt=(n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),{props:{value:null,resourcedef:Object},data:function(){return{localOpaqueValue:null,localFile:null}},watch:{value:function(e){null==e&&(this.localFile=null,this.localOpaqueValue=null)}},computed:{opaqueValue:{get:function(){return this.localOpaqueValue},set:function(e){this.localOpaqueValue=e,this.$emit("input",this.localOpaqueValue)}},file:{get:function(){return this.localFile},set:function(e){var t=this;this.localFile=e,e?this.toByteArray(this.localFile).then((function(e){return t.$emit("input",e)})):this.$emit("input",e)}}},methods:{toByteArray:function(e){return new Promise((function(t){var n=new FileReader;n.onload=function(){var e=new Uint8Array(this.result),n=new Array(e.length),a=e.length;while(a--)n[a]=(e[a]<16?"0":"")+e[a].toString(16);e=null,t(n.join(""))},n.readAsArrayBuffer(e)}))}}}),en=Zt,tn=n("23a7"),nn=n("a844"),an=Object(k["a"])(en,Xt,Yt,!1,null,null,null),sn=an.exports;C()(an,{VCol:$e["a"],VFileInput:tn["a"],VRow:Re["a"],VTextarea:nn["a"]});var on=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",[n("v-text-field",{attrs:{"single-line":"",label:"Object Id",rules:[function(t){return!t||e.isValidId(t)||"Invalid object id"}],value:e.objectId,clearable:""},on:{input:function(t){e.$emit("input",e.objectIdChanged(t))}}})],1),n("v-col",[n("v-text-field",{attrs:{"single-line":"",label:"Object Instance Id",rules:[function(t){return!t||e.isValidId(t)||"Invalid object instance id"}],value:e.objectInstanceId,clearable:""},on:{input:function(t){e.$emit("input",e.objectInstanceIdChanged(t))}}})],1)],1)},rn=[],cn={props:{value:null,resourcedef:Object},data:function(){return{objectId:"",objectInstanceId:""}},watch:{value:function(e){this.objectId=e.objectId,this.objectInstanceId=e.objectInstanceId}},methods:{convertToNumber:function(e){return Ht(e)?Number(e):e},isValidId:function(e){return Ht(e)},objectIdChanged:function(e){return""===e&&""===this.objectInstanceId?null:{objectId:this.convertToNumber(e),objectInstanceId:this.objectInstanceId}},objectInstanceIdChanged:function(e){return""===this.objectId&&""===e?null:{objectId:this.objectId,objectInstanceId:this.convertToNumber(e)}}}},ln=cn,un=Object(k["a"])(ln,on,rn,!1,null,null,null),dn=un.exports;C()(un,{VCol:$e["a"],VRow:Re["a"],VTextField:z["a"]});var pn={components:{BooleanValueInput:Wt,OpaqueValueInput:sn,DateTimeValueInput:Qt,ObjLinkValueInput:dn},props:{value:null,resourcedef:Object,hint:{type:String,default:null}}},vn=pn,fn=Object(k["a"])(vn,Nt,Et,!1,null,null,null),hn=fn.exports;C()(fn,{VTextField:z["a"]});var mn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grey lighten-4 pa-4 mb-1"},[n("span",{staticClass:"pa-2"},[n("v-btn",{attrs:{small:""},on:{click:e.addNewInstance}},[e._v(" Add Instance ")])],1),n("v-btn",{attrs:{small:""},on:{click:e.removeAllInstances}},[e._v(" Remove All ")]),e._l(e.instances,(function(t,a){return n("span",{key:a},[n("v-row",{attrs:{dense:"",align:"center"}},[n("v-col",{attrs:{cols:"12",md:"1"}},[n("v-text-field",{ref:"id"+a,refInFor:!0,attrs:{hint:"Id of the instance",type:"number",rules:[function(e){return/^(0|[1-9]\d*)$/.test(e)||"Must be a positive Integer"},function(t){return!e.isAlreadyUsed(t,a)||"ID already used"}]},on:{input:function(t){return e.triggerValidation(a)}},model:{value:t.id,callback:function(n){e.$set(t,"id",n)},expression:"instance.id"}})],1),n("v-col",[n("single-value-input",{attrs:{resourcedef:e.resourcedef,hint:e.hint},model:{value:t.val,callback:function(n){e.$set(t,"val",n)},expression:"instance.val"}})],1),n("v-col",{attrs:{cols:"1",justify:"center"}},[n("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.removeInstance(a)}}},[n("v-icon",[e._v(" mdi-delete ")])],1)],1)],1)],1)}))],2)},bn=[],gn={components:{SingleValueInput:hn},props:{value:null,resourcedef:Object,hint:{type:String,default:null}},computed:{instances:{get:function(){return this.value?this.value:[]}}},methods:{triggerValidation:function(e){var t=this;this.instances.forEach((function(n,a){if(a!=e){var s=t.$refs["id"+a];s&&s[0].validate(!0)}}))},isAlreadyUsed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=this.instances.find((function(n,a){return n.id==e&&a!=t}));return void 0!==n},addNewInstance:function(){this.$emit("input",[].concat(Object(Me["a"])(this.instances),[{id:this.newId(),val:null}]))},removeAllInstances:function(){this.$emit("input",[])},removeInstance:function(e){this.instances.splice(e,1),this.$emit("input",this.instances)},newId:function(){var e=0;while(e<=65535){if(!this.isAlreadyUsed(e))return e;e++}}}},_n=gn,yn=Object(k["a"])(_n,mn,bn,!1,null,null,null),Vn=yn.exports;C()(yn,{VBtn:Ze["a"],VCol:$e["a"],VIcon:F["a"],VRow:Re["a"],VTextField:z["a"]});var xn={components:{SingleValueInput:hn,MultiInstanceResourceInput:Vn},props:{value:null,resourcedef:Object,hint:{type:String,default:null}}},jn=xn,wn=Object(k["a"])(jn,Pt,Tt,!1,null,null,null),On=wn.exports,kn={components:{ResourceInput:On},props:{value:Boolean,resourcedef:Object,path:String},data:function(){return{resourceValue:null}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},watch:{value:function(e){console.log(this.resourcedef),e&&(this.resourceValue=null)}},methods:{write:function(){this.show=!1,this.$emit("write",this.resourceValue)}}},In=kn,Cn=Object(k["a"])(In,Rt,Dt,!1,null,null,null),Sn=Cn.exports;function $n(e,t,n){var a={kind:"instance",resources:[]};null!=t&&(a.id=t);var s=function(t){var s=e.resourcedefs.find((function(e){return e.id==t}));a.resources.push(Rn(s,n[t]))};for(var i in n)s(i);return a}function Rn(e,t){return"single"==e.instancetype?Dn(e,t):Pn(e,t)}function Dn(e,t){var n={};return n.id=e.id,n.kind="singleResource",n.value=t,n.type=e.type,n}function Pn(e,t){var n={};return n.id=e.id,n.kind="multiResource",n.type=e.type,n.values=t.reduce((function(e,t){return e[t.id]=t.val,e}),{}),n}function Tn(e,t,n){var a={};return a.id=t,a.kind="resourceInstance",a.value=n,a.type=e.type,a}function Nn(e,t,n){if("resource"==t.type&&"single"==e.instancetype)return Dn(e,n);if("resourceinstance"==t.type)return Tn(e,t.resourceinstanceid,n);throw new Error("Unsupported kind of node ".concat(t.type))}C()(Cn,{VBtn:Ze["a"],VCard:Ce["a"],VCardActions:Se["a"],VCardText:Se["c"],VCardTitle:Se["d"],VDialog:st["a"],VDivider:G["a"],VForm:it["a"],VSpacer:ot["a"]});var En=Object(g["b"])("timeout",{defaultValue:5}),qn=Object(g["b"])("singleformat",{defaultValue:"TLV"}),An=Object(g["b"])("multiformat",{defaultValue:"TLV"}),Mn={components:{RequestButton:$t,ResourceWriteDialog:Sn},props:{resourcedef:Object,path:String,endpoint:String},data:function(){return{dialog:!1}},computed:{showDialog:{get:function(){return this.dialog},set:function(e){this.dialog=e,this.$refs.W.resetState()}},readable:function(){return this.resourcedef.operations.includes("R")},writable:function(){return this.resourcedef.operations.includes("W")},executable:function(){return this.resourcedef.operations.includes("E")}},methods:{getFormat:function(){return"single"===this.resourcedef.instancetype?qn.get():An.get()},requestPath:function(){return"api/clients/".concat(encodeURIComponent(this.endpoint)).concat(this.path)},requestOption:function(){return"?timeout=".concat(En.get(),"&format=").concat(this.getFormat())},updateState:function(e,t){var n=e.valid?e.success?"success":"error":"warning";t.changeState(n,e.status)},read:function(e){var t=this;this.axios.get(this.requestPath()+this.requestOption()).then((function(n){t.updateState(n.data,e),n.data.success&&t.$store.newResourceValue(t.endpoint,t.path,n.data.content)})).catch((function(){e.resetState()}))},observe:function(e){var t=this;this.axios.post(this.requestPath()+"/observe"+this.requestOption()).then((function(n){t.updateState(n.data,e),n.data.success&&(t.$store.newResourceValue(t.endpoint,t.path,n.data.content),t.$store.setObserved(t.endpoint,t.path,!0))})).catch((function(){e.resetState()}))},stopObserve:function(e){var t=this;this.axios.delete(this.requestPath()+"/observe").then((function(){e.changeState("success"),t.$store.setObserved(t.endpoint,t.path,!1)})).catch((function(){e.resetState()}))},openWriteDialog:function(){this.dialog=!0},write:function(e){var t=this,n=this.$refs.W,a=Rn(this.resourcedef,e);this.axios.put(this.requestPath()+this.requestOption(),a).then((function(e){t.updateState(e.data,n),e.data.success&&t.$store.newResourceValue(t.endpoint,t.path,a,!0)})).catch((function(){n.resetState()}))},exec:function(e){var t=this;this.axios.post(this.requestPath()).then((function(n){t.updateState(n.data,e)})).catch((function(){e.resetState()}))},execWithParams:function(e){var t=this;this.$dialog.prompt({text:"Parameters for the execute request",title:"Execute "+this.path}).then((function(n){n?t.axios.post(t.requestPath(),n).then((function(n){t.updateState(n.data,e)})).catch((function(){e.resetState()})):e.resetState()}))}}},Ln=Mn,Fn=Object(k["a"])(Ln,xt,jt,!1,null,null,null),Bn=Fn.exports;C()(Fn,{VIcon:F["a"]});var Wn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{title:e.resourceValueAsString}},[e._v(" "+e._s(e.resourceValueAsString)+" ")])},Un=[];function Kn(e,t){if("objlnk"==t)return e.objectId+":"+e.objectInstanceId;if("time"==t){var n=new Date(e);return n.toDateString()+" - "+n.toLocaleTimeString()+" ("+n.getTime()/1e3+"s)"}return String(e)}function Hn(e,t){if(e.isSingle)return Kn(e.val,t);var n=Object.entries(e.vals),a=n.length;if(0==a)return"0 instance";var s=a+" instance"+(a>1?"s":""),i=n.map((function(e){var n=Object(c["a"])(e,2),a=n[0],s=n[1];return a+":"+Kn(s.val,t)})).join(", ");return s+" ["+i+"]"}var Jn={props:{resourcedef:Object,resource:Object},computed:{resourceValueAsString:function(){return this.resource?Hn(this.resource,this.resourcedef.type):""}}},Gn=Jn,zn=Object(k["a"])(Gn,Wn,Un,!1,null,null,null),Qn=zn.exports,Xn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{color:"grey lighten-5"}},[n("v-col",{attrs:{cols:"12",lg:"6",xl:"5"}},[n("resource-definition-view",{attrs:{resourcedef:e.resourcedef}})],1),n("v-col",[n("v-card",{attrs:{elevation:"0"}},[n("resource-control",{attrs:{resourcedef:e.resourcedef,endpoint:e.endpoint,path:e.path}}),"single"==e.resourcedef.instancetype?n("v-card-text",{staticClass:"font-weight-bold",class:{"text--primary":e.resource&&!e.resource.supposed}},[e._v(" "+e._s(e.resourceValueAsString)+" ")]):n("multi-instances-resource-view",{attrs:{resourcedef:e.resourcedef,endpoint:e.endpoint,path:e.path,resource:e.resource}})],1)],1)],1)},Yn=[],Zn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.resource?n("v-simple-table",{attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"px-2 text-left "},[e._v(" Id ")]),n("th"),n("th"),n("th",{staticClass:"text-left",staticStyle:{width:"100%"}},[e._v(" Value ")])])]),n("tbody",e._l(e.resource.vals,(function(t,a){return n("tr",{key:a,staticStyle:{"background-color":"transparent !important"}},[n("td",{staticClass:"px-2 text--disabled"},[e._v(e._s(a))]),n("td",{staticClass:"px-2"},[n("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.state.observed[e.instancePath(a)],expression:"state.observed[instancePath(id)]"}],staticClass:"pa-0",attrs:{"x-small":"",title:"Instance "+e.instancePath(a)+" observed"}},[e._v("mdi-eye-outline")])],1),n("td",{staticClass:"px-2",staticStyle:{"white-space":"nowrap"}},[n("resource-instance-control",{attrs:{endpoint:e.endpoint,resourcedef:e.resourcedef,resourcePath:e.path,instanceId:Number(a)}})],1),n("td",{class:{"text--disabled":t.supposed}},[e._v(" "+e._s(e.valueAsString(t.val))+" ")])])})),0)]},proxy:!0}],null,!1,3848279987)}):e._e()},ea=[],ta=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.readable?n("request-button",{attrs:{title:"Observe "+e.path},on:{"on-click":e.observe}},[e._v("Obs")]):e._e(),e.readable?n("request-button",{attrs:{title:"Passive Cancel Obverse "+e.path},on:{"on-click":e.stopObserve}},[n("v-icon",{attrs:{dense:"",small:""}},[e._v("mdi-eye-remove-outline")])],1):e._e(),e.readable?n("request-button",{attrs:{title:"Read "+e.path},on:{"on-click":e.read}},[e._v("R")]):e._e(),e.writable?n("request-button",{ref:"W",attrs:{title:"Write "+e.path},on:{"on-click":e.openWriteDialog}},[e._v("W")]):e._e(),e.showDialog?n("resource-instance-write-dialog",{attrs:{resourcedef:e.resourcedef,path:e.path,instanceId:e.instanceId},on:{write:function(t){return e.write(t)}},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}):e._e()],1)},na=[],aa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"hide-overlay":"",fullscreen:"",transition:"dialog-bottom-transition"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[e._v(" Write Instance "+e._s(e.instanceId)+' of "'+e._s(e.resourcedef.name)+'" Resource ')]),n("v-card-text",[n("div",{staticClass:"subtitle-1"},[e._v("Resource Instance "+e._s(e.path))]),e.resourcedef["type"]?n("div",[e._v(" Type : "),n("span",{staticClass:"text-capitalize"},[e._v(e._s(e.resourcedef["type"]))])]):e._e(),e.resourcedef.range?n("div",[e._v("Range : "+e._s(e.resourcedef.range))]):e._e(),e.resourcedef.units?n("div",[e._v("Units : "+e._s(e.resourcedef.units))]):e._e(),n("v-divider",{staticClass:"pa-2"}),n("p",{staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(e.resourcedef.description))]),n("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.write.apply(null,arguments)}}},[n("single-value-input",{attrs:{resourcedef:e.resourcedef},model:{value:e.resourceValue,callback:function(t){e.resourceValue=t},expression:"resourceValue"}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:e.write}},[e._v(" Write ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.show=!1}}},[e._v(" Cancel ")])],1)],1)],1)},sa=[],ia={components:{SingleValueInput:hn},props:{value:Boolean,resourcedef:Object,path:String,instanceId:Number},data:function(){return{resourceValue:null}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},watch:{value:function(e){e&&(this.resourceValue=null)}},methods:{write:function(){this.show=!1,this.$emit("write",this.resourceValue)}}},oa=ia,ra=Object(k["a"])(oa,aa,sa,!1,null,null,null),ca=ra.exports;C()(ra,{VBtn:Ze["a"],VCard:Ce["a"],VCardActions:Se["a"],VCardText:Se["c"],VCardTitle:Se["d"],VDialog:st["a"],VDivider:G["a"],VForm:it["a"],VSpacer:ot["a"]});var la=Object(g["b"])("timeout",{defaultValue:5}),ua=Object(g["b"])("singleformat",{defaultValue:"TLV"}),da={components:{RequestButton:$t,ResourceInstanceWriteDialog:ca},props:{resourcedef:Object,resourcePath:String,instanceId:Number,endpoint:String},data:function(){return{dialog:!1}},computed:{showDialog:{get:function(){return this.dialog},set:function(e){this.dialog=e,this.$refs.W.resetState()}},path:function(){return this.resourcePath+"/"+this.instanceId},readable:function(){return this.resourcedef.operations.includes("R")},writable:function(){return this.resourcedef.operations.includes("W")}},methods:{requestPath:function(){return"api/clients/".concat(encodeURIComponent(this.endpoint)).concat(this.path)},requestOption:function(){return"?timeout=".concat(la.get(),"&format=").concat(ua.get())},updateState:function(e,t){var n=e.valid?e.success?"success":"error":"warning";t.changeState(n,e.status)},read:function(e){var t=this;this.axios.get(this.requestPath()+this.requestOption()).then((function(n){t.updateState(n.data,e),n.data.success&&t.$store.newResourceInstanceValue(t.endpoint,t.resourcePath,t.instanceId,n.data.content.value)})).catch((function(){e.resetState()}))},observe:function(e){var t=this;this.axios.post(this.requestPath()+"/observe"+this.requestOption()).then((function(n){t.updateState(n.data,e),n.data.success&&(t.$store.newResourceInstanceValue(t.endpoint,t.resourcePath,t.instanceId,n.data.content.value),t.$store.setObserved(t.endpoint,t.path,!0))})).catch((function(){e.resetState()}))},stopObserve:function(e){var t=this;this.axios.delete(this.requestPath()+"/observe").then((function(){e.changeState("success"),t.$store.setObserved(t.endpoint,t.path,!1)})).catch((function(){e.resetState()}))},openWriteDialog:function(){this.dialog=!0},write:function(e){var t=this,n=this.$refs.W;this.axios.put(this.requestPath()+this.requestOption(),Tn(this.resourcedef,this.instanceId,e)).then((function(a){t.updateState(a.data,n),a.data.success&&t.$store.newResourceInstanceValue(t.endpoint,t.resourcePath,t.instanceId,e,!0)})).catch((function(){n.resetState()}))}}},pa=da,va=Object(k["a"])(pa,ta,na,!1,null,null,null),fa=va.exports;C()(va,{VIcon:F["a"]});var ha={components:{ResourceInstanceControl:fa},props:{endpoint:String,resourcedef:Object,resource:Object,path:String},computed:{state:function(){return this.$store.state[this.endpoint]}},methods:{valueAsString:function(e){return Kn(e,this.resourcedef.type)},instancePath:function(e){return this.path+"/"+e}}},ma=ha,ba=n("1f4f"),ga=Object(k["a"])(ma,Zn,ea,!1,null,null,null),_a=ga.exports;C()(ga,{VIcon:F["a"],VSimpleTable:ba["a"]});var ya=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"grey lighten-4",attrs:{elevation:"0"}},[n("v-card-subtitle",{staticClass:"pb-0 text-decoration-underline"},[e._v(" Model : ")]),n("v-card-text",[n("v-simple-table",{attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[e._v(" Operations ")]),n("th",{staticClass:"text-left"},[e._v(" Instances ")]),n("th",{staticClass:"text-left"},[e._v(" Mandatory ")]),n("th",{staticClass:"text-left"},[e._v(" Type ")]),n("th",{staticClass:"text-left"},[e._v(" Range or enumeration ")]),n("th",{staticClass:"text-left"},[e._v(" Units ")])])]),n("tbody",[n("tr",{staticClass:"text-capitalize",staticStyle:{"pointer-events":"none"}},[n("td",[e._v(e._s(e.resourcedef.operations))]),n("td",[e._v(e._s(e.resourcedef.instancetype))]),n("td",[e._v(e._s(e.resourcedef.mandatory))]),n("td",[e._v(e._s(e.resourcedef.type))]),n("td",[e._v(e._s(e.resourcedef.range))]),n("td",[e._v(e._s(e.resourcedef.units))])])])]},proxy:!0}])})],1),n("v-card-subtitle",{staticClass:"pb-0 text-decoration-underline"},[e._v(" Description : ")]),n("v-card-text",{staticStyle:{"white-space":"pre-wrap"}},[e._v(" "+e._s(e.resourcedef.description)),e.resourcedef.description2?n("br"):e._e(),e._v(e._s(e.resourcedef.description2)+" ")])],1)},Va=[],xa={props:{resourcedef:Object}},ja=xa,wa=Object(k["a"])(ja,ya,Va,!1,null,null,null),Oa=wa.exports;C()(wa,{VCard:Ce["a"],VCardSubtitle:Se["b"],VCardText:Se["c"],VSimpleTable:ba["a"]});var ka={components:{ResourceControl:Bn,ResourceDefinitionView:Oa,MultiInstancesResourceView:_a},props:{endpoint:String,resourcedef:Object,resource:Object,path:String},computed:{resourceValueAsString:function(){return this.resource?Hn(this.resource,this.resourcedef.type):""}}},Ia=ka,Ca=Object(k["a"])(Ia,Xn,Yn,!1,null,null,null),Sa=Ca.exports;C()(Ca,{VCard:Ce["a"],VCardText:Se["c"],VCol:$e["a"],VRow:Re["a"]});var $a={components:{ResourceControl:Bn,SimpleResourceView:Qn,ResourceView:Sa},props:{endpoint:String,resource:Object},computed:{state:function(){return this.$store.state[this.endpoint]}}},Ra=$a,Da=n("cd55"),Pa=n("49e2"),Ta=n("c865"),Na=n("0789"),Ea=Object(k["a"])(Ra,yt,Vt,!1,null,null,null),qa=Ea.exports;C()(Ea,{VCol:$e["a"],VContainer:$["a"],VExpansionPanel:Da["a"],VExpansionPanelContent:Pa["a"],VExpansionPanelHeader:Ta["a"],VFadeTransition:Na["c"],VIcon:F["a"],VRow:Re["a"]});var Aa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-expansion-panel",[n("v-expansion-panel-header",{staticClass:"pa-3",staticStyle:{"min-height":"32px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.open;return[n("v-container",{staticClass:"pa-0",staticStyle:{"min-width":"0"}},[n("v-row",[n("v-col",{staticClass:"pa-2",attrs:{cols:"7",lg:"3","align-self":"center"}},[e._v(e._s(e.resource.def.name)+" ")]),n("v-col",{staticClass:"pa-2 text--disabled",attrs:{cols:"4",lg:"1","align-self":"center"}},[e._v(e._s(e.resourceInstancePath)+" ")]),n("v-col",{staticClass:"pa-2 text--disabled",attrs:{cols:"1",lg:"1","align-self":"center"}},[n("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.state.observed[e.resourceInstancePath],expression:"state.observed[resourceInstancePath]"}],attrs:{"x-small":"",title:"Resource Instance"+e.resourceInstancePath+" observed"}},[e._v("mdi-eye-outline")])],1),n("v-col",{staticClass:"pa-0",attrs:{cols:"7",lg:"3","align-self":"center"}},[n("v-fade-transition",{attrs:{"leave-absolute":""}},[n("resource-instance-control",{directives:[{name:"show",rawName:"v-show",value:!a,expression:"!open"}],attrs:{resourcedef:e.resource.def,endpoint:e.endpoint,resourcePath:e.resource.path,instanceId:e.resourceInstanceId}})],1)],1),n("v-col",{staticClass:"pa-0",class:{"text--disabled":!!e.resourceInstanceValue&&e.resourceInstanceValue.supposed},attrs:{cols:"5",lg:"4","align-self":"center"}},[n("v-fade-transition",{attrs:{"leave-absolute":""}},[n("simple-resource-instance-view",{directives:[{name:"show",rawName:"v-show",value:!a,expression:"!open"}],staticClass:"pr-3 text-truncate",attrs:{resourceInstance:e.resourceInstanceValue,resourcedef:e.resource.def}})],1)],1)],1)],1)]}}])}),n("v-expansion-panel-content",[n("resource-instance-view",{attrs:{endpoint:e.endpoint,resourceInstance:e.resourceInstanceValue,resourcedef:e.resource.def,resourcePath:e.resource.path,resourceInstanceId:e.resourceInstanceId}})],1)],1)},Ma=[],La=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{color:"grey lighten-5"}},[n("v-col",{attrs:{cols:"12",lg:"6",xl:"5"}},[n("resource-definition-view",{attrs:{resourcedef:e.resourcedef}})],1),n("v-col",[n("v-card",{attrs:{elevation:"0"}},[n("resource-instance-control",{attrs:{resourcedef:e.resourcedef,endpoint:e.endpoint,resourcePath:e.resourcePath,instanceId:e.resourceInstanceId}}),n("v-card-text",{staticClass:"font-weight-bold",class:{"text--primary":e.resourceInstance&&!e.resourceInstance.supposed}},[e._v(" "+e._s(e.resourceInstanceValueAsString)+" ")])],1)],1)],1)},Fa=[],Ba={components:{ResourceInstanceControl:fa,ResourceDefinitionView:Oa},props:{endpoint:String,resourcedef:Object,resourcePath:String,resourceInstance:Object,resourceInstanceId:Number},computed:{resourceInstanceValueAsString:function(){return this.resourceInstance?Kn(this.resourceInstance.val,this.resourcedef.type):""}}},Wa=Ba,Ua=Object(k["a"])(Wa,La,Fa,!1,null,null,null),Ka=Ua.exports;C()(Ua,{VCard:Ce["a"],VCardText:Se["c"],VCol:$e["a"],VRow:Re["a"]});var Ha=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{title:e.resourceInstanceValueAsString}},[e._v(" "+e._s(e.resourceInstanceValueAsString)+" ")])},Ja=[],Ga={props:{resourcedef:Object,resourceInstance:Object},computed:{resourceInstanceValueAsString:function(){return this.resourceInstance?Kn(this.resourceInstance.val,this.resourcedef.type):""}}},za=Ga,Qa=Object(k["a"])(za,Ha,Ja,!1,null,null,null),Xa=Qa.exports,Ya={components:{ResourceInstanceControl:fa,SimpleResourceInstanceView:Xa,ResourceInstanceView:Ka},props:{endpoint:String,resource:Object,resourceInstanceId:Number},computed:{state:function(){return this.$store.state[this.endpoint]},resourceInstancePath:function(){return"".concat(this.resource.path,"/").concat(this.resourceInstanceId)},resourceInstanceValue:function(){var e=this.state.data[this.resource.path];return e&&!e.isSingle?e.vals[this.resourceInstanceId]:null}}},Za=Ya,es=Object(k["a"])(Za,Aa,Ma,!1,null,null,null),ts=es.exports;C()(es,{VCol:$e["a"],VContainer:$["a"],VExpansionPanel:Da["a"],VExpansionPanelContent:Pa["a"],VExpansionPanelHeader:Ta["a"],VFadeTransition:Na["c"],VIcon:F["a"],VRow:Re["a"]});var ns=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("request-button",{attrs:{title:"Composite Observe"},on:{"on-click":e.observe}},[e._v("Obs")]),n("request-button",{attrs:{title:"Passive Cancel Obverse"},on:{"on-click":e.stopObserve}},[n("v-icon",{attrs:{dense:"",small:""}},[e._v("mdi-eye-remove-outline")])],1),n("request-button",{attrs:{title:"Composite Read"},on:{"on-click":e.read}},[e._v("R")]),n("request-button",{ref:"W",attrs:{title:"Composite Write"},on:{"on-click":e.openWriteDialog}},[e._v("W")]),n("composite-object-write-dialog",{attrs:{compositeObject:e.compositeObject,nodes:e.nodes},on:{write:function(t){return e.write(t)}},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}),n("composite-operation-setting-menu",{scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,s=t.attrs;return[n("v-btn",e._g(e._b({staticClass:"ma-1",attrs:{small:"",tile:"","min-width":"0",elevation:"0",title:"Composite Operation Settings"}},"v-btn",s,!1),a),[n("v-icon",{attrs:{small:""}},[e._v(" mdi-tune")])],1)]}}])})],1)},as=[],ss=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return[e._t("activator",null,{attrs:a,on:n})]}}],null,!0),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[n("v-card",[n("v-list",[n("v-list-item",[n("p",{staticClass:"subtitle-2"},[e._v(" ContentFormat used to encode "),n("strong",[e._v("LWM2M Paths")]),e._v(" for "),n("strong",[e._v("Read/Observe")]),e._v("-Composite Operation : ")])]),n("v-list-item",[n("v-list-item-action",[n("v-select",{attrs:{dense:"",items:e.compositePathFormatList},model:{value:e.compositePathFormat,callback:function(t){e.compositePathFormat=t},expression:"compositePathFormat"}})],1)],1),n("v-list-item",[n("p",{staticClass:"subtitle-2"},[e._v(" ContentFormat used to encode/decode "),n("strong",[e._v("LWM2M nodes")]),e._v(" for "),n("strong",[e._v("Read/Observe/Write")]),e._v("-Composite Operation : ")])]),n("v-list-item",[n("v-list-item-action",[n("v-select",{attrs:{"single-line":"",dense:"",items:e.compositeNodeFormatList},model:{value:e.compositeNodeFormat,callback:function(t){e.compositeNodeFormat=t},expression:"compositeNodeFormat"}})],1)],1)],1)],1)],1)},is=[],os={data:function(){return{menu:!1,compositePathFormatList:["SENML_JSON","SENML_CBOR"],compositeNodeFormatList:["SENML_JSON","SENML_CBOR"]}},computed:{compositePathFormat:Object(g["b"])("CompositePathFormat",{defaultValue:"SENML_CBOR"}),compositeNodeFormat:Object(g["b"])("CompositeNodeFormat",{defaultValue:"SENML_CBOR"})}},rs=os,cs=n("e449"),ls=Object(k["a"])(rs,ss,is,!1,null,null,null),us=ls.exports;C()(ls,{VCard:Ce["a"],VList:_e["a"],VListItem:ye["a"],VListItemAction:dt["a"],VMenu:cs["a"],VSelect:oe["a"]});var ds=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"hide-overlay":"",fullscreen:"",transition:"dialog-bottom-transition"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[e._v(' Write Composite Object "'+e._s(e.compositeObject.name)+'". ')]),n("v-card-text",[n("div",[e._v(' Only Writable "Singleresource", "Resource Instance" are supported. '),n("br"),e._v(" Nodes "+e._s(e.ignoredeNodes.join(", "))+' from "'+e._s(e.compositeObject.name)+'" will be ignored because there are not supported for Composite-Write. ')]),n("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.write.apply(null,arguments)}}},[n("v-container",{attrs:{fluid:""}},e._l(e.writableNodes,(function(t){return n("div",{key:t.path.toString()},[n("h4",{staticClass:"pa-1"},[e._v(e._s(t.path))]),"resource"==t.path.type?n("labelled-resource-input",{attrs:{resourcedef:t.resource.def},model:{value:e.nodesValue[t.path.toString()],callback:function(n){e.$set(e.nodesValue,t.path.toString(),n)},expression:"nodesValue[node.path.toString()]"}}):"resourceinstance"==t.path.type?n("labelled-resource-instance-input",{attrs:{resourcedef:t.resource.def},model:{value:e.nodesValue[t.path.toString()],callback:function(n){e.$set(e.nodesValue,t.path.toString(),n)},expression:"nodesValue[node.path.toString()]"}}):e._e()],1)})),0)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:e.write}},[e._v(" Write ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.show=!1}}},[e._v(" Cancel ")])],1)],1)],1)},ps=[],vs=(n("07ac"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"12",md:"2"}},[e.resourcedef.mandatory?n("v-subheader",[n("strong",[e._v(e._s(e.resourcedef.name)+" *")])]):n("v-subheader",[e._v(e._s(e.resourcedef.name)+" ")])],1),n("v-col",{attrs:{cols:"11",md:"9"}},[n("resource-input",{attrs:{resourcedef:e.resourcedef,hint:e.hint(e.resourcedef),value:e.value},on:{input:function(t){return e.$emit("input",t)}}})],1),n("v-col",{attrs:{cols:"1",md:"1"}},[n("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-icon",e._g({},a),[e._v(" mdi-help-circle-outline ")])]}}])},[n("p",{staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(e.resourcedef.description))])])],1)],1)}),fs=[],hs={components:{ResourceInput:On},props:{value:null,resourcedef:Object},methods:{hint:function(e){var t="";return e.mandatory&&(t+=" mandatory"),e.range&&(t+=" (Range: "+e.range+")"),t}}},ms=hs,bs=n("e0c7"),gs=Object(k["a"])(ms,vs,fs,!1,null,null,null),_s=gs.exports;C()(gs,{VCol:$e["a"],VIcon:F["a"],VRow:Re["a"],VSubheader:bs["a"],VTooltip:B["a"]});var ys=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"12",md:"2"}},[e.resourcedef.mandatory?n("v-subheader",[n("strong",[e._v(e._s(e.resourcedef.name)+" *")])]):n("v-subheader",[e._v(e._s(e.resourcedef.name)+" ")])],1),n("v-col",{attrs:{cols:"11",md:"9"}},[n("single-value-input",{attrs:{resourcedef:e.resourcedef,hint:e.hint(e.resourcedef),value:e.value},on:{input:function(t){return e.$emit("input",t)}}})],1),n("v-col",{attrs:{cols:"1",md:"1"}},[n("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-icon",e._g({},a),[e._v(" mdi-help-circle-outline ")])]}}])},[n("p",{staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(e.resourcedef.description))])])],1)],1)},Vs=[],xs={components:{SingleValueInput:hn},props:{value:null,resourcedef:Object},methods:{hint:function(e){var t="";return e.mandatory&&(t+=" mandatory"),e.range&&(t+=" (Range: "+e.range+")"),t}}},js=xs,ws=Object(k["a"])(js,ys,Vs,!1,null,null,null),Os=ws.exports;C()(ws,{VCol:$e["a"],VIcon:F["a"],VRow:Re["a"],VSubheader:bs["a"],VTooltip:B["a"]});var ks={components:{LabelledResourceInput:_s,LabelledResourceInstanceInput:Os},props:{value:Boolean,compositeObject:Object,nodes:Object},data:function(){return{nodesValue:{},supportedTypes:[]}},watch:{value:function(e){e&&(this.nodesValue={})}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},ignoredeNodes:function(){var e=this;return Object.values(this.nodes).filter((function(t){return!e.isSupported(t)})).map((function(e){return e.path.toString()}))},writableNodes:function(){var e=this;return Object.values(this.nodes).filter((function(t){return e.isSupported(t)}))}},methods:{isSupported:function(e){return("resourceinstance"==e.path.type||"resource"==e.path.type&&"single"==e.resource.def.instancetype)&&e.resource.def.operations.includes("W")},write:function(){this.show=!1,console.log(this.nodesValue),this.$emit("write",this.nodesValue)}}},Is=ks,Cs=Object(k["a"])(Is,ds,ps,!1,null,null,null),Ss=Cs.exports;C()(Cs,{VBtn:Ze["a"],VCard:Ce["a"],VCardActions:Se["a"],VCardText:Se["c"],VCardTitle:Se["d"],VContainer:$["a"],VDialog:st["a"],VForm:it["a"],VSpacer:ot["a"]});var $s=Object(g["b"])("timeout",{defaultValue:5}),Rs=Object(g["b"])("CompositePathFormat",{defaultValue:"SENML_CBOR"}),Ds=Object(g["b"])("CompositeNodeFormat",{defaultValue:"SENML_CBOR"}),Ps={components:{RequestButton:$t,CompositeOperationSettingMenu:us,CompositeObjectWriteDialog:Ss},props:{endpoint:String,compositeObject:Object,nodes:Object},data:function(){return{dialog:!1}},computed:{showDialog:{get:function(){return this.dialog},set:function(e){this.dialog=e,this.$refs.W.resetState()}}},methods:{requestPath:function(){return"api/clients/".concat(encodeURIComponent(this.endpoint),"/composite")},requestOption:function(){return"?timeout=".concat($s.get(),"&pathformat=").concat(Rs.get(),"&nodeformat=").concat(Ds.get())},updateState:function(e,t){var n=e.valid?e.success?"success":"error":"warning";t.changeState(n,e.status)},read:function(e){var t=this;this.axios.get("".concat(this.requestPath()).concat(this.requestOption()),{params:{paths:this.compositeObject.paths.join(",")}}).then((function(n){t.updateState(n.data,e),n.data.success&&t.$store.newNodes(t.endpoint,n.data.content)})).catch((function(){e.resetState()}))},observe:function(e){var t=this;this.axios.post("".concat(this.requestPath(),"/observe").concat(this.requestOption(),"&paths=").concat(this.compositeObject.paths.join(","))).then((function(n){t.updateState(n.data,e),n.data.success&&(t.$store.newNodes(t.endpoint,n.data.content),t.$store.setCompositeObjectObserved(t.endpoint,t.compositeObject,!0))})).catch((function(){e.resetState()}))},stopObserve:function(e){var t=this;this.axios.delete("".concat(this.requestPath(),"/observe?paths=").concat(this.compositeObject.paths.join(","))).then((function(){e.changeState("success"),t.$store.setObserved(t.endpoint,t.path,!1),t.$store.setCompositeObjectObserved(t.endpoint,t.compositeObject,!1)})).catch((function(){e.resetState()}))},openWriteDialog:function(){this.dialog=!0},write:function(e){var t=this,n=this.$refs.W,a=Object.entries(e).reduce((function(e,n){var a=Object(c["a"])(n,2),s=a[0],i=a[1],o=t.nodes[s];return e[s]=Nn(o.resource.def,o.path,i),e}),{});console.log(a),this.axios.put("".concat(this.requestPath()).concat(this.requestOption()),a).then((function(e){t.updateState(e.data,n),e.data.success&&t.$store.newNodes(t.endpoint,a,!0)})).catch((function(){n.resetState()}))}}},Ts=Ps,Ns=Object(k["a"])(Ts,ns,as,!1,null,null,null),Es=Ns.exports;C()(Ns,{VBtn:Ze["a"],VIcon:F["a"]});var qs={components:{ResourceExpansionPanel:qa,ResourceInstanceExpansionPanel:ts,CompositeObjectIcons:He,CompositeObjectControl:Es},props:{objectdefs:Array,allInstances:Object},data:function(){return{compositeObject:null}},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var e=this,t=Object(g["b"])("compositeObjects",{defaultValue:[]});this.compositeObject=t.get().find((function(t){return t.name==e.$route.params.compositeObjectName}))},createResources:function(e,t){return e?e.resourcedefs.map((function(n){return{path:"/".concat(e.id,"/").concat(t,"/").concat(n.id),def:n}})).filter((function(e){return e.def.operations.includes("R")||e.def.operations.includes("W")})):null}},computed:{endpoint:function(){return this.$route.params.endpoint},state:function(){return this.$store.state[this.endpoint]},compositeObservationKey:function(){return this.$store.compositeObjectToKey(this.compositeObject)},lwm2mNodes:function(){var e=this;if(!this.objectdefs||0==this.objectdefs.length)return{};var t=this.compositeObject.paths.map((function(t){var n=new Be(t);if("invalid"==n.type)return{path:n};var a=null;if(null!=n.objectid&&(a=e.objectdefs.find((function(e){return e.id==n.objectid})),null==a))return{path:n,unknowObject:!0};var s=!0;if(null!=n.objectinstanceid){var i=e.allInstances[n.objectid];i&&(s=!i.includes(n.objectinstanceid))}switch(n.type){case"object":var o=e.allInstances[n.objectid],r=[];return o&&(r=o.map((function(t){var n={};return n.id=t,n.path="/".concat(a.id,"/").concat(n.id),n.resources=e.createResources(a,n.id),n}))),{path:n,objectdef:a,instances:r};case"objectinstance":return{path:n,objectdef:a,instanceNotAvailable:s,instanceid:n.objectinstanceid,resources:e.createResources(a,n.objectinstanceid)};case"resource":var c=a.resourcedefs.find((function(e){return e.id==n.resourceid}));return{path:n,instanceNotAvailable:s,resource:{path:n.toString(),def:c}};case"resourceinstance":var l=a.resourcedefs.find((function(e){return e.id==n.resourceid}));return{path:n,instanceNotAvailable:s,resourceInstanceId:n.resourceinstanceid,resource:{path:n.toResourcePath(),def:l}};default:return{path:n}}}));return t.reduce((function(e,t){return e[t.path.toString()]=t,e}),{})}}},As=qs,Ms=n("0393"),Ls=Object(k["a"])(As,gt,_t,!1,null,null,null),Fs=Ls.exports;C()(Ls,{VDivider:G["a"],VExpansionPanels:Ms["a"],VIcon:F["a"],VSheet:De["a"]});var Bs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.objectdef?n("v-sheet",{staticClass:"pa-4",attrs:{color:"grey lighten-5",width:"100%"}},[n("div",[n("h3",[n("object-icon",{attrs:{objectId:e.objectdef.id}}),e._v(" "+e._s(e.objectdef.name)+"-v"+e._s(e.objectdef.version)+" "),n("object-control",{key:e.objectdef.id,attrs:{id:"object.id",objectdef:e.objectdef,endpoint:e.$route.params.endpoint}})],1),n("p",{staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(e.objectdef.description))])]),n("v-divider"),e._l(e.instances,(function(t){return n("div",{key:e.objectdef.id+"/"+t},[n("instance-view",{attrs:{objectdef:e.objectdef,instanceId:t,endpoint:e.$route.params.endpoint}})],1)}))],2):e._e()},Ws=[],Us=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h4",{staticClass:"pa-1"},[n("span",{staticClass:"d-flex"},[n("span",{staticClass:"align-self-center"},[e._v(" Instance "+e._s(e.instanceId)+" : ")]),n("instance-control",{staticClass:"mr-auto",attrs:{objectdef:e.objectdef,endpoint:e.endpoint,id:e.instanceId,path:e.instancePath}}),n("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.state.observed[e.instancePath],expression:"state.observed[instancePath]"}],staticClass:"pr-3",attrs:{small:"",title:"Instance "+e.instancePath+" observed"}},[e._v("mdi-eye-outline")])],1)]),e.objectdef&&"number"==typeof e.instanceId&&e.endpoint?n("v-expansion-panels",{attrs:{accordion:"",multiple:"",dense:"",tile:""}},e._l(e.resources,(function(t){return n("resource-expansion-panel",{key:t.path,attrs:{resource:t,endpoint:e.endpoint}})})),1):e._e()],1)},Ks=[],Hs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("request-button",{attrs:{title:"Observe "+e.path},on:{"on-click":e.observe}},[e._v("Obs")]),n("request-button",{attrs:{title:"Passive Cancel Obverse "+e.path},on:{"on-click":e.stopObserve}},[n("v-icon",{attrs:{dense:"",small:""}},[e._v("mdi-eye-remove-outline")])],1),n("request-button",{attrs:{title:"Read "+e.path},on:{"on-click":e.read}},[e._v("R")]),n("request-button",{ref:"W",attrs:{title:"Write "+e.path},on:{"on-click":e.openWriteDialog}},[e._v("W")]),n("request-button",{attrs:{title:"Delete "+e.path},on:{"on-click":e.del}},[e._v("Delete")]),n("instance-write-dialog",{attrs:{objectdef:e.objectdef,id:e.id},on:{update:function(t){return e.write(t,!1)},replace:function(t){return e.write(t,!0)}},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}})],1)},Js=[],Gs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"hide-overlay":"",fullscreen:"",transition:"dialog-bottom-transition"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[e._v(' Write Instance "'+e._s(e.id)+'" for Object '+e._s(e.objectdef.name)+" ("+e._s(e.objectdef.id)+") ")]),n("v-card-text",[n("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.write.apply(null,arguments)}}},[n("v-container",{attrs:{fluid:""}},e._l(e.writableResourceDef,(function(t){return n("resource-input",{key:t.id,attrs:{resourcedef:t},model:{value:e.instanceValue[t.id],callback:function(n){e.$set(e.instanceValue,t.id,n)},expression:"instanceValue[resourcedef.id]"}})})),1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:e.update}},[e._v(" Update ")]),n("v-btn",{attrs:{text:""},on:{click:e.replace}},[e._v(" Replace ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.show=!1}}},[e._v(" Cancel ")])],1)],1)],1)},zs=[],Qs={components:{ResourceInput:_s},props:{value:Boolean,objectdef:Object,id:Number},data:function(){return{instanceValue:{}}},watch:{value:function(e){e&&(this.instanceValue={})}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},writableResourceDef:function(){return this.objectdef.resourcedefs.filter((function(e){return e.operations.includes("W")}))}},methods:{replace:function(){this.show=!1,this.$emit("replace",this.instanceValue)},update:function(){this.show=!1,this.$emit("update",this.instanceValue)}}},Xs=Qs,Ys=Object(k["a"])(Xs,Gs,zs,!1,null,null,null),Zs=Ys.exports;C()(Ys,{VBtn:Ze["a"],VCard:Ce["a"],VCardActions:Se["a"],VCardText:Se["c"],VCardTitle:Se["d"],VContainer:$["a"],VDialog:st["a"],VForm:it["a"],VSpacer:ot["a"]});var ei=Object(g["b"])("timeout",{defaultValue:5}),ti=Object(g["b"])("multiformat",{defaultValue:"TLV"}),ni={components:{RequestButton:$t,InstanceWriteDialog:Zs},props:{endpoint:String,path:String,objectdef:Object,id:Number},data:function(){return{dialog:!1}},computed:{showDialog:{get:function(){return this.dialog},set:function(e){this.dialog=e,this.$refs.W.resetState()}}},methods:{requestPath:function(){return"api/clients/".concat(encodeURIComponent(this.endpoint)).concat(this.path)},requestOption:function(){return"?timeout=".concat(ei.get(),"&format=").concat(ti.get())},updateState:function(e,t){var n=e.valid?e.success?"success":"error":"warning";t.changeState(n,e.status)},read:function(e){var t=this;this.axios.get("".concat(this.requestPath()).concat(this.requestOption())).then((function(n){t.updateState(n.data,e),n.data.success&&t.$store.newInstanceValue(t.endpoint,t.path,n.data.content.resources)})).catch((function(){e.resetState()}))},observe:function(e){var t=this;this.axios.post("".concat(this.requestPath(),"/observe").concat(this.requestOption())).then((function(n){t.updateState(n.data,e),n.data.success&&(t.$store.newInstanceValue(t.endpoint,t.path,n.data.content.resources),t.$store.setObserved(t.endpoint,t.path,!0))})).catch((function(){e.resetState()}))},stopObserve:function(e){var t=this;this.axios.delete("".concat(this.requestPath(),"/observe")).then((function(){e.changeState("success"),t.$store.setObserved(t.endpoint,t.path,!1)})).catch((function(){e.resetState()}))},openWriteDialog:function(){this.dialog=!0},write:function(e,t){var n=this,a=this.$refs.W,s=$n(this.objectdef,this.id,e);this.axios.put("".concat(this.requestPath()).concat(this.requestOption(),"&replace=").concat(t),s).then((function(e){n.updateState(e.data,a),e.data.success&&n.$store.newInstanceValue(n.endpoint,n.path,s.resources,!0,!t)})).catch((function(){a.resetState()}))},del:function(e){var t=this;this.axios.delete("".concat(this.requestPath(),"?timeout=").concat(ei.get())).then((function(n){t.updateState(n.data,e),n.data.success&&t.$store.removeInstanceValue(t.endpoint,t.path)})).catch((function(){e.resetState()}))}}},ai=ni,si=Object(k["a"])(ai,Hs,Js,!1,null,null,null),ii=si.exports;C()(si,{VIcon:F["a"]});var oi={components:{InstanceControl:ii,ResourceExpansionPanel:qa},props:{objectdef:Object,instanceId:Number,endpoint:String},computed:{state:function(){return this.$store.state[this.endpoint]},resources:function(){var e=this;return this.objectdef.resourcedefs.map((function(t){return{path:"/".concat(e.objectdef.id,"/").concat(e.instanceId,"/").concat(t.id),def:t}}))},instancePath:function(){return"/".concat(this.objectdef.id,"/").concat(this.instanceId)}}},ri=oi,ci=Object(k["a"])(ri,Us,Ks,!1,null,null,null),li=ci.exports;C()(ci,{VExpansionPanels:Ms["a"],VIcon:F["a"]});var ui=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("request-button",{ref:"C",attrs:{title:"Create Instance /"+e.objectdef.id},on:{"on-click":e.openCreateDialog}},[e._v("Create")]),n("instance-create-dialog",{attrs:{objectdef:e.objectdef},on:{create:function(t){return e.create(t)}},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}})],1)},di=[],pi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"hide-overlay":"",fullscreen:"",transition:"dialog-bottom-transition"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[e._v(" Create new Instance for Object "+e._s(e.objectdef.name)+" ("+e._s(e.objectdef.id)+") ")]),n("v-card-text",[n("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.write.apply(null,arguments)}}},[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"12",md:"2"}},[n("v-subheader",[e._v("Instance Id ")])],1),n("v-col",{attrs:{cols:"12",md:"9"}},[n("v-text-field",{attrs:{label:"Integer",hint:"Let this field empty to let the client choose the instance ID"},model:{value:e.instance.id,callback:function(t){e.$set(e.instance,"id",t)},expression:"instance.id"}})],1)],1),e._l(e.writableResourceDef,(function(t){return n("resource-input",{key:t.id,attrs:{resourcedef:t},model:{value:e.instance.resources[t.id],callback:function(n){e.$set(e.instance.resources,t.id,n)},expression:"instance.resources[resourcedef.id]"}})}))],2)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:e.create}},[e._v(" Create ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.show=!1}}},[e._v(" Cancel ")])],1)],1)],1)},vi=[],fi={components:{ResourceInput:_s},props:{value:Boolean,objectdef:Object},data:function(){return{instance:{id:null,resources:{}}}},watch:{value:function(e){e&&(this.instance={id:null,resources:{}},this.id=null)}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},writableResourceDef:function(){return this.objectdef.resourcedefs.filter((function(e){return e.operations.includes("W")}))}},methods:{create:function(){this.show=!1,this.$emit("create",this.instance)}}},hi=fi,mi=Object(k["a"])(hi,pi,vi,!1,null,null,null),bi=mi.exports;C()(mi,{VBtn:Ze["a"],VCard:Ce["a"],VCardActions:Se["a"],VCardText:Se["c"],VCardTitle:Se["d"],VCol:$e["a"],VDialog:st["a"],VForm:it["a"],VRow:Re["a"],VSpacer:ot["a"],VSubheader:bs["a"],VTextField:z["a"]});var gi=Object(g["b"])("timeout",{defaultValue:5}),_i=Object(g["b"])("multiformat",{defaultValue:"TLV"}),yi={components:{RequestButton:$t,InstanceCreateDialog:bi},props:{objectdef:Object,endpoint:String},data:function(){return{dialog:!1}},computed:{showDialog:{get:function(){return this.dialog},set:function(e){this.dialog=e,this.$refs.C.resetState()}}},methods:{requestPath:function(){return"api/clients/".concat(encodeURIComponent(this.endpoint),"/").concat(this.objectdef.id,"?timeout=").concat(gi.get(),"&format=").concat(_i.get())},updateState:function(e,t){var n=e.valid?e.success?"success":"error":"warning";t.changeState(n,e.status)},openCreateDialog:function(){this.dialog=!0},create:function(e){var t=this,n=this.$refs.C,a=$n(this.objectdef,e.id,e.resources);this.axios.post(this.requestPath(),a).then((function(e){t.updateState(e.data,n)})).catch((function(){n.resetState()}))}}},Vi=yi,xi=Object(k["a"])(Vi,ui,di,!1,null,null,null),ji=xi.exports,wi={components:{InstanceView:li,ObjectIcon:me,ObjectControl:ji},props:{objectdef:Object,instances:Array}},Oi=wi,ki=Object(k["a"])(Oi,Bs,Ws,!1,null,null,null),Ii=ki.exports;C()(ki,{VDivider:G["a"],VSheet:De["a"]});var Ci=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{staticClass:"elevation-0",attrs:{headers:e.headers,items:e.securityInfos,"item-key":"endpoint","sort-by":"endpoint",dense:"",search:e.search},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:""}},[e.$vuetify.breakpoint.smAndUp?n("v-toolbar-title",[e._v("Security Information")]):e._e(),e.$vuetify.breakpoint.smAndUp?n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}):e._e(),n("v-text-field",{staticClass:"pa-2",attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),n("v-btn",{staticClass:"mb-2",attrs:{dark:""},on:{click:function(t){return t.stopPropagation(),e.openNewSec()}}},[e._v(" "+e._s(e.$vuetify.breakpoint.smAndDown?"":"Add Security Information")+" "),n("v-icon",{attrs:{right:!e.$vuetify.breakpoint.smAndDown,dark:""}},[e._v(" mdi-key-plus ")])],1),n("security-info-dialog",{attrs:{initialValue:e.editedSecurityInfo},on:{new:function(t){return e.newSec(t)},edit:function(t){return e.editSec(t)}},model:{value:e.dialogOpened,callback:function(t){e.dialogOpened=t},expression:"dialogOpened"}})],1)]},proxy:!0},{key:"item.mode",fn:function(e){var t=e.item;return[n("security-info-chip",{attrs:{securityInfo:t}})]}},{key:"item.details",fn:function(t){var a=t.item;return["psk"==a.mode?n("div",{staticClass:"pa-1",staticStyle:{"word-break":"break-all"}},[n("strong",[e._v("Identity:")]),e._v(" "),n("code",[e._v(e._s(a.details.identity))]),n("br"),n("strong",[e._v("Key:")]),n("code",{staticClass:"text-uppercase"},[e._v(e._s(a.details.key))])]):e._e(),"rpk"==a.mode?n("div",{staticClass:"pa-1",staticStyle:{"word-break":"break-all"}},[n("strong",[e._v("Public Key:")]),n("code",{staticClass:"text-uppercase"},[e._v(e._s(a.details.key))])]):e._e(),"x509"==a.mode?n("div",{staticClass:"pa-1",staticStyle:{"word-break":"break-all"}},[n("strong",[e._v("X509 certificate with CN equals :")]),n("code",[e._v(e._s(a.endpoint))])]):e._e()]}},{key:"item.actions",fn:function(t){var a=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:"",disabled:"unsupported"==a.mode},on:{click:function(t){return t.stopPropagation(),e.openEditSec(a)}}},[e._v(" mdi-pencil ")]),n("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteSec(a)}}},[e._v(" mdi-delete ")])]}}])})},Si=[],$i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"hide-overlay":"",fullscreen:"",transition:"dialog-bottom-transition"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[n("span",[e._v(e._s(e.editMode?"Edit Security Information":"Add Security Information"))])]),n("v-card-text",[n("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{rules:[function(e){return!!e||"Endpoint is required"}],label:"Endpoint",required:"",autofocus:!e.editMode,disabled:e.editMode},model:{value:e.securityInfo.endpoint,callback:function(t){e.$set(e.securityInfo,"endpoint",t)},expression:"securityInfo.endpoint"}}),n("security-info-input",{attrs:{mode:e.securityInfo.mode,details:e.securityInfo.details},on:{"update:mode":function(t){return e.$set(e.securityInfo,"mode",t)},"update:details":function(t){return e.$set(e.securityInfo,"details",t)}}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:"",disabled:!e.valid},on:{click:function(t){return e.$emit(e.editMode?"edit":"new",e.securityInfo)}}},[e._v(" "+e._s(e.editMode?"Save":"Add")+" ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.show=!1}}},[e._v(" Cancel ")])],1)],1)],1)},Ri=[],Di=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-select",{attrs:{items:e.modes,label:"Security Mode"},on:{input:function(t){return e.modeChanged()}},model:{value:e.internalMode,callback:function(t){e.internalMode=t},expression:"internalMode"}}),"psk"==e.internalMode?n("psk-input",{on:{input:function(t){return e.$emit("update:details",e.pskValue)}},model:{value:e.pskValue,callback:function(t){e.pskValue=t},expression:"pskValue"}}):e._e(),"rpk"==e.internalMode?n("rpk-input",{on:{input:function(t){return e.$emit("update:details",e.rpkValue)}},model:{value:e.rpkValue,callback:function(t){e.rpkValue=t},expression:"rpkValue"}}):e._e(),"x509"==e.internalMode?n("x-509-input"):e._e()],1)},Pi=[],Ti=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-textarea",{attrs:{filled:"",label:"Identity",rules:[function(e){return!!e||"Identity is required"}],spellcheck:"false"},on:{input:function(t){return e.$emit("input",e.psk)}},model:{value:e.psk.identity,callback:function(t){e.$set(e.psk,"identity",t)},expression:"psk.identity"}}),n("v-textarea",{attrs:{filled:"",label:"Key",hint:"Hexadecimal format",rules:[function(e){return!!e||"Key is required"},function(e){return/^[0-9a-fA-F]+$/.test(e)||"Hexadecimal format is expected"}],spellcheck:"false"},on:{input:function(t){return e.$emit("input",e.psk)}},model:{value:e.psk.key,callback:function(t){e.$set(e.psk,"key",t)},expression:"psk.key"}})],1)},Ni=[],Ei={props:{value:Object},data:function(){return{psk:this.value}},watch:{value:function(e){this.psk=e}}},qi=Ei,Ai=Object(k["a"])(qi,Ti,Ni,!1,null,null,null),Mi=Ai.exports;C()(Ai,{VTextarea:nn["a"]});var Li=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-textarea",{attrs:{filled:"",label:"Client Public Key",rules:[function(e){return!!e||"Public is required"},function(e){return/^[0-9a-fA-F]+$/.test(e)||"Hexadecimal format is expected"}],hint:"SubjectPublicKeyInfo der encoded in Hexadecimal",spellcheck:"false"},on:{input:function(t){return e.$emit("input",e.rpk)}},model:{value:e.rpk.key,callback:function(t){e.$set(e.rpk,"key",t)},expression:"rpk.key"}})],1)},Fi=[],Bi={props:{value:Object},data:function(){return{rpk:this.value}},watch:{value:function(e){e&&(this.rpk=this.value)}}},Wi=Bi,Ui=Object(k["a"])(Wi,Li,Fi,!1,null,null,null),Ki=Ui.exports;C()(Ui,{VTextarea:nn["a"]});var Hi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("Use X509 certificate.")])},Ji=[],Gi={},zi=Object(k["a"])(Gi,Hi,Ji,!1,null,null,null),Qi=zi.exports,Xi={components:{PskInput:Mi,RpkInput:Ki,X509Input:Qi},props:{mode:String,details:Object},data:function(){return{modes:["psk","rpk","x509"],internalMode:"psk",pskValue:{},rpkValue:{}}},beforeMount:function(){this.initMode(),this.initDetails()},watch:{mode:function(){this.initMode()},details:function(){this.initDetails()}},methods:{initMode:function(){this.internalMode=this.mode},initDetails:function(){switch(this.mode){case"psk":this.pskValue=this.details,this.rpkValue={};break;case"rpk":this.pskValue={},this.rpkValue=this.details;break;case"x509":this.rpkValue={},this.pskValue={};break}},modeChanged:function(){switch(this.$emit("update:mode",this.internalMode),this.internalMode){case"psk":this.$emit("update:details",this.pskValue);break;case"rpk":this.$emit("update:details",this.rpkValue);break;case"x509":this.$emit("update:details",{});break}}}},Yi=Xi,Zi=Object(k["a"])(Yi,Di,Pi,!1,null,null,null),eo=Zi.exports;C()(Zi,{VSelect:oe["a"]});var to={components:{SecurityInfoInput:eo},props:{value:Boolean,initialValue:Object},data:function(){return{securityInfo:{},valid:!0,editMode:!1}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},watch:{value:function(e){e&&(this.$refs.form&&this.$refs.form.resetValidation(),this.initialValue?(this.securityInfo=JSON.parse(JSON.stringify(this.initialValue)),this.editMode=!0):(this.securityInfo={mode:"psk",details:{}},this.editMode=!1))}}},no=to,ao=Object(k["a"])(no,$i,Ri,!1,null,null,null),so=ao.exports;C()(ao,{VBtn:Ze["a"],VCard:Ce["a"],VCardActions:Se["a"],VCardText:Se["c"],VCardTitle:Se["d"],VDialog:st["a"],VForm:it["a"],VSpacer:ot["a"],VTextField:z["a"]});var io=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.securityInfo?n("div",[n("v-chip",{attrs:{small:""}},[n("v-icon",{attrs:{left:"",small:""}},[e._v(" "+e._s(e.modeIcon)+" ")]),e._v(" "+e._s(e.securityInfo.mode)+" ")],1)],1):n("div",[n("v-chip",{attrs:{small:""}},[n("v-icon",{attrs:{left:"",small:""}},[e._v(" mdi-lock-open-remove ")]),e._v(" Nothing ")],1)],1)},oo=[];function ro(e){var t={};return t.endpoint=e.endpoint,t.mode=co(e),"unsupported"!=t.mode&&"x509"!=t.mode&&(t.details=e[t.mode]),t}function co(e){return e.x509?"x509":e.psk?"psk":e.rpk?"rpk":"unsupported"}function lo(e){switch(e){case"x509":return"mdi-certificate";case"psk":return"mdi-lock";case"rpk":return"mdi-key-change";default:return"mdi-help-rhombus-outline"}}function uo(e,t){var n={};return n.endpoint=t,"x509"==e.mode?n[e.mode]=!0:"unsupported"!=e.mode&&(n[e.mode]=e.details),n}var po={props:{securityInfo:Object},computed:{modeIcon:function(){return lo(this.securityInfo.mode)}}},vo=po,fo=n("cc20"),ho=Object(k["a"])(vo,io,oo,!1,null,null,null),mo=ho.exports;C()(ho,{VChip:fo["a"],VIcon:F["a"]});var bo={components:{SecurityInfoDialog:so,SecurityInfoChip:mo},data:function(){return{dialogOpened:!1,headers:[{text:"Endpoint",value:"endpoint"},{text:"Security mode",value:"mode"},{text:"Details",value:"details",sortable:!1,width:"60%"},{text:"Actions",value:"actions",sortable:!1}],search:"",securityInfos:[],editedSecurityInfo:{}}},beforeMount:function(){var e=this;this.axios.get("api/security/clients").then((function(t){return e.securityInfos=t.data.map((function(e){return ro(e)}))}))},methods:{openNewSec:function(){this.editedSecurityInfo=null,this.dialogOpened=!0},newSec:function(e){var t=this;this.axios.put("api/security/clients/",uo(e,e.endpoint)).then((function(){t.securityInfos.push(e),t.dialogOpened=!1}))},openEditSec:function(e){this.editedSecurityInfo=e,this.dialogOpened=!0},editSec:function(e){var t=this;this.axios.put("api/security/clients/",uo(e,e.endpoint)).then((function(){t.securityInfos=t.securityInfos.map((function(t){return t.endpoint==e.endpoint?e:t})),t.dialogOpened=!1}))},deleteSec:function(e){var t=this;this.indexToRemove=this.securityInfos.indexOf(e),this.axios.delete("api/security/clients/"+encodeURIComponent(e.endpoint)).then((function(){t.securityInfos.splice(t.indexToRemove,1)}))}}},go=bo,_o=Object(k["a"])(go,Ci,Si,!1,null,null,null),yo=_o.exports;C()(_o,{VBtn:Ze["a"],VDataTable:J["a"],VDivider:G["a"],VIcon:F["a"],VTextField:z["a"],VToolbar:Q["a"],VToolbarTitle:X["a"]});var Vo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pa-5"},[n("v-card",{attrs:{elevation:"0"}},[n("v-card-text",[n("v-card-title",{staticClass:"justify-center"},[e._v(" Server Information ")]),n("v-card-subtitle",{staticClass:"text-center"},[e._v(" Here some information about this server. ")])],1)],1),n("v-row",[n("v-col",{attrs:{md:"3",cols:"12"}},[n("v-card",{attrs:{outlined:""}},[n("v-list-item",{attrs:{"three-line":""}},[n("v-list-item-content",[n("div",{staticClass:"text-overline mb-4"},[e._v(" CoAP Endpoint ")]),n("v-list-item-title",{staticClass:"text-h5 mb-1"},[e._v(" Server URL ")]),n("v-list-item-subtitle",[e._v("Available endpoints for this server: ")])],1),n("v-icon",[e._v("mdi-access-point-network")])],1),n("v-card-text",[n("ul",[n("li",[n("code",[n("strong",[e._v(e._s(e.coapurl))])]),e._v(": CoAP over UDP. ")]),n("li",[n("code",[n("strong",[e._v(e._s(e.coapsurl))])]),e._v(": CoAP over DTLS. ")])])])],1)],1),e.pubkey?n("v-col",{attrs:{md:"4",cols:"12"}},[n("v-card",{attrs:{outlined:""}},[n("v-list-item",{attrs:{"three-line":""}},[n("v-list-item-content",[n("div",{staticClass:"text-overline mb-4"},[e._v(" RPK ")]),n("v-list-item-title",{staticClass:"text-h5 mb-1"},[e._v(" Server Public Key ")]),n("v-list-item-subtitle",{staticClass:"font-italic"},[e._v(" SubjectPublicKeyInfo der encoded ")])],1),n("v-icon",[e._v("mdi-key")]),n("v-card-actions",[n("v-btn",{attrs:{icon:"",title:"Download Public Key"},on:{click:function(t){return e.saveFile(e.pubkeyFileName,e.pubkey.bytesDer)}}},[n("v-icon",[e._v("mdi-download")])],1)],1)],1),n("v-card-text",[n("p",[e._v(" If you want to connect a client using DTLS with Raw Public Key(RPK) mode, your client need to trust this key to accept DTLS connection with this server. ")]),n("u",[e._v("Elliptic Curve parameters :")]),n("div",[n("code",[e._v(e._s(e.pubkey.params))])]),n("u",[e._v("Public x coord :")]),n("div",[n("code",[e._v(e._s(e.pubkey.x))])]),n("u",[e._v("Public y coord :")]),n("div",[n("code",[e._v(e._s(e.pubkey.y))])]),n("p",[n("u",[e._v("Hex : ")])]),n("div",{staticClass:"key"},[e._v(" "+e._s(e.pubkey.hexDer)+" ")]),n("br"),n("u",[e._v("Base64 : ")]),n("div",{staticClass:"key"},[e._v(" "+e._s(e.pubkey.b64Der)+" ")])])],1)],1):e._e(),e.certificate?n("v-col",{attrs:{md:"5",cols:"12"}},[n("v-card",{attrs:{outlined:""}},[n("v-list-item",{attrs:{"three-line":""}},[n("v-list-item-content",[n("div",{staticClass:"text-overline mb-4"},[e._v(" x509 ")]),n("v-list-item-title",{staticClass:"text-h5 mb-1"},[e._v(" Server Certificate ")]),n("v-list-item-subtitle",{staticClass:"font-italic"},[e._v(" x509v3 der encoded ")])],1),n("v-icon",[e._v("mdi-certificate")]),n("v-card-actions",[n("v-btn",{attrs:{icon:"",title:"Download Certificate"},on:{click:function(t){return e.saveFile(e.certFileName,e.certificate.bytesDer)}}},[n("v-icon",[e._v("mdi-download")])],1)],1)],1),n("v-card-text",[n("p",[e._v(" If you want to connect a client using DTLS with certificate(x509) mode, your client need to trust this certificate to accept DTLS connection with this server. ")]),n("u",[e._v("Hex : ")]),n("div",{staticClass:"key"},[e._v(" "+e._s(e.certificate.hexDer)+" ")]),n("br"),n("u",[e._v("Base64 : ")]),n("div",{staticClass:"key"},[e._v(" "+e._s(e.certificate.b64Der)+" ")])])],1)],1):e._e()],1)],1)},xo=[];n("c19f");function jo(e){var t=[];for(var n in e)t[n]=e[n].toString(16).toUpperCase(),1===t[n].length&&(t[n]="0"+t[n]);return t.join("")}function wo(e){for(var t=atob(e),n=t.length,a=new Uint8Array(new ArrayBuffer(n)),s=0;s<n;s++)a[s]=t.charCodeAt(s);return a}var Oo=n("21a6"),ko={props:{pubkeyFileName:String,certFileName:String},data:function(){return{coapurl:"",coapsurl:"",certificate:{},pubkey:{}}},methods:{saveFile:function(e,t){var n=new Blob([t],{type:"application/octet-stream"});Object(Oo["saveAs"])(n,e)}},beforeMount:function(){var e=this;this.axios.get("api/server/endpoint").then((function(t){e.coapurl="coap://".concat(location.hostname,":").concat(t.data.unsecuredEndpointPort),e.coapsurl="coaps://".concat(location.hostname,":").concat(t.data.securedEndpointPort)})),this.axios.get("api/server/security").then((function(t){t.data.certificate?(e.certificate=t.data.certificate,e.certificate.bytesDer=wo(e.certificate.b64Der),e.certificate.hexDer=jo(e.certificate.bytesDer),e.pubkey=t.data.certificate.pubkey,e.pubkey.bytesDer=wo(e.pubkey.b64Der),e.pubkey.hexDer=jo(e.pubkey.bytesDer)):t.data.pubkey&&(e.certificate=null,e.pubkey=t.data.pubkey,e.pubkey.bytesDer=wo(e.pubkey.b64Der),e.pubkey.hexDer=jo(e.pubkey.bytesDer))}))}},Io=ko,Co=(n("8695"),Object(k["a"])(Io,Vo,xo,!1,null,null,null)),So=Co.exports;C()(Co,{VBtn:Ze["a"],VCard:Ce["a"],VCardActions:Se["a"],VCardSubtitle:Se["b"],VCardText:Se["c"],VCardTitle:Se["d"],VCol:$e["a"],VIcon:F["a"],VListItem:ye["a"],VListItemContent:Ve["a"],VListItemSubtitle:Ve["b"],VListItemTitle:Ve["c"],VRow:Re["a"]});var $o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"about"},[a("v-row",{staticClass:"text-center pa-5"},[a("v-col",{attrs:{cols:"12"}},[a("v-img",{staticClass:"my-3",attrs:{src:n("f907"),contain:"",height:"200"}})],1),a("v-col",{staticClass:"mb-4",attrs:{cols:"12"}},[a("h1",{staticClass:"display-1 font-weight-bold mb-3"},[e._v(" Leshan Server Demo ")]),a("p",{staticClass:"subheading font-weight-regular"},[e._v(" This is a "),a("a",{attrs:{href:"https://github.com/eclipse/leshan/wiki/F.A.Q.#could-i-reuse-leshan--demo-",target:"_blank"}},[a("strong",[e._v("LWM2M Server Demo")])]),e._v(" based on java "),a("a",{attrs:{href:"https://www.eclipse.org/leshan/",target:"_blank"}},[a("strong",[e._v("Leshan")])]),e._v(" library. "),a("br"),e._v("If you find any issue, please "),a("a",{attrs:{href:"https://www.eclipse.org/leshan/",target:"_blank"}},[e._v("report it")]),e._v(". ")]),e.version&&e.commitid?a("p",{staticClass:"subheading font-weight-regular"},[e._v(" Version "),a("a",{attrs:{href:"https://github.com/eclipse/leshan/tree/"+e.commitid,target:"_blank"}},[a("strong",[e._v(e._s(e.version))])])]):e._e()])],1)],1)},Ro=[],Do={data:function(){return{version:"2.0.0-SNAPSHOT",commitid:"0f8690ec6f1a4567b8543c8733d7c7750e9f7499"}}},Po=Do,To=n("adda"),No=Object(k["a"])(Po,$o,Ro,!1,null,null,null),Eo=No.exports;C()(No,{VCol:$e["a"],VImg:To["a"],VRow:Re["a"]});var qo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card-title",[e._v("Name: "+e._s(e.info.name))]),n("v-card-subtitle",[e._v(" Capacity: "+e._s(e.info.capacity)),n("br"),e._v(" Nr of reservations: "+e._s(e.info.reservations)),n("br"),e._v(" Vehicles in lot: "+e._s(e.info.vehicles)),n("br"),e._v(" Rate p/h: "+e._s(e.info.rate)),n("br"),n("request-button",{ref:"rate",attrs:{title:"Rate"},on:{"on-click":e.openRateDialog}},[e._v("Change rate")]),e.showRateDialog?n("parkinglot-rate-dialog",{on:{changeRate:function(t){return e.changeRate(t)}},model:{value:e.showRateDialog,callback:function(t){e.showRateDialog=t},expression:"showRateDialog"}}):e._e()],1),e.loading?e._e():n("v-data-table",{staticClass:"elevation-0 fill-height ma-3",attrs:{dense:"",headers:e.headers,items:e.parkingspots,"item-key":"endpoint","items-per-page":10,search:e.search},scopedSlots:e._u([{key:"item.parkingspotState",fn:function(t){var n=t.item;return[e._v(" "+e._s(n.parkingspotState)+" ")]}},{key:"item.textdisplay",fn:function(t){var a=t.item;return[n("div",{style:{"background-color":a.textdisplay,color:a.textdisplay}},[e._v(".")])]}},{key:"item.actions",fn:function(t){var a=t.item;return["Free"==a.parkingspotState?n("request-button",{ref:"reserve",attrs:{title:"Reserve"},on:{"on-click":e.openWriteDialog}},[e._v("Reserve")]):e._e(),e.showDialog?n("parkinglot-license-plate-dialog",{on:{reserve:function(t){return e.reserve(t,a)}},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}):e._e()]}}],null,!1,1853026484)}),e.loading?e._e():n("v-data-table",{staticClass:"elevation-0 fill-height ma-3",attrs:{dense:"",headers:e.vehiclecounterHeaders,items:e.vehiclecounters,"item-key":"endpoint","items-per-page":10,search:e.search},scopedSlots:e._u([{key:"item.lastPlate",fn:function(t){var n=t.item;return[e._v(" "+e._s(n.lastPlate)+" ")]}}],null,!1,49367407)})],1)},Ao=[],Mo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"hide-overlay":"",fullscreen:"",transition:"dialog-bottom-transition"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[e._v(" Reserve parking plot ")]),n("v-card-text",[n("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.reserve.apply(null,arguments)}}},[n("v-text-field",{attrs:{label:"License plate"},on:{input:function(t){return e.input(t)}}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:e.reserve}},[e._v(" Reserve ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.show=!1}}},[e._v(" Cancel ")])],1)],1)],1)},Lo=[],Fo={components:{},props:{value:Boolean},data:function(){return{resourceValue:null}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},watch:{value:function(e){e&&(this.resourceValue=null)}},methods:{input:function(e){this.resourceValue=e},reserve:function(){this.show=!1,this.$emit("reserve",this.resourceValue)}}},Bo=Fo,Wo=Object(k["a"])(Bo,Mo,Lo,!1,null,null,null),Uo=Wo.exports;C()(Wo,{VBtn:Ze["a"],VCard:Ce["a"],VCardActions:Se["a"],VCardText:Se["c"],VCardTitle:Se["d"],VDialog:st["a"],VForm:it["a"],VSpacer:ot["a"],VTextField:z["a"]});var Ko=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"hide-overlay":"",fullscreen:"",transition:"dialog-bottom-transition"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[e._v(" Change rate parking lot ")]),n("v-card-text",[n("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.changeRate.apply(null,arguments)}}},[n("v-text-field",{attrs:{label:"Rate",type:"number"},on:{input:function(t){return e.input(t)}}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:e.changeRate}},[e._v(" Change rate ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.show=!1}}},[e._v(" Cancel ")])],1)],1)],1)},Ho=[],Jo={components:{},props:{value:Boolean},data:function(){return{resourceValue:null}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},watch:{value:function(e){e&&(this.resourceValue=null)}},methods:{input:function(e){this.resourceValue=e},changeRate:function(){this.show=!1,this.$emit("changeRate",this.resourceValue)}}},Go=Jo,zo=Object(k["a"])(Go,Ko,Ho,!1,null,null,null),Qo=zo.exports;C()(zo,{VBtn:Ze["a"],VCard:Ce["a"],VCardActions:Se["a"],VCardText:Se["c"],VCardTitle:Se["d"],VDialog:st["a"],VForm:it["a"],VSpacer:ot["a"],VTextField:z["a"]});var Xo={components:{ParkinglotLicensePlateDialog:Uo,RequestButton:$t,ParkinglotRateDialog:Qo},useSSE:!0,name:"Parkingspot",data:function(){return{loading:!0,dialog:!1,rateDialog:!1,info:{},parkingspots:[],vehiclecounters:[],headers:[{text:"Parking spot ID",value:"parkingspotId"},{text:"State",value:"parkingspotState"},{text:"Vehicle ID",value:"vehicleId"},{text:"Lot name",value:"lotName"},{text:"",value:"textdisplay",sortable:!1},{text:"Actions",value:"actions",sortable:!1}],vehiclecounterHeaders:[{text:"Vehicle counter Id",value:"vehiclecounterId"},{text:"Vehicle counter",value:"vehicleCounter"},{text:"Last plate",value:"lastPlate"},{text:"Direction",value:"direction"},{text:"Lot name",value:"lotNameVehicleCounter"}],search:""}},computed:{showDialog:{get:function(){return this.dialog},set:function(e){this.dialog=e,this.$refs.reserve.resetState()}},showRateDialog:{get:function(){return this.rateDialog},set:function(e){this.rateDialog=e,this.$refs.rate.resetState()}}},methods:{openWriteDialog:function(){this.dialog=!0},openRateDialog:function(){this.rateDialog=!0},requestPath:function(e,t){return"api/clients/".concat(encodeURIComponent(e)).concat(t)},reserve:function(e,t){var n=this.$refs.reserve;this.axios.put("api/clients/"+t.endpoint+"/reserve?timeout=5&format=TLV",{licenseplate:e}).then((function(e){console.log(e)})).catch((function(){n.resetState()}))},changeRate:function(e){var t=this,n=this.$refs.rate;this.axios.put("api/parkingspots",{rate:e}).then((function(e){t.info=e.data})).catch((function(){n.resetState()}))}},mounted:function(){var e=this;this.sse=this.$sse.create({url:"api/event"}).on("REGISTRATION",(function(t){e.vehiclecounters=e.vehiclecounters.filter((function(e){return e.endpoint!==t.endpoint&&""!==e.vehiclecounterId})).concat(t),e.parkingspots=e.parkingspots.filter((function(e){return e.endpoint!==t.endpoint&&""!==e.parkingspotId})).concat(t)})).on("UPDATED",(function(t){e.vehiclecounters=e.vehiclecounters.filter((function(e){return e.endpoint!==t.endpoint&&""!==e.vehiclecounterId})).concat(t),e.parkingspots=e.parkingspots.filter((function(e){return e.endpoint!==t.endpoint&&""!==e.parkingspotId})).concat(t)})).on("DEREGISTRATION",(function(t){e.parkingspots=e.parkingspots.filter((function(e){return e.endpoint!==t.endpoint})),e.vehiclecounters=e.vehiclecounters.filter((function(e){return e.endpoint!==t.endpoint}))})).on("error",(function(e){console.error("sse unexpected error",e)})),this.sse.connect().catch((function(e){console.error("Failed to connect to server",e)})),this.axios.get("api/parkingspots").then((function(t){e.loading=!1,e.parkingspots=t.data.filter((function(e){return""!==e.parkingspotId})),e.vehiclecounters=t.data.filter((function(e){return""!==e.vehiclecounterId}))})),this.axios.get("api/parkingspots/info").then((function(t){e.loading=!1,e.info=t.data}))},beforeDestroy:function(){this.sse.disconnect()}},Yo=Xo,Zo=Object(k["a"])(Yo,qo,Ao,!1,null,null,null),er=Zo.exports;C()(Zo,{VCardSubtitle:Se["b"],VCardTitle:Se["d"],VDataTable:J["a"]}),a["a"].use(T["a"]);var tr=[{path:"/",redirect:"/parkinglot"},{path:"/clients/:endpoint",component:Te,children:[{path:"composite",component:bt,children:[{path:":compositeObjectName",component:Fs}]},{path:":objectid",component:Ii}]},{path:"/clients",name:"Clients",component:Z},{path:"/security",name:"Security",component:yo},{path:"/server",name:"Server",component:So,props:{pubkeyFileName:"serverPubKey.der",certFileName:"serverCertificate.der"}},{path:"/about",name:"About",component:Eo},{path:"/parkinglot",name:"ParkingLot",component:er}],nr=new T["a"]({routes:tr}),ar=nr;a["a"].config.productionTip=!1,a["a"].directive("visible",(function(e,t){e.style.visibility=t.value?"visible":"hidden"})),new a["a"]({vuetify:y,router:ar,render:function(e){return e(P)}}).$mount("#app")},8695:function(e,t,n){"use strict";n("998d")},"998d":function(e,t,n){},f907:function(e,t,n){e.exports=n.p+"img/multicolor-leshan.354a489c.png"}});
//# sourceMappingURL=app.0d0df0b7.js.map